function quarxNotify(t,e){$(".quarx-notification").css("display","block"),$(".quarx-notification").addClass(e),$(".quarx-notify-comment").html(t),$(".quarx-notification").animate({right:"20px"}),$(".quarx-notify-closer-icon").click(function(){$(".quarx-notification").animate({right:"-300px"},"",function(){$(".quarx-notification").css("display","none"),$(".quarx-notify-comment").html("")})}),setTimeout(function(){$(".quarx-notification").animate({right:"-300px"},"",function(){$(".quarx-notification").css("display","none"),$(".quarx-notify-comment").html("")})},8e3)}function confirmDelete(t){$("#deleteBtn").attr("href",t),$("#deleteModal").modal("toggle")}if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var s=t(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=s.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),r="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,r)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",r=n.data();e+="Text",null==r.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),o="string"==typeof e?e:r.slide;s||n.data("bs.carousel",s=new i(this,r)),"number"==typeof e?s.to(e):o?s[o]():r.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var s="prev"==t?-1:1,r=(i+s)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),r=n||this.getItemForDirection(e,s),o=this.interval,a="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,s.addClass(a),r.addClass(a),s.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(u)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),r=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var o=t.extend({},r.data(),s.data()),a=s.attr("data-slide-to");a&&(o.interval=!1),e.call(r,o),a&&r.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),s||i.data("bs.collapse",s=new n(this,r)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[o](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var r=e(s),o=r.data("bs.collapse"),a=o?"toggle":s.data();i.call(r,a)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(s).remove(),t(r).each(function(){var n=t(this),s=e(n),r={relatedTarget:this};s.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(s[0],i.target)||(s.trigger(i=t.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",r='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var r=e(s),o=r.hasClass("open");if(i(),!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(r.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var s=e(n),o=s.hasClass("open");if(!o&&27!=i.which||o&&27==i.which)return 27==i.which&&s.find(r).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=s.find(".dropdown-menu"+a);if(l.length){var c=l.index(i.target);38==i.which&&c>0&&c--,40==i.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),r=s.data("bs.modal"),o=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);r||s.data("bs.modal",r=new i(this,o)),"string"==typeof e?r[e](n):o.show&&r.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),r=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,o,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.tooltip",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),r=s.length;r--;){var o=s[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),h=r[0].offsetWidth,u=r[0].offsetHeight;if(c){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&d.bottom+u>f.bottom?"top":"top"==a&&d.top-u<f.top?"bottom":"right"==a&&d.right+h>f.width?"left":"left"==a&&d.left-h<f.left?"right":a,r.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,d,h,u);this.applyPlacement(m,a);var g=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=r&&(e.top=e.top+r-c);var d=this.getViewportAdjustedDelta(i,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var h=/top|bottom/.test(i),u=h?2*d.left-s+l:2*d.top-r+c,p=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&r.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,r=t(this.$tip),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var r=n?{top:0,left:0}:e.offset(),o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,o,a,r)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-o.scroll,l=e.top+r-o.scroll+n;a<o.top?s.top=o.top-a:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var c=e.left-r,d=e.left+r+i;c<o.left?s.left=o.left-c:d>o.right&&(s.left=o.left+o.width-d)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),r="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||n.data("bs.popover",s=new i(this,r)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),r="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,r)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),s=e.data("target")||e.attr("href"),r=/^#./.test(s)&&t(s);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){
var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return o!=(t=r[r.length-1])&&this.activate(t);if(o&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)o!=r[t]&&e>=s[t]&&(void 0===s[t+1]||e<s[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(r),e.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var o=n.find("> .active"),a=s&&t.support.transition&&(o.length&&o.hasClass("fade")||!!n.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),r="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,r)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),r=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=r.top?!1:"bottom":t-n>=s+o?!1:"bottom";var a=null==this.affixed,l=a?s:r.top,c=a?o:e;return null!=i&&i>=s?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,r=n.bottom,o=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(r=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var a=this.getState(o,e,s,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-e-r})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),$(function(){$(".non-form-btn").bind("click",function(t){t.preventDefault()}),$(".delete-btn").bind("click",function(t){t.preventDefault(),$("#deleteModal").modal("toggle");var e=$(this).parent("form");$("#deleteBtn").bind("click",function(){e[0].submit()})}),$(".delete-link-btn").bind("click",function(t){t.preventDefault(),$("#deleteLinkModal").modal("toggle");var e=$(this).parent("form");$("#deleteLinkBtn").bind("click",function(){e[0].submit()})}),$(".delete-btn-confirm").bind("click",function(t){t.preventDefault()}),$("form.add, form.edit").submit(function(){$(".loading-overlay").show()}),$("a.slow-link").click(function(){$(".loading-overlay").show()}),$(window).resize(function(){_setDashboard()}),_setDashboard()});var typeaheadMatcher=function(t){return function(e,i){var n;n=[],substrRegex=new RegExp(e,"i"),$.each(t,function(t,e){substrRegex.test(e)&&n.push(e)}),i(n)}},_redactorConfig={toolbar:!0,visual:!0,minHeight:175,convertVideoLinks:!0,imageUpload:!0,buttonSource:!0,replaceDivs:!1,paragraphize:!1,pastePlaintext:!0,deniedTags:["script"],imageManagerJson:_url+"/quarx/api/images/list",fileManagerJson:_url+"/quarx/api/files/list",stockImageManagerJson:"https://pixabay.com/api/",plugins:["table","video","fontcolor","imagemanager","stockimagemanager","filemanager","specialchar"],buttons:["html","formatting","fontcolor","bold","italic","underline","deleted","unorderedlist","orderedlist","outdent","indent","image","filemanager","stockimagemanager","video","link","alignment","horizontalrule"]};if($(window).load(function(){$(".pull-down").each(function(){var t=300-$(this).siblings(".thumbnail").height()-$(this).height()-48;$(this).css("margin-top",t)}),$("textarea.redactor").redactor(_redactorConfig)}),$(function(){function t(t){return t.replace(/[^\w\s]/gi,"").replace(/ /g,"-").toLowerCase()}$("#Title, #Name").bind("keyup",function(){$("#Url").val(t($(this).val()))}),$(".timepicker").datetimepicker({format:"LT"}),$(".datepicker").datetimepicker({format:"YYYY-MM-DD"}),$(".datetimepicker").datetimepicker({showTodayButton:!0,format:"YYYY-MM-DD h:m:s"}),$(".tags").tagsinput()}),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(i){return t.Bloodhound=e(i)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,a=this,l=arguments;return r=function(){n=null,i||(s=t.apply(a,l))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var l=new Date,c=e-(l-o);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,o=l,r=t.apply(i,n)):s||(s=setTimeout(a,c)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i="0.11.1",n=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function i(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function n(t){return function(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function(n){var s=[];return e.each(i,function(i){s=s.concat(t(e.toStr(n[i])))}),s}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),s=function(){"use strict";function i(i){this.maxSize=e.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function n(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(i.prototype,{set:function(t,e){var i,n=this.list.tail;this.size>=this.maxSize&&(this.list.remove(n),delete this.hash[n.key],this.size--),(i=this.hash[t])?(i.val=e,this.list.moveToFront(i)):(i=new s(t,e),this.list.add(i),this.hash[t]=i,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new n}}),e.mixin(n.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),i}(),r=function(){"use strict";function i(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||a,!this.ls&&this._noop()}function n(){return(new Date).getTime()}function s(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(e){return t.parseJSON(e)}function o(t){var e,i,n=[],s=a.length;for(e=0;s>e;e++)(i=a.key(e)).match(t)&&n.push(i.replace(t,""));return n}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(i.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(i){"QuotaExceededError"===i.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),r(this.ls.getItem(this._prefix(t)))},set:function(t,i,r){return e.isNumber(r)?this._safeSet(this._ttlKey(t),s(n()+r)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),s(i))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=o(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var i=r(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(i)&&n()>i)}}),i}(),o=function(){"use strict";function i(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new s(0):a}var n=0,r={},o=6,a=new s(10);return i.setMaxPendingRequests=function(t){o=t},i.resetCache=function(){a.reset()},e.mixin(i.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function i(t){e(null,t),d._cache.set(l,t)}function s(){e(!0)}function a(){n--,delete r[l],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var l,c,d=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((c=r[l])?c.done(i).fail(s):o>n?(n++,r[l]=this._send(t).done(i).fail(s).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(i,n){var s,r;n=n||t.noop,i=e.isString(i)?{url:i}:i||{},r=this._fingerprint(i),this.cancelled=!1,this.lastReq=r,(s=this._cache.get(r))?n(null,s):this._get(i,n)},cancel:function(){this.cancelled=!0}}),i}(),a=window.SearchIndex=function(){"use strict";function i(i){i=i||{},i.datumTokenizer&&i.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=i.identify||e.stringify,this.datumTokenizer=i.datumTokenizer,this.queryTokenizer=i.queryTokenizer,this.reset()}function n(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function s(){var t={};return t[l]=[],t[a]={},t}function r(t){for(var e={},i=[],n=0,s=t.length;s>n;n++)e[t[n]]||(e[t[n]]=!0,i.push(t[n]));return i}function o(t,e){var i=0,n=0,s=[];t=t.sort(),e=e.sort();for(var r=t.length,o=e.length;r>i&&o>n;)t[i]<e[n]?i++:t[i]>e[n]?n++:(s.push(t[i]),i++,n++);return s}var a="c",l="i";return e.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var i=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,o;i.datums[r=i.identify(t)]=t,o=n(i.datumTokenizer(t)),e.each(o,function(t){var e,n,o;for(e=i.trie,n=t.split("");o=n.shift();)e=e[a][o]||(e[a][o]=s()),e[l].push(r)})})},get:function(t){var i=this;return e.map(t,function(t){return i.datums[t]})},search:function(t){var i,s,c=this;return i=n(this.queryTokenizer(t)),e.each(i,function(t){var e,i,n,r;if(s&&0===s.length)return!1;for(e=c.trie,i=t.split("");e&&(n=i.shift());)e=e[a][n];return e&&0===i.length?(r=e[l].slice(0),void(s=s?o(s,r):r)):(s=[],!1)}),s?e.map(r(s),function(t){return c.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new r(t.cacheKey)}var i;return i={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(i.data,t,this.ttl),this.storage.set(i.protocol,location.protocol,this.ttl),this.storage.set(i.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(i.data),e.protocol=this.storage.get(i.protocol),e.thumbprint=this.storage.get(i.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function i(e){t(null,s.transform(e))}var n,s=this;t&&(n=this.prepare(this._settings()),this.transport(n).fail(e).done(i))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function i(t,i){e(t?[]:s.transform(i))}var n,s=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,i)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),d=function(){"use strict";function n(n){var s;return n?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(s,n),!n.url&&t.error("prefetch requires url to be set"),n.transform=n.filter||n.transform,n.cacheKey=n.cacheKey||n.url,n.thumbprint=i+n.thumbprint,n.transport=n.transport?a(n.transport):t.ajax,n):null}function s(i){var n;if(i)return n={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(n,i),!i.url&&t.error("remote requires url to be set"),i.transform=i.filter||i.transform,i.prepare=r(i),i.limiter=o(i),i.transport=i.transport?a(i.transport):t.ajax,delete i.replace,delete i.wildcard,delete i.rateLimitBy,delete i.rateLimitWait,i}function r(t){function e(t,e){return e.url=r(e.url,t),e}function i(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function n(t,e){return e}var s,r,o;return s=t.prepare,r=t.replace,o=t.wildcard,s?s:s=r?e:t.wildcard?i:n}function o(t){function i(t){return function(i){return e.debounce(i,t)}}function n(t){return function(i){return e.throttle(i,t)}}var s,r,o;return s=t.limiter,r=t.rateLimitBy,o=t.rateLimitWait,s||(s=/^throttle$/i.test(r)?n(o):i(o)),s}function a(i){return function(n){function s(t){e.defer(function(){o.resolve(t)})}function r(t){e.defer(function(){o.reject(t)})}var o=t.Deferred();return i(n,s,r),o}}return function(i){var r,o;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},i=e.mixin(r,i||{}),!i.datumTokenizer&&t.error("datumTokenizer is required"),!i.queryTokenizer&&t.error("queryTokenizer is required"),o=i.sorter,i.sorter=o?function(t){return t.sort(o)}:e.identity,i.local=e.isFunction(i.local)?i.local():i.local,i.prefetch=n(i.prefetch),i.remote=s(i.remote),i}}(),h=function(){"use strict";function i(t){t=d(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var s;return s=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=s),i},i.tokenizers=n,e.mixin(i.prototype,{__ttAdapter:function(){function t(t,e,n){return i.search(t,e,n)}function e(t,e){return i.search(t,e)}var i=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?i.reject():(s.add(e),s.prefetch.store(s.index.serialize()),void i.resolve())}var i,n,s=this;return i=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),i.resolve()):this.prefetch.fromNetwork(e):i.resolve(),i.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,i,n){function s(t){var i=[];e.each(t,function(t){!e.some(r,function(e){return o.identify(t)===o.identify(e)})&&i.push(t)}),n&&n(i)}var r,o=this;return r=this.sorter(this.index.search(t)),i(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,s):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return h}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,i){function n(t,e){return i(e,t)}t.each(e,n)},map:t.map,filter:t.grep,every:function(e,i){var n=!0;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?void 0:!1}),!!n):n},some:function(e,i){var n=!1;return e?(t.each(e,function(t,s){return(n=i.call(null,s,t,e))?!1:void 0}),!!n):n},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function i(){return String(e)}return t.isFunction(e)?e:i},defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var n,s;return function(){var r,o,a=this,l=arguments;return r=function(){n=null,i||(s=t.apply(a,l))},o=i&&!n,clearTimeout(n),n=setTimeout(r,e),o&&(s=t.apply(a,l)),s}},throttle:function(t,e){var i,n,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=t.apply(i,n)},function(){var l=new Date,c=e-(l-o);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,o=l,r=t.apply(i,n)):s||(s=setTimeout(a,c)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),i=function(){"use strict";function t(t){var o,a;return a=e.mixin({},r,t),o={css:s(),classes:a,html:i(a),selectors:n(a)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function i(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function n(t){var i={};return e.each(t,function(t,e){i[e]="."+t}),i}function s(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),n=function(){"use strict";function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var n,s;return n="typeahead:",s={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(i.prototype,{_trigger:function(e,i){var s;return s=t.Event(n+e),(i=i||[]).unshift(s),this.$el.trigger.apply(this.$el,i),s},before:function(t){var e,i;return e=[].slice.call(arguments,1),i=this._trigger("before"+t,e),i.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=s[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),s=function(){"use strict";function t(t,e,i,n){var s;if(!i)return this;for(e=e.split(l),i=n?a(i,n):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(e,i,n){return t.call(this,"async",e,i,n)}function i(e,i,n){return t.call(this,"sync",e,i,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function s(t){var e,i,n,s,o;if(!this._callbacks)return this;for(t=t.split(l),n=[].slice.call(arguments,1);(e=t.shift())&&(i=this._callbacks[e]);)s=r(i.sync,this,[e].concat(n)),o=r(i.async,this,[e].concat(n)),s()&&c(o);return this}function r(t,e,i){function n(){for(var n,s=0,r=t.length;!n&&r>s;s+=1)n=t[s].apply(e,i)===!1;return!n}return n}function o(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,c=o();return{onSync:i,onAsync:e,off:n,trigger:s}}(),r=function(t){"use strict";function i(t,i,n){for(var s,r=[],o=0,a=t.length;a>o;o++)r.push(e.escapeRegExChars(t[o]));return s=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function r(e){var i,n,r;return(i=a.exec(e.data))&&(r=t.createElement(s.tagName),s.className&&(r.className=s.className),n=e.splitText(i.index),n.splitText(i[0].length),r.appendChild(n.cloneNode(!0)),e.parentNode.replaceChild(r,n)),!!i}function o(t,e){for(var i,n=3,s=0;s<t.childNodes.length;s++)i=t.childNodes[s],i.nodeType===n?s+=e(i)?1:0:o(i,e)}var a;s=e.mixin({},n,s),s.node&&s.pattern&&(s.pattern=e.isArray(s.pattern)?s.pattern:[s.pattern],a=i(s.pattern,s.caseSensitive,s.wordsOnly),o(s.node,r))}}(window.document),o=function(){"use strict";function i(i,s){i=i||{},i.input||t.error("input is missing"),s.mixin(this),this.$hint=t(i.hint),this.$input=t(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=n(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function n(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return i.normalizeQuery(t)===i.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(i.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var i;switch(t){case"up":case"down":i=!o(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!o(e);break;default:i=!0}return i},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,n;i=r(t,this.query),n=i?this.query.length!==t.length:!1,this.query=t,e||i?!e&&n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,i,n,s,r=this;return t=e.bind(this._onBlur,this),i=e.bind(this._onFocus,this),n=e.bind(this._onKeydown,this),s=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",i).on("keydown.tt",n),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",s):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(r._onInput,r,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i,n;t=this.getInputValue(),e=this.getHint(),i=t!==e&&0===e.indexOf(t),n=""!==t&&i&&!this.hasOverflow(),!n&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,i,n;return t=this.$input.val().length,i=this.$input[0].selectionStart,e.isNumber(i)?i===t:document.selection?(n=document.selection.createRange(),n.moveStart("character",-t),t===n.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),i}(),a=function(){"use strict";function i(i,s){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||t.error("missing source"),i.node||t.error("missing node"),i.name&&!a(i.name)&&t.error("invalid dataset name: "+i.name),s.mixin(this),this.highlight=!!i.highlight,this.name=i.name||c(),this.limit=i.limit||5,this.displayFn=n(i.display||i.displayKey),this.templates=o(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=e.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=t(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function n(t){function i(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:i}function o(i,n){function s(e){return t("<div>").text(n(e))}return{notFound:i.notFound&&e.templatify(i.notFound),pending:i.pending&&e.templatify(i.pending),header:i.header&&e.templatify(i.header),footer:i.footer&&e.templatify(i.footer),suggestion:i.suggestion||s}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=e.getIdGenerator(),i.extractData=function(e){var i=t(e);return i.data(l.obj)?{val:i.data(l.val)||"",obj:i.data(l.obj)||null}:null},e.mixin(i.prototype,s,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var i;i=this._getSuggestionsFragment(t,e),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(t,e)).append(this._getFooter(t,e));
},_appendSuggestions:function(t,e){var i,n;i=this._getSuggestionsFragment(t,e),n=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=n},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,n){var s,o=this;return s=document.createDocumentFragment(),e.each(n,function(e){var n,r;r=o._injectQuery(i,e),n=t(o.templates.suggestion(r)).data(l.obj,e).data(l.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),s.appendChild(n[0])}),this.highlight&&r({className:this.classes.highlight,node:s,pattern:i}),t(s)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,i){return e.isObject(i)?e.mixin({_query:t},i):i},update:function(e){function i(t){o||(o=!0,t=(t||[]).slice(0,s.limit),a=t.length,s._overwrite(e,t),a<s.limit&&s.async&&s.trigger("asyncRequested",e))}function n(i){i=i||[],!r&&a<s.limit&&(s.cancel=t.noop,a+=i.length,s._append(e,i.slice(0,s.limit-a)),s.async&&s.trigger("asyncReceived",e))}var s=this,r=!1,o=!1,a=0;this.cancel(),this.cancel=function(){r=!0,s.cancel=t.noop,s.async&&s.trigger("asyncCanceled",e)},this.source(e,i,n),!o&&i([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function i(i,n){function s(e){var i=r.$node.find(e.node).first();return e.node=i.length?i:t("<div>").appendTo(r.$node),new a(e,n)}var r=this;i=i||{},i.node||t.error("node is required"),n.mixin(this),this.$node=t(i.node),this.query=null,this.datasets=e.map(i.datasets,s)}return e.mixin(i.prototype,s,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,i,n){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,i,n)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,i,n,s;e=t.position().top,i=e+t.outerHeight(!0),n=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(n+e):i>s&&this.$node.scrollTop(n+(i-s))},bind:function(){var t,i=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,i,n,s;return i=this.getActiveSelectable(),e=this._getSelectables(),n=i?e.index(i):-1,s=n+t,s=(s+1)%(e.length+1)-1,s=-1>s?e.length-1:s,-1===s?null:e.eq(s)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function i(e){e.update(t)}var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,i)),n},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,i)}}),i}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var i=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),i.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),i.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),i._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),i.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),d=function(){"use strict";function i(i,s){var r,o,a,l,c,d,h,u,p,f,m;i=i||{},i.input||t.error("missing input"),i.menu||t.error("missing menu"),i.eventBus||t.error("missing event bus"),s.mixin(this),this.eventBus=i.eventBus,this.minLength=e.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),o=n(this,"deactivate","_onBlurred"),a=n(this,"isActive","isOpen","_onEnterKeyed"),l=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),d=n(this,"isActive","open","_onUpKeyed"),h=n(this,"isActive","open","_onDownKeyed"),u=n(this,"isActive","isOpen","_onLeftKeyed"),p=n(this,"isActive","isOpen","_onRightKeyed"),f=n(this,"_openIfActive","_onQueryChanged"),m=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",d,this).onSync("downKeyed",h,this).onSync("leftKeyed",u,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function n(t){var i=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);e.each(i,function(e){return t[e].apply(t,n)})}}return e.mixin(i.prototype,{_hacks:function(){var i,n;i=this.input.$input||t("<div>"),n=this.menu.$node||t("<div>"),i.on("blur.tt",function(t){var s,r,o;s=document.activeElement,r=n.is(s),o=n.has(s).length>0,e.isMsie()&&(r||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){i.focus()}))}),n.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,i,n){this._updateHint(),this.eventBus.trigger("render",i,n,e)},_onAsyncRequested:function(t,e,i){this.eventBus.trigger("asyncrequest",i,e)},_onAsyncCanceled:function(t,e,i){this.eventBus.trigger("asynccancel",i,e)},_onAsyncReceived:function(t,e,i){this.eventBus.trigger("asyncreceive",i,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&e.preventDefault()},_onTabKeyed:function(t,e){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&e.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,i,n,s,r,a,l;t=this.menu.getTopSelectable(),i=this.menu.getSelectableData(t),n=this.input.getInputValue(),!i||e.isBlankString(n)||this.input.hasOverflow()?this.input.clearHint():(s=o.normalizeQuery(n),r=e.escapeRegExChars(s),a=new RegExp("^(?:"+r+")(.+$)","i"),l=a.exec(i.val),l&&this.input.setHint(n+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,i,n;return e=this.input.getQuery(),i=this.menu.getSelectableData(t),n=i&&e!==i.val,n&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(t){var e,i,n,s,r;return e=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(t),n=this.menu.getSelectableData(i),s=n?n.obj:null,r=this._minLengthMet()&&this.menu.update(e),r||this.eventBus.before("cursorchange",s)?!1:(this.menu.setCursor(i),n?this.input.setInputValue(n.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function s(e,i){e.each(function(){var e,n=t(this);(e=n.data(m.typeahead))&&i(e,n)})}function r(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(m.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(i){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function u(t){var i,n;i=t.data(m.www),n=t.parent().filter(i.selectors.wrapper),e.each(t.data(m.attrs),function(i,n){e.isUndefined(i)?t.removeAttr(n):t.attr(n,i)}),t.removeData(m.typeahead).removeData(m.www).removeData(m.attr).removeClass(i.classes.input),n.length&&(t.detach().insertAfter(n),n.remove())}function p(i){var n,s;return n=e.isJQuery(i)||e.isElement(i),s=n?t(i).first():[],s.length?s:null}var f,m,g;f=t.fn.typeahead,m={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},g={initialize:function(s,h){function u(){var i,u,g,v,b,y,k,w,x,C,T;e.each(h,function(t){t.highlight=!!s.highlight}),i=t(this),u=t(f.html.wrapper),g=p(s.hint),v=p(s.menu),b=s.hint!==!1&&!g,y=s.menu!==!1&&!v,b&&(g=r(i,f)),y&&(v=t(f.html.menu).css(f.css.menu)),g&&g.val(""),i=a(i,f),(b||y)&&(u.css(f.css.wrapper),i.css(b?f.css.input:f.css.inputWithNoHint),i.wrap(u).parent().prepend(b?g:null).append(y?v:null)),T=y?c:l,k=new n({el:i}),w=new o({hint:g,input:i},f),x=new T({node:v,datasets:h},f),C=new d({input:w,menu:x,eventBus:k,minLength:s.minLength},f),i.data(m.www,f),i.data(m.typeahead,C)}var f;return h=e.isArray(h)?h:[].slice.call(arguments,1),s=s||{},f=i(s.classNames),this.each(u)},isEnabled:function(){var t;return s(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return s(this,function(t){t.enable()}),this},disable:function(){return s(this,function(t){t.disable()}),this},isActive:function(){var t;return s(this.first(),function(e){t=e.isActive()}),t},activate:function(){return s(this,function(t){t.activate()}),this},deactivate:function(){return s(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return s(this.first(),function(e){t=e.isOpen()}),t},open:function(){return s(this,function(t){t.open()}),this},close:function(){return s(this,function(t){t.close()}),this},select:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.select(n)}),i},autocomplete:function(e){var i=!1,n=t(e);return s(this.first(),function(t){i=t.autocomplete(n)}),i},moveCursor:function(t){var e=!1;return s(this.first(),function(i){e=i.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(s(this,function(e){e.setVal(t)}),this):(s(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return s(this,function(t,e){u(e),t.destroy()}),this}},t.fn.typeahead=function(t){return g[t]?g[t].apply(this,[].slice.call(arguments,1)):g.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=f,this}}()}),!function(t){"use strict";function e(e,i){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container);var n=(this.inputSize<3?3:this.inputSize)+"em";this.$input.get(0).style.cssText="width: "+n+" !important; padding: 8px;",this.build(i)}function i(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(t){return t[i]}}}function n(t,e){if("function"!=typeof t[e]){var i=t[e];t[e]=function(){return i}}}function s(t){return t?l.text(t).html():""}function r(t){var e=0;if(document.selection){t.focus();var i=document.selection.createRange();i.moveStart("character",-t.value.length),e=i.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function o(e,i){var n=!1;return t.each(i,function(t,i){if("number"==typeof i&&e.which===i)return n=!0,!1;if(e.which===i.which){var s=!i.hasOwnProperty("altKey")||e.altKey===i.altKey,r=!i.hasOwnProperty("shiftKey")||e.shiftKey===i.shiftKey,o=!i.hasOwnProperty("ctrlKey")||e.ctrlKey===i.ctrlKey;if(s&&r&&o)return n=!0,!1}}),n}var a={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};e.prototype={constructor:e,add:function(e,i){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags||e!==!1&&!e)){if("string"==typeof e&&n.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&n.itemsArray.length>0&&n.remove(n.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var r=e.split(",");if(r.length>1){for(var o=0;o<r.length;o++)this.add(r[o],!0);return void(i||n.pushVal())}}var a=n.options.itemValue(e),l=n.options.itemText(e),c=n.options.tagClass(e),d=t.grep(n.itemsArray,function(t){return n.options.itemValue(t)===a})[0];if(!d||n.options.allowDuplicates){if(!(n.items().toString().length+e.length+1>n.options.maxInputLength)){var h=t.Event("beforeItemAdd",{item:e,cancel:!1});if(n.$element.trigger(h),!h.cancel){n.itemsArray.push(e);var u=t('<span class="tag '+s(c)+'">'+s(l)+'<span data-role="remove"></span></span>');if(u.data("item",e),n.findInputWrapper().before(u),u.after(" "),n.isSelect&&!t('option[value="'+encodeURIComponent(a)+'"]',n.$element)[0]){var p=t("<option selected>"+s(l)+"</option>");p.data("item",e),p.attr("value",a),n.$element.append(p)}i||n.pushVal(),(n.options.maxTags===n.itemsArray.length||n.items().toString().length===n.options.maxInputLength)&&n.$container.addClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemAdded",{item:e}))}}}else if(n.options.onTagExists){var f=t(".tag",n.$container).filter(function(){return t(this).data("item")===d});n.options.onTagExists(e,f)}}}},remove:function(e,i){var n=this;if(n.objectItems&&(e="object"==typeof e?t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==n.options.itemValue(e)}):t.grep(n.itemsArray,function(t){return n.options.itemValue(t)==e}),e=e[e.length-1]),e){var s=t.Event("beforeItemRemove",{item:e,cancel:!1});if(n.$element.trigger(s),s.cancel)return;t(".tag",n.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",n.$element).filter(function(){return t(this).data("item")===e}).remove(),-1!==t.inArray(e,n.itemsArray)&&n.itemsArray.splice(t.inArray(e,n.itemsArray),1)}i||n.pushVal(),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var i=t(this),n=i.data("item"),r=e.options.itemValue(n),o=e.options.itemText(n),a=e.options.tagClass(n);if(i.attr("class",null),i.addClass("tag "+s(a)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=s(o),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===n});l.attr("value",r)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,i=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(i,!0).trigger("change")},build:function(e){var s=this;if(s.options=t.extend({},a,e),s.objectItems&&(s.options.freeInput=!1),i(s.options,"itemValue"),i(s.options,"itemText"),n(s.options,"tagClass"),s.options.typeahead){var l=s.options.typeahead||{};n(l,"source"),s.$input.typeahead(t.extend({},l,{source:function(e,i){function n(t){for(var e=[],n=0;n<t.length;n++){var o=s.options.itemText(t[n]);r[o]=t[n],e.push(o)}i(e)}this.map={};var r=this.map,o=l.source(e);t.isFunction(o.success)?o.success(n):t.isFunction(o.then)?o.then(n):t.when(o).then(n)},updater:function(t){s.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}}))}if(s.options.typeaheadjs){var c=s.options.typeaheadjs||{};s.$input.typeahead(null,c).on("typeahead:selected",t.proxy(function(t,e){s.add(c.valueKey?e[c.valueKey]:e),s.$input.typeahead("val","")},s))}s.$container.on("click",t.proxy(function(){s.$element.attr("disabled")||s.$input.removeAttr("disabled"),s.$input.focus()},s)),s.options.addOnBlur&&s.options.freeInput&&s.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",s.$container).length&&(s.add(s.$input.val()),s.$input.val(""))},s)),s.$container.on("keydown","input",t.proxy(function(e){var i=t(e.target),n=s.findInputWrapper();if(s.$element.attr("disabled"))return void s.$input.attr("disabled","disabled");switch(e.which){case 8:if(0===r(i[0])){var o=n.prev();o&&s.remove(o.data("item"))}break;case 46:if(0===r(i[0])){var a=n.next();a&&s.remove(a.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var c=n.next();0===i.val().length&&c[0]&&(c.after(n),i.focus())}var d=i.val().length;Math.ceil(d/5),i.attr("size",Math.max(this.inputSize,i.val().length))},s)),s.$container.on("keypress","input",t.proxy(function(e){var i=t(e.target);if(s.$element.attr("disabled"))return void s.$input.attr("disabled","disabled");var n=i.val(),r=s.options.maxChars&&n.length>=s.options.maxChars;s.options.freeInput&&(o(e,s.options.confirmKeys)||r)&&(s.add(r?n.substr(0,s.options.maxChars):n),i.val(""),e.preventDefault());var a=i.val().length;Math.ceil(a/5),i.attr("size",Math.max(this.inputSize,i.val().length))},s)),s.$container.on("click","[data-role=remove]",t.proxy(function(e){s.$element.attr("disabled")||s.remove(t(e.target).closest(".tag").data("item"))},s)),s.options.itemValue===a.itemValue&&("INPUT"===s.$element[0].tagName?s.add(s.$element.val()):t("option",s.$element).each(function(){s.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],i=this.$container[0];e&&e.parentNode!==i;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(i,n){var s=[];return this.each(function(){var r=t(this).data("tagsinput");if(r)if(i||n){if(void 0!==r[i]){var o=r[i](n);void 0!==o&&s.push(o)}}else s.push(r);else r=new e(this,i),t(this).data("tagsinput",r),s.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof i?s.length>1?s:s[0]:s},t.fn.tagsinput.Constructor=e;var l=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(){var t,e,i,n,s,r,o,a,l=[].slice,c={}.hasOwnProperty,d=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};o=function(){},e=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,i,n,s,r;if(n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},i=this._callbacks[n])for(s=0,r=i.length;r>s;s++)e=i[s],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var i,n,s,r,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(n=this._callbacks[t],!n)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(s=r=0,o=n.length;o>r;s=++r)if(i=n[s],i===e){n.splice(s,1);break}return this},t}(),t=function(t){function i(t,e){var s,r,o;if(this.element=t,this.version=i.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(i.instances.push(this),this.element.dropzone=this,s=null!=(o=i.optionsForElement(this.element))?o:{},this.options=n({},this.defaultOptions,s,null!=e?e:{}),this.options.forceFallback||!i.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=i.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=i.getElements(this.options.clickable,"clickable")),this.init()}var n,s;return d(i,t),i.prototype.Emitter=e,i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],i.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return o},forceFallback:!1,fallback:function(){var t,e,n,s,r,o;for(this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),s=0,r=o.length;r>s;s++)t=o[s],/(^| )dz-message($| )/.test(t.className)&&(e=t,t.className="dz-message");return e||(e=i.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e)),n=e.getElementsByTagName("span")[0],n&&(n.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},i=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=i*e.optHeight:null==e.optHeight&&(e.optHeight=1/i*e.optWidth),n=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):i>n?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*n):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/n),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,n,s,r,o,a,l,c,d,h,u,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=i.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),h=t.previewElement.querySelectorAll("[data-dz-name]"),r=0,l=h.length;l>r;r++)e=h[r],e.textContent=t.name;for(u=t.previewElement.querySelectorAll("[data-dz-size]"),o=0,c=u.length;c>o;o++)e=u[o],e.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=i.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),n=function(e){return function(n){return n.preventDefault(),n.stopPropagation(),t.status===i.UPLOADING?i.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(t)}):e.options.dictRemoveFileConfirmation?i.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(t)}):e.removeFile(t)}}(this),p=t.previewElement.querySelectorAll("[data-dz-remove]"),f=[],a=0,d=p.length;d>a;a++)s=p[a],f.push(s.addEventListener("click",n));return f}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,s,r;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),r=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0,s=r.length;s>n;n++)i=r[n],i.alt=t.name,i.src=e;return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var i,n,s,r,o;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),r=t.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(i.textContent=e);return o}},errormultiple:o,processing:function(t){return t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink)?t._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:o,uploadprogress:function(t,e,i){var n,s,r,o,a;if(t.previewElement){for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],s=0,r=o.length;r>s;s++)n=o[s],"PROGRESS"===n.nodeName?a.push(n.value=e):a.push(n.style.width=""+e+"%");return a}},totaluploadprogress:o,
sending:o,sendingmultiple:o,success:function(t){return t.previewElement?t.previewElement.classList.add("dz-success"):void 0},successmultiple:o,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:o,complete:function(t){return t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement?t.previewElement.classList.add("dz-complete"):void 0},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,queuecomplete:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var t,e,i,n,s,r,o;for(n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],r=0,o=i.length;o>r;r++){e=i[r];for(t in e)s=e[t],n[t]=s}return n},i.prototype.getAcceptedFiles=function(){var t,e,i,n,s;for(n=this.files,s=[],e=0,i=n.length;i>e;e++)t=n[e],t.accepted&&s.push(t);return s},i.prototype.getRejectedFiles=function(){var t,e,i,n,s;for(n=this.files,s=[],e=0,i=n.length;i>e;e++)t=n[e],t.accepted||s.push(t);return s},i.prototype.getFilesWithStatus=function(t){var e,i,n,s,r;for(s=this.files,r=[],i=0,n=s.length;n>i;i++)e=s[i],e.status===t&&r.push(e);return r},i.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(i.QUEUED)},i.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(i.UPLOADING)},i.prototype.getActiveFiles=function(){var t,e,n,s,r;for(s=this.files,r=[],e=0,n=s.length;n>e;e++)t=s[e],t.status!==i.UPLOADING&&t.status!==i.QUEUED||r.push(t);return r},i.prototype.init=function(){var t,e,n,s,r,o,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(t){return function(){return t.hiddenFileInput&&document.body.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.body.appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,i,s,r;if(i=t.hiddenFileInput.files,i.length)for(s=0,r=i.length;r>s;s++)e=i[s],t.addFile(e);return n()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,a=this.events,s=0,r=a.length;r>s;s++)t=a[s],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(e){return 0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length?setTimeout(function(){return t.emit("queuecomplete")},0):void 0}}(this)),e=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(i){return e(i),t.emit("dragenter",i)}}(this),dragover:function(t){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(s){}return i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",e(i),t.emit("dragover",i)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(i){return e(i),t.drop(i)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(e){return t.listeners.push({element:e,events:{click:function(n){return e!==t.element||n.target===t.element||i.elementInside(n.target,t.element.querySelector(".dz-message"))?t.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},i.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,i.instances.splice(i.instances.indexOf(this),1)},i.prototype.updateTotalUploadProgress=function(){var t,e,i,n,s,r,o,a;if(n=0,i=0,t=this.getActiveFiles(),t.length){for(a=this.getActiveFiles(),r=0,o=a.length;o>r;r++)e=a[r],n+=e.upload.bytesSent,i+=e.upload.total;s=100*n/i}else s=100;return this.emit("totaluploadprogress",s,i,n)},i.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},i.prototype.getFallbackForm=function(){var t,e,n,s;return(t=this.getExistingFallback())?t:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',e=i.createElement(n),"FORM"!==this.element.tagName?(s=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),s.appendChild(e)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=s?s:e)},i.prototype.getExistingFallback=function(){var t,e,i,n,s,r;for(e=function(t){var e,i,n;for(i=0,n=t.length;n>i;i++)if(e=t[i],/(^| )fallback($| )/.test(e.className))return e},r=["div","form"],n=0,s=r.length;s>n;n++)if(i=r[n],t=e(this.element.getElementsByTagName(i)))return t},i.prototype.setupEventListeners=function(){var t,e,i,n,s,r,o;for(r=this.listeners,o=[],n=0,s=r.length;s>n;n++)t=r[n],o.push(function(){var n,s;n=t.events,s=[];for(e in n)i=n[e],s.push(t.element.addEventListener(e,i,!1));return s}());return o},i.prototype.removeEventListeners=function(){var t,e,i,n,s,r,o;for(r=this.listeners,o=[],n=0,s=r.length;s>n;n++)t=r[n],o.push(function(){var n,s;n=t.events,s=[];for(e in n)i=n[e],s.push(t.element.removeEventListener(e,i,!1));return s}());return o},i.prototype.disable=function(){var t,e,i,n,s;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(this.cancelUpload(t));return s},i.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},i.prototype.filesize=function(t){var e,i,n,s,r,o,a,l;for(o=["TB","GB","MB","KB","b"],n=s=null,i=a=0,l=o.length;l>a;i=++a)if(r=o[i],e=Math.pow(this.options.filesizeBase,4-i)/10,t>=e){n=t/Math.pow(this.options.filesizeBase,4-i),s=r;break}return n=Math.round(10*n)/10,"<strong>"+n+"</strong> "+s},i.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.prototype.drop=function(t){var e,i;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,e.length&&(i=t.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(e)))},i.prototype.paste=function(t){var e,i;if(null!=(null!=t&&null!=(i=t.clipboardData)?i.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},i.prototype.handleFiles=function(t){var e,i,n,s;for(s=[],i=0,n=t.length;n>i;i++)e=t[i],s.push(this.addFile(e));return s},i.prototype._addFilesFromItems=function(t){var e,i,n,s,r;for(r=[],n=0,s=t.length;s>n;n++)i=t[n],null!=i.webkitGetAsEntry&&(e=i.webkitGetAsEntry())?e.isFile?r.push(this.addFile(i.getAsFile())):e.isDirectory?r.push(this._addFilesFromDirectory(e,e.name)):r.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?r.push(this.addFile(i.getAsFile())):r.push(void 0);return r},i.prototype._addFilesFromDirectory=function(t,e){var i,n;return i=t.createReader(),n=function(t){return function(i){var n,s,r;for(s=0,r=i.length;r>s;s++)n=i[s],n.isFile?n.file(function(i){return t.options.ignoreHiddenFiles&&"."===i.name.substring(0,1)?void 0:(i.fullPath=""+e+"/"+i.name,t.addFile(i))}):n.isDirectory&&t._addFilesFromDirectory(n,""+e+"/"+n.name)}}(this),i.readEntries(n,function(t){return"undefined"!=typeof console&&null!==console?("function"==typeof console.log,void 0):void 0})},i.prototype.accept=function(t,e){return t.size>1024*this.options.maxFilesize*1024?e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):i.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,e):e(this.options.dictInvalidFileType)},i.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=i.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(i){return i?(t.accepted=!1,e._errorProcessing([t],i)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},i.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;n>i;i++)e=t[i],this.enqueueFile(e);return null},i.prototype.enqueueFile=function(t){if(t.status!==i.ADDED||t.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return t.status=i.QUEUED,this.options.autoProcessQueue?setTimeout(function(t){return function(){return t.processQueue()}}(this),0):void 0},i.prototype._thumbnailQueue=[],i.prototype._processingThumbnail=!1,i.prototype._enqueueThumbnail=function(t){return this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)):void 0},i.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this)))},i.prototype.removeFile=function(t){return t.status===i.UPLOADING&&this.cancelUpload(t),this.files=a(this.files,t),this.emit("removedfile",t),0===this.files.length?this.emit("reset"):void 0},i.prototype.removeAllFiles=function(t){var e,n,s,r;for(null==t&&(t=!1),r=this.files.slice(),n=0,s=r.length;s>n;n++)e=r[n],(e.status!==i.UPLOADING||t)&&this.removeFile(e);return null},i.prototype.createThumbnail=function(t,e){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===t.type?(n.emit("thumbnail",t,i.result),void(null!=e&&e())):n.createThumbnailFromUrl(t,i.result,e)}}(this),i.readAsDataURL(t)},i.prototype.createThumbnailFromUrl=function(t,e,i){var n;return n=document.createElement("img"),n.onload=function(e){return function(){var s,o,a,l,c,d,h,u;return t.width=n.width,t.height=n.height,a=e.options.resize.call(e,t),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),s=document.createElement("canvas"),o=s.getContext("2d"),s.width=a.trgWidth,s.height=a.trgHeight,r(o,n,null!=(c=a.srcX)?c:0,null!=(d=a.srcY)?d:0,a.srcWidth,a.srcHeight,null!=(h=a.trgX)?h:0,null!=(u=a.trgY)?u:0,a.trgWidth,a.trgHeight),l=s.toDataURL("image/png"),e.emit("thumbnail",t,l),null!=i?i():void 0}}(this),null!=i&&(n.onerror=i),n.src=e},i.prototype.processQueue=function(){var t,e,i,n;if(e=this.options.parallelUploads,i=this.getUploadingFiles().length,t=i,!(i>=e)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-i));for(;e>t;){if(!n.length)return;this.processFile(n.shift()),t++}}},i.prototype.processFile=function(t){return this.processFiles([t])},i.prototype.processFiles=function(t){var e,n,s;for(n=0,s=t.length;s>n;n++)e=t[n],e.processing=!0,e.status=i.UPLOADING,this.emit("processing",e);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},i.prototype._getFilesWithXhr=function(t){var e,i;return i=function(){var i,n,s,r;for(s=this.files,r=[],i=0,n=s.length;n>i;i++)e=s[i],e.xhr===t&&r.push(e);return r}.call(this)},i.prototype.cancelUpload=function(t){var e,n,s,r,o,a,l;if(t.status===i.UPLOADING){for(n=this._getFilesWithXhr(t.xhr),s=0,o=n.length;o>s;s++)e=n[s],e.status=i.CANCELED;for(t.xhr.abort(),r=0,a=n.length;a>r;r++)e=n[r],this.emit("canceled",e);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(l=t.status)!==i.ADDED&&l!==i.QUEUED||(t.status=i.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));return this.options.autoProcessQueue?this.processQueue():void 0},s=function(){var t,e;return e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},i.prototype.uploadFile=function(t){return this.uploadFiles([t])},i.prototype.uploadFiles=function(t){var e,r,o,a,l,c,d,h,u,p,f,m,g,v,b,y,k,w,x,C,T,$,_,S,E,D,A,F,M,I,O,P,L,R;for(x=new XMLHttpRequest,C=0,S=t.length;S>C;C++)e=t[C],e.xhr=x;m=s(this.options.method,t),k=s(this.options.url,t),x.open(m,k,!0),x.withCredentials=!!this.options.withCredentials,b=null,o=function(i){return function(){var n,s,r;for(r=[],n=0,s=t.length;s>n;n++)e=t[n],r.push(i._errorProcessing(t,b||i.options.dictResponseError.replace("{{statusCode}}",x.status),x));return r}}(this),y=function(i){return function(n){var s,r,o,a,l,c,d,h,u;if(null!=n)for(r=100*n.loaded/n.total,o=0,c=t.length;c>o;o++)e=t[o],e.upload={progress:r,total:n.total,bytesSent:n.loaded};else{for(s=!0,r=100,a=0,d=t.length;d>a;a++)e=t[a],100===e.upload.progress&&e.upload.bytesSent===e.upload.total||(s=!1),e.upload.progress=r,e.upload.bytesSent=e.upload.total;if(s)return}for(u=[],l=0,h=t.length;h>l;l++)e=t[l],u.push(i.emit("uploadprogress",e,r,e.upload.bytesSent));return u}}(this),x.onload=function(e){return function(n){var s;if(t[0].status!==i.CANCELED&&4===x.readyState){if(b=x.responseText,x.getResponseHeader("content-type")&&~x.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(r){n=r,b="Invalid JSON response from server."}return y(),200<=(s=x.status)&&300>s?e._finished(t,b,n):o()}}}(this),x.onerror=function(e){return function(){return t[0].status!==i.CANCELED?o():void 0}}(this),v=null!=(M=x.upload)?M:x,v.onprogress=y,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(c,this.options.headers);for(a in c)l=c[a],x.setRequestHeader(a,l);if(r=new FormData,this.options.params){I=this.options.params;for(f in I)w=I[f],r.append(f,w)}for(T=0,E=t.length;E>T;T++)e=t[T],this.emit("sending",e,x,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,x,r),"FORM"===this.element.tagName)for(O=this.element.querySelectorAll("input, textarea, select, button"),$=0,D=O.length;D>$;$++)if(h=O[$],u=h.getAttribute("name"),p=h.getAttribute("type"),"SELECT"===h.tagName&&h.hasAttribute("multiple"))for(P=h.options,_=0,A=P.length;A>_;_++)g=P[_],g.selected&&r.append(u,g.value);else(!p||"checkbox"!==(L=p.toLowerCase())&&"radio"!==L||h.checked)&&r.append(u,h.value);for(d=F=0,R=t.length-1;R>=0?R>=F:F>=R;d=R>=0?++F:--F)r.append(this._getParamName(d),t[d],t[d].name);return x.send(r)},i.prototype._finished=function(t,e,n){var s,r,o;for(r=0,o=t.length;o>r;r++)s=t[r],s.status=i.SUCCESS,this.emit("success",s,e,n),this.emit("complete",s);return this.options.uploadMultiple&&(this.emit("successmultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},i.prototype._errorProcessing=function(t,e,n){var s,r,o;for(r=0,o=t.length;o>r;r++)s=t[r],s.status=i.ERROR,this.emit("error",s,e,n),this.emit("complete",s);return this.options.uploadMultiple&&(this.emit("errormultiple",t,e,n),this.emit("completemultiple",t)),this.options.autoProcessQueue?this.processQueue():void 0},i}(e),t.version="4.0.1",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[i(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,i,n,s,r,o;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(t){var e,i,s,r;for(r=[],i=0,s=t.length;s>i;i++)e=t[i],/(^| )dropzone($| )/.test(e.className)?r.push(n.push(e)):r.push(void 0);return r},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],s=0,r=n.length;r>s;s++)i=n[s],t.optionsForElement(i)!==!1?o.push(new t(i)):o.push(void 0);return o},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,i,n,s,r;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=t.blacklistedBrowsers,n=0,s=r.length;s>n;n++)i=r[n],i.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},a=function(t,e){var i,n,s,r;for(r=[],n=0,s=t.length;s>n;n++)i=t[n],i!==e&&r.push(i);return r},i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var i;if("string"==typeof t?i=document.querySelector(t):null!=t.nodeType&&(i=t),null==i)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},t.getElements=function(t,e){var i,n,s,r,o,a,l,c;if(t instanceof Array){s=[];try{for(r=0,a=t.length;a>r;r++)n=t[r],s.push(this.getElement(n,e))}catch(d){i=d,s=null}}else if("string"==typeof t)for(s=[],c=document.querySelectorAll(t),o=0,l=c.length;l>o;o++)n=c[o],s.push(n);else null!=t.nodeType&&(s=[t]);if(null==s||!s.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return s},t.confirm=function(t,e,i){return window.confirm(t)?e():null!=i?i():void 0},t.isValidFile=function(t,e){var i,n,s,r,o;if(!e)return!0;for(e=e.split(","),n=t.type,i=n.replace(/\/.*$/,""),r=0,o=e.length;o>r;r++)if(s=e[r],s=s.trim(),"."===s.charAt(0)){if(-1!==t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(i===s.replace(/\/.*$/,""))return!0}else if(n===s)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",s=function(t){var e,i,n,s,r,o,a,l,c,d;for(a=t.naturalWidth,o=t.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=o,n=i.getContext("2d"),n.drawImage(t,0,0),s=n.getImageData(0,0,1,o).data,d=0,r=o,l=o;l>d;)e=s[4*(l-1)+3],0===e?r=l:d=l,l=r+d>>1;return c=l/o,0===c?1:c},r=function(t,e,i,n,r,o,a,l,c,d){var h;return h=s(e),t.drawImage(e,i,n,r,o,a,l,c,d/h)},n=function(t,e){var i,n,s,r,o,a,l,c,d;if(s=!1,d=!0,n=t.document,c=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",r=function(i){return"readystatechange"!==i.type||"complete"===n.readyState?(("load"===i.type?t:n)[l](a+i.type,r,!1),!s&&(s=!0)?e.call(t,i.type||i):void 0):void 0},o=function(){var t;try{c.doScroll("left")}catch(e){return t=e,void setTimeout(o,50)}return r("poll")},"complete"!==n.readyState){if(n.createEventObject&&c.doScroll){try{d=!t.frameElement}catch(h){}d&&o()}return n[i](a+"DOMContentLoaded",r,!1),n[i](a+"readystatechange",r,!1),t[i](a+"load",r,!1)}},t._autoDiscoverFunction=function(){return t.autoDiscover?t.discover():void 0},n(window,t._autoDiscoverFunction)}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Ii.apply(null,arguments)}function e(t){Ii=t}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var i in e)r(e,i)&&(t[i]=e[i]);return r(e,"toString")&&(t.toString=e.toString),r(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,i,n){return Et(t,e,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(t){return null==t._pf&&(t._pf=l()),t._pf}function d(t){if(null==t._isValid){var e=c(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function h(t){var e=a(NaN);return null!=t?o(c(e),t):c(e).userInvalidated=!0,e}function u(t,e){var i,n,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=c(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Pi.length>0)for(i in Pi)n=Pi[i],s=e[n],"undefined"!=typeof s&&(t[n]=s);return t}function p(e){u(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Li===!1&&(Li=!0,t.updateOffset(this),Li=!1)}function f(t){return t instanceof p||null!=t&&null!=t._isAMomentObject}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function g(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=m(e)),i}function v(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&g(t[n])!==g(e[n]))&&o++;return o+r}function b(){}function y(t){return t?t.toLowerCase().replace("_","-"):t}function k(t){for(var e,i,n,s,r=0;r<t.length;){for(s=y(t[r]).split("-"),e=s.length,i=y(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=w(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&v(s,i,!0)>=e-1)break;e--}r++}return null}function w(t){var e=null;if(!Ri[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Oi._abbr,require("./locale/"+t),x(e)}catch(i){}return Ri[t]}function x(t,e){var i;return t&&(i="undefined"==typeof e?T(t):C(t,e),i&&(Oi=i)),Oi._abbr}function C(t,e){return null!==e?(e.abbr=t,Ri[t]=Ri[t]||new b,Ri[t].set(e),x(t),Ri[t]):(delete Ri[t],null)}function T(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Oi;if(!i(t)){if(e=w(t))return e;t=[t]}return k(t)}function $(t,e){var i=t.toLowerCase();Ni[i]=Ni[i+"s"]=Ni[e]=t}function _(t){return"string"==typeof t?Ni[t]||Ni[t.toLowerCase()]:void 0}function S(t){var e,i,n={};for(i in t)r(t,i)&&(e=_(i),e&&(n[e]=t[i]));return n}function E(e,i){return function(n){return null!=n?(A(this,e,n),t.updateOffset(this,i),this):D(this,e)}}function D(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function A(t,e,i){return t._d["set"+(t._isUTC?"UTC":"")+e](i)}function F(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else if(t=_(t),"function"==typeof this[t])return this[t](e);return this}function M(t,e,i){var n=""+Math.abs(t),s=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}function I(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(Ui[t]=s),e&&(Ui[e[0]]=function(){return M(s.apply(this,arguments),e[1],e[2])}),i&&(Ui[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function P(t){var e,i,n=t.match(zi);for(e=0,i=n.length;i>e;e++)Ui[n[e]]?n[e]=Ui[n[e]]:n[e]=O(n[e]);return function(s){var r="";for(e=0;i>e;e++)r+=n[e]instanceof Function?n[e].call(s,t):n[e];return r}}function L(t,e){return t.isValid()?(e=R(e,t.localeData()),Hi[e]=Hi[e]||P(e),Hi[e](t)):t.localeData().invalidDate()}function R(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Bi.lastIndex=0;n>=0&&Bi.test(t);)t=t.replace(Bi,i),Bi.lastIndex=0,n-=1;return t}function N(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function z(t,e,i){sn[t]=N(e)?e:function(t){return t&&i?i:e}}function B(t,e){return r(sn,t)?sn[t](e._strict,e._locale):new RegExp(H(t))}function H(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=g(t)}),i=0;i<t.length;i++)rn[t[i]]=n}function q(t,e){U(t,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function W(t,e,i){null!=e&&r(rn,t)&&rn[t](e,i._a,i,t)}function Y(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function j(t){return this._months[t.month()]}function V(t){return this._monthsShort[t.month()]}function K(t,e,i){var n,s,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=a([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function Q(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),Y(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function G(e){return null!=e?(Q(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function Z(){return Y(this.year(),this.month())}function J(t){var e,i=t._a;return i&&-2===c(t).overflow&&(e=i[an]<0||i[an]>11?an:i[ln]<1||i[ln]>Y(i[on],i[an])?ln:i[cn]<0||i[cn]>24||24===i[cn]&&(0!==i[dn]||0!==i[hn]||0!==i[un])?cn:i[dn]<0||i[dn]>59?dn:i[hn]<0||i[hn]>59?hn:i[un]<0||i[un]>999?un:-1,c(t)._overflowDayOfYear&&(on>e||e>ln)&&(e=ln),c(t).overflow=e),t}function X(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function tt(t,e){var i=!0;return o(function(){return i&&(X(t+"\n"+(new Error).stack),i=!1),e.apply(this,arguments)},e)}function et(t,e){mn[t]||(X(e),mn[t]=!0)}function it(t){var e,i,n=t._i,s=gn.exec(n);if(s){for(c(t).iso=!0,e=0,i=vn.length;i>e;e++)if(vn[e][1].exec(n)){t._f=vn[e][0];break}for(e=0,i=bn.length;i>e;e++)if(bn[e][1].exec(n)){t._f+=(s[6]||" ")+bn[e][0];break}n.match(tn)&&(t._f+="Z"),wt(t)}else t._isValid=!1}function nt(e){var i=yn.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(it(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function st(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);return 1970>t&&a.setFullYear(t),
a}function rt(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ot(t){return at(t)?366:365}function at(t){return t%4===0&&t%100!==0||t%400===0}function lt(){return at(this.year())}function ct(t,e,i){var n,s=i-e,r=i-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),n=Dt(t).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function dt(t){return ct(t,this._week.dow,this._week.doy).week}function ht(){return this._week.dow}function ut(){return this._week.doy}function pt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function ft(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function mt(t,e,i,n,s){var r,o=6+s-n,a=rt(t,0,1+o),l=a.getUTCDay();return s>l&&(l+=7),i=null!=i?1*i:s,r=1+o+7*(e-1)-l+i,{year:r>0?t:t-1,dayOfYear:r>0?r:ot(t-1)+r}}function gt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function vt(t,e,i){return null!=t?t:null!=e?e:i}function bt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function yt(t){var e,i,n,s,r=[];if(!t._d){for(n=bt(t),t._w&&null==t._a[ln]&&null==t._a[an]&&kt(t),t._dayOfYear&&(s=vt(t._a[on],n[on]),t._dayOfYear>ot(s)&&(c(t)._overflowDayOfYear=!0),i=rt(s,0,t._dayOfYear),t._a[an]=i.getUTCMonth(),t._a[ln]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=n[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[cn]&&0===t._a[dn]&&0===t._a[hn]&&0===t._a[un]&&(t._nextDay=!0,t._a[cn]=0),t._d=(t._useUTC?rt:st).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[cn]=24)}}function kt(t){var e,i,n,s,r,o,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,o=4,i=vt(e.GG,t._a[on],ct(Dt(),1,4).year),n=vt(e.W,1),s=vt(e.E,1)):(r=t._locale._week.dow,o=t._locale._week.doy,i=vt(e.gg,t._a[on],ct(Dt(),r,o).year),n=vt(e.w,1),null!=e.d?(s=e.d,r>s&&++n):s=null!=e.e?e.e+r:r),a=mt(i,n,s,o,r),t._a[on]=a.year,t._dayOfYear=a.dayOfYear}function wt(e){if(e._f===t.ISO_8601)return void it(e);e._a=[],c(e).empty=!0;var i,n,s,r,o,a=""+e._i,l=a.length,d=0;for(s=R(e._f,e._locale).match(zi)||[],i=0;i<s.length;i++)r=s[i],n=(a.match(B(r,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&c(e).unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),d+=n.length),Ui[r]?(n?c(e).empty=!1:c(e).unusedTokens.push(r),W(r,n,e)):e._strict&&!n&&c(e).unusedTokens.push(r);c(e).charsLeftOver=l-d,a.length>0&&c(e).unusedInput.push(a),c(e).bigHour===!0&&e._a[cn]<=12&&e._a[cn]>0&&(c(e).bigHour=void 0),e._a[cn]=xt(e._locale,e._a[cn],e._meridiem),yt(e),J(e)}function xt(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function Ct(t){var e,i,n,s,r;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)r=0,e=u({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],wt(e),d(e)&&(r+=c(e).charsLeftOver,r+=10*c(e).unusedTokens.length,c(e).score=r,(null==n||n>r)&&(n=r,i=e));o(t,i||e)}function Tt(t){if(!t._d){var e=S(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],yt(t)}}function $t(t){var e=new p(J(_t(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _t(t){var e=t._i,s=t._f;return t._locale=t._locale||T(t._l),null===e||void 0===s&&""===e?h({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),f(e)?new p(J(e)):(i(s)?Ct(t):s?wt(t):n(e)?t._d=e:St(t),t))}function St(e){var r=e._i;void 0===r?e._d=new Date:n(r)?e._d=new Date(+r):"string"==typeof r?nt(e):i(r)?(e._a=s(r.slice(0),function(t){return parseInt(t,10)}),yt(e)):"object"==typeof r?Tt(e):"number"==typeof r?e._d=new Date(r):t.createFromInputFallback(e)}function Et(t,e,i,n,s){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=i,r._i=t,r._f=e,r._strict=n,$t(r)}function Dt(t,e,i,n){return Et(t,e,i,n,!1)}function At(t,e){var n,s;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Dt();for(n=e[0],s=1;s<e.length;++s)e[s].isValid()&&!e[s][t](n)||(n=e[s]);return n}function Ft(){var t=[].slice.call(arguments,0);return At("isBefore",t)}function Mt(){var t=[].slice.call(arguments,0);return At("isAfter",t)}function It(t){var e=S(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,d=e.millisecond||0;this._milliseconds=+d+1e3*c+6e4*l+36e5*a,this._days=+o+7*r,this._months=+s+3*n+12*i,this._data={},this._locale=T(),this._bubble()}function Ot(t){return t instanceof It}function Pt(t,e){I(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+M(~~(t/60),2)+e+M(~~t%60,2)})}function Lt(t){var e=(t||"").match(tn)||[],i=e[e.length-1]||[],n=(i+"").match(Tn)||["-",0,0],s=+(60*n[1])+g(n[2]);return"+"===n[0]?s:-s}function Rt(e,i){var s,r;return i._isUTC?(s=i.clone(),r=(f(e)||n(e)?+e:+Dt(e))-+s,s._d.setTime(+s._d+r),t.updateOffset(s,!1),s):Dt(e).local()}function Nt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function zt(e,i){var n,s=this._offset||0;return null!=e?("string"==typeof e&&(e=Lt(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(n=Nt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),s!==e&&(!i||this._changeInProgress?ee(this,Gt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Nt(this)}function Bt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ht(t){return this.utcOffset(0,t)}function Ut(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Nt(this),"m")),this}function qt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Lt(this._i)),this}function Wt(t){return t=t?Dt(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Yt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(u(t,this),t=_t(t),t._a){var e=t._isUTC?a(t._a):Dt(t._a);this._isDSTShifted=this.isValid()&&v(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Vt(){return!this._isUTC}function Kt(){return this._isUTC}function Qt(){return this._isUTC&&0===this._offset}function Gt(t,e){var i,n,s,o=t,a=null;return Ot(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=$n.exec(t))?(i="-"===a[1]?-1:1,o={y:0,d:g(a[ln])*i,h:g(a[cn])*i,m:g(a[dn])*i,s:g(a[hn])*i,ms:g(a[un])*i}):(a=_n.exec(t))?(i="-"===a[1]?-1:1,o={y:Zt(a[2],i),M:Zt(a[3],i),d:Zt(a[4],i),h:Zt(a[5],i),m:Zt(a[6],i),s:Zt(a[7],i),w:Zt(a[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(s=Xt(Dt(o.from),Dt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),n=new It(o),Ot(t)&&r(t,"_locale")&&(n._locale=t._locale),n}function Zt(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Jt(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Xt(t,e){var i;return e=Rt(e,t),t.isBefore(e)?i=Jt(t,e):(i=Jt(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function te(t,e){return function(i,n){var s,r;return null===n||isNaN(+n)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,s=Gt(i,n),ee(this,s,t),this}}function ee(e,i,n,s){var r=i._milliseconds,o=i._days,a=i._months;s=null==s?!0:s,r&&e._d.setTime(+e._d+r*n),o&&A(e,"Date",D(e,"Date")+o*n),a&&Q(e,D(e,"Month")+a*n),s&&t.updateOffset(e,o||a)}function ie(t,e){var i=t||Dt(),n=Rt(i,this).startOf("day"),s=this.diff(n,"days",!0),r=-6>s?"sameElse":-1>s?"lastWeek":0>s?"lastDay":1>s?"sameDay":2>s?"nextDay":7>s?"nextWeek":"sameElse";return this.format(e&&e[r]||this.localeData().calendar(r,this,Dt(i)))}function ne(){return new p(this)}function se(t,e){var i;return e=_("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+this>+t):(i=f(t)?+t:+Dt(t),i<+this.clone().startOf(e))}function re(t,e){var i;return e=_("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+t>+this):(i=f(t)?+t:+Dt(t),+this.clone().endOf(e)<i)}function oe(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function ae(t,e){var i;return e=_(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Dt(t),+this===+t):(i=+Dt(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))}function le(t,e,i){var n,s,r=Rt(t,this),o=6e4*(r.utcOffset()-this.utcOffset());return e=_(e),"year"===e||"month"===e||"quarter"===e?(s=ce(this,r),"quarter"===e?s/=3:"year"===e&&(s/=12)):(n=this-r,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-o)/864e5:"week"===e?(n-o)/6048e5:n),i?s:m(s)}function ce(t,e){var i,n,s=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(s,"months");return 0>e-r?(i=t.clone().add(s-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(s+1,"months"),n=(e-r)/(i-r)),-(s+n)}function de(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function he(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():L(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ue(e){var i=L(this,e||t.defaultFormat);return this.localeData().postformat(i)}function pe(t,e){return this.isValid()?Gt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function fe(t){return this.from(Dt(),t)}function me(t,e){return this.isValid()?Gt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ge(t){return this.to(Dt(),t)}function ve(t){var e;return void 0===t?this._locale._abbr:(e=T(t),null!=e&&(this._locale=e),this)}function be(){return this._locale}function ye(t){switch(t=_(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ke(t){return t=_(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function we(){return+this._d-6e4*(this._offset||0)}function xe(){return Math.floor(+this/1e3)}function Ce(){return this._offset?new Date(+this):this._d}function Te(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function $e(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function _e(){return d(this)}function Se(){return o({},c(this))}function Ee(){return c(this).overflow}function De(t,e){I(0,[t,t.length],0,e)}function Ae(t,e,i){return ct(Dt([t,11,31+e-i]),e,i).week}function Fe(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Me(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ie(){return Ae(this.year(),1,4)}function Oe(){var t=this.localeData()._week;return Ae(this.year(),t.dow,t.doy)}function Pe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Le(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Re(t){return this._weekdays[t.day()]}function Ne(t){return this._weekdaysShort[t.day()]}function ze(t){return this._weekdaysMin[t.day()]}function Be(t){var e,i,n;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(i=Dt([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function He(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Le(t,this.localeData()),this.add(t-e,"d")):e}function Ue(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function qe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function We(t,e){I(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ye(t,e){return e._meridiemParse}function je(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ve(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ke(t,e){e[un]=g(1e3*("0."+t))}function Qe(){return this._isUTC?"UTC":""}function Ge(){return this._isUTC?"Coordinated Universal Time":""}function Ze(t){return Dt(1e3*t)}function Je(){return Dt.apply(null,arguments).parseZone()}function Xe(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.call(e,i):n}function ti(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function ei(){return this._invalidDate}function ii(t){return this._ordinal.replace("%d",t)}function ni(t){return t}function si(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)}function ri(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)}function oi(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ai(t,e,i,n){var s=T(),r=a().set(n,e);return s[i](r,t)}function li(t,e,i,n,s){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return ai(t,e,i,s);var r,o=[];for(r=0;n>r;r++)o[r]=ai(t,r,i,s);return o}function ci(t,e){return li(t,e,"months",12,"month")}function di(t,e){return li(t,e,"monthsShort",12,"month")}function hi(t,e){return li(t,e,"weekdays",7,"day")}function ui(t,e){return li(t,e,"weekdaysShort",7,"day")}function pi(t,e){return li(t,e,"weekdaysMin",7,"day")}function fi(){var t=this._data;return this._milliseconds=Qn(this._milliseconds),this._days=Qn(this._days),this._months=Qn(this._months),t.milliseconds=Qn(t.milliseconds),t.seconds=Qn(t.seconds),t.minutes=Qn(t.minutes),t.hours=Qn(t.hours),t.months=Qn(t.months),t.years=Qn(t.years),this}function mi(t,e,i,n){var s=Gt(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function gi(t,e){return mi(this,t,e,1)}function vi(t,e){return mi(this,t,e,-1)}function bi(t){return 0>t?Math.floor(t):Math.ceil(t)}function yi(){var t,e,i,n,s,r=this._milliseconds,o=this._days,a=this._months,l=this._data;return r>=0&&o>=0&&a>=0||0>=r&&0>=o&&0>=a||(r+=864e5*bi(wi(a)+o),o=0,a=0),l.milliseconds=r%1e3,t=m(r/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,i=m(e/60),l.hours=i%24,o+=m(i/24),s=m(ki(o)),a+=s,o-=bi(wi(s)),n=m(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function ki(t){return 4800*t/146097}function wi(t){return 146097*t/4800}function xi(t){var e,i,n=this._milliseconds;if(t=_(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+ki(e),"month"===t?i:i/12;switch(e=this._days+Math.round(wi(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Ci(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function Ti(t){return function(){return this.as(t)}}function $i(t){return t=_(t),this[t+"s"]()}function _i(t){return function(){return this._data[t]}}function Si(){return m(this.days()/7)}function Ei(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function Di(t,e,i){var n=Gt(t).abs(),s=hs(n.as("s")),r=hs(n.as("m")),o=hs(n.as("h")),a=hs(n.as("d")),l=hs(n.as("M")),c=hs(n.as("y")),d=s<us.s&&["s",s]||1===r&&["m"]||r<us.m&&["mm",r]||1===o&&["h"]||o<us.h&&["hh",o]||1===a&&["d"]||a<us.d&&["dd",a]||1===l&&["M"]||l<us.M&&["MM",l]||1===c&&["y"]||["yy",c];return d[2]=e,d[3]=+t>0,d[4]=i,Ei.apply(null,d)}function Ai(t,e){return void 0===us[t]?!1:void 0===e?us[t]:(us[t]=e,!0)}function Fi(t){var e=this.localeData(),i=Di(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Mi(){var t,e,i,n=ps(this._milliseconds)/1e3,s=ps(this._days),r=ps(this._months);t=m(n/60),e=m(t/60),n%=60,t%=60,i=m(r/12),r%=12;var o=i,a=r,l=s,c=e,d=t,h=n,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||d||h?"T":"")+(c?c+"H":"")+(d?d+"M":"")+(h?h+"S":""):"P0D"}var Ii,Oi,Pi=t.momentProperties=[],Li=!1,Ri={},Ni={},zi=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Bi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hi={},Ui={},qi=/\d/,Wi=/\d\d/,Yi=/\d{3}/,ji=/\d{4}/,Vi=/[+-]?\d{6}/,Ki=/\d\d?/,Qi=/\d{1,3}/,Gi=/\d{1,4}/,Zi=/[+-]?\d{1,6}/,Ji=/\d+/,Xi=/[+-]?\d+/,tn=/Z|[+-]\d\d:?\d\d/gi,en=/[+-]?\d+(\.\d{1,3})?/,nn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,sn={},rn={},on=0,an=1,ln=2,cn=3,dn=4,hn=5,un=6;I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),I("MMMM",0,0,function(t){return this.localeData().months(this,t)}),$("month","M"),z("M",Ki),z("MM",Ki,Wi),z("MMM",nn),z("MMMM",nn),U(["M","MM"],function(t,e){e[an]=g(t)-1}),U(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[an]=s:c(i).invalidMonth=t});var pn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mn={};t.suppressDeprecationWarnings=!1;var gn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],bn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],yn=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),$("year","y"),z("Y",Xi),z("YY",Ki,Wi),z("YYYY",Gi,ji),z("YYYYY",Zi,Vi),z("YYYYYY",Zi,Vi),U(["YYYYY","YYYYYY"],on),U("YYYY",function(e,i){i[on]=2===e.length?t.parseTwoDigitYear(e):g(e)}),U("YY",function(e,i){i[on]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return g(t)+(g(t)>68?1900:2e3)};var kn=E("FullYear",!1);I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),$("week","w"),$("isoWeek","W"),z("w",Ki),z("ww",Ki,Wi),z("W",Ki),z("WW",Ki,Wi),q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=g(t)});var wn={dow:0,doy:6};I("DDD",["DDDD",3],"DDDo","dayOfYear"),$("dayOfYear","DDD"),z("DDD",Qi),z("DDDD",Yi),U(["DDD","DDDD"],function(t,e,i){i._dayOfYear=g(t)}),t.ISO_8601=function(){};var xn=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return this>t?this:t}),Cn=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Dt.apply(null,arguments);return t>this?this:t});Pt("Z",":"),Pt("ZZ",""),z("Z",tn),z("ZZ",tn),U(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Lt(t)});var Tn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var $n=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,_n=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Gt.fn=It.prototype;var Sn=te(1,"add"),En=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Dn=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),De("gggg","weekYear"),De("ggggg","weekYear"),De("GGGG","isoWeekYear"),De("GGGGG","isoWeekYear"),$("weekYear","gg"),$("isoWeekYear","GG"),z("G",Xi),z("g",Xi),z("GG",Ki,Wi),z("gg",Ki,Wi),z("GGGG",Gi,ji),z("gggg",Gi,ji),z("GGGGG",Zi,Vi),z("ggggg",Zi,Vi),q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=g(t)}),q(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)}),I("Q",0,0,"quarter"),$("quarter","Q"),z("Q",qi),U("Q",function(t,e){e[an]=3*(g(t)-1)}),I("D",["DD",2],"Do","date"),$("date","D"),z("D",Ki),z("DD",Ki,Wi),z("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),U(["D","DD"],ln),U("Do",function(t,e){e[ln]=g(t.match(Ki)[0],10)});var An=E("Date",!0);I("d",0,"do","day"),I("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),I("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),I("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),$("day","d"),$("weekday","e"),$("isoWeekday","E"),z("d",Ki),z("e",Ki),z("E",Ki),z("dd",nn),z("ddd",nn),z("dddd",nn),q(["dd","ddd","dddd"],function(t,e,i){var n=i._locale.weekdaysParse(t);null!=n?e.d=n:c(i).invalidWeekday=t}),q(["d","e","E"],function(t,e,i,n){e[n]=g(t)});var Fn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),In="Su_Mo_Tu_We_Th_Fr_Sa".split("_");I("H",["HH",2],0,"hour"),I("h",["hh",2],0,function(){return this.hours()%12||12}),We("a",!0),We("A",!1),$("hour","h"),z("a",Ye),z("A",Ye),z("H",Ki),z("h",Ki),z("HH",Ki,Wi),z("hh",Ki,Wi),U(["H","HH"],cn),U(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),U(["h","hh"],function(t,e,i){e[cn]=g(t),c(i).bigHour=!0});var On=/[ap]\.?m?\.?/i,Pn=E("Hours",!0);I("m",["mm",2],0,"minute"),$("minute","m"),z("m",Ki),z("mm",Ki,Wi),U(["m","mm"],dn);var Ln=E("Minutes",!1);I("s",["ss",2],0,"second"),$("second","s"),z("s",Ki),z("ss",Ki,Wi),U(["s","ss"],hn);var Rn=E("Seconds",!1);I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),$("millisecond","ms"),z("S",Qi,qi),z("SS",Qi,Wi),z("SSS",Qi,Yi);var Nn;for(Nn="SSSS";Nn.length<=9;Nn+="S")z(Nn,Ji);for(Nn="S";Nn.length<=9;Nn+="S")U(Nn,Ke);var zn=E("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var Bn=p.prototype;Bn.add=Sn,Bn.calendar=ie,Bn.clone=ne,Bn.diff=le,Bn.endOf=ke,Bn.format=ue,Bn.from=pe,Bn.fromNow=fe,Bn.to=me,Bn.toNow=ge,Bn.get=F,Bn.invalidAt=Ee,Bn.isAfter=se,Bn.isBefore=re,Bn.isBetween=oe,Bn.isSame=ae,Bn.isValid=_e,Bn.lang=Dn,Bn.locale=ve,Bn.localeData=be,Bn.max=Cn,Bn.min=xn,Bn.parsingFlags=Se,Bn.set=F,Bn.startOf=ye,Bn.subtract=En,Bn.toArray=Te,Bn.toObject=$e,Bn.toDate=Ce,Bn.toISOString=he,Bn.toJSON=he,Bn.toString=de,Bn.unix=xe,Bn.valueOf=we,Bn.year=kn,Bn.isLeapYear=lt,Bn.weekYear=Fe,Bn.isoWeekYear=Me,Bn.quarter=Bn.quarters=Pe,Bn.month=G,Bn.daysInMonth=Z,Bn.week=Bn.weeks=pt,Bn.isoWeek=Bn.isoWeeks=ft,Bn.weeksInYear=Oe,Bn.isoWeeksInYear=Ie,Bn.date=An,Bn.day=Bn.days=He,Bn.weekday=Ue,Bn.isoWeekday=qe,Bn.dayOfYear=gt,Bn.hour=Bn.hours=Pn,Bn.minute=Bn.minutes=Ln,Bn.second=Bn.seconds=Rn,Bn.millisecond=Bn.milliseconds=zn,Bn.utcOffset=zt,Bn.utc=Ht,Bn.local=Ut,Bn.parseZone=qt,Bn.hasAlignedHourOffset=Wt,Bn.isDST=Yt,Bn.isDSTShifted=jt,Bn.isLocal=Vt,Bn.isUtcOffset=Kt,Bn.isUtc=Qt,Bn.isUTC=Qt,Bn.zoneAbbr=Qe,Bn.zoneName=Ge,Bn.dates=tt("dates accessor is deprecated. Use date instead.",An),Bn.months=tt("months accessor is deprecated. Use month instead",G),Bn.years=tt("years accessor is deprecated. Use year instead",kn),Bn.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Bt);var Hn=Bn,Un={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},qn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Wn="Invalid date",Yn="%d",jn=/\d{1,2}/,Vn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Kn=b.prototype;Kn._calendar=Un,Kn.calendar=Xe,Kn._longDateFormat=qn,Kn.longDateFormat=ti,Kn._invalidDate=Wn,Kn.invalidDate=ei,Kn._ordinal=Yn,Kn.ordinal=ii,Kn._ordinalParse=jn,Kn.preparse=ni,Kn.postformat=ni,Kn._relativeTime=Vn,Kn.relativeTime=si,Kn.pastFuture=ri,Kn.set=oi,Kn.months=j,Kn._months=pn,Kn.monthsShort=V,Kn._monthsShort=fn,Kn.monthsParse=K,Kn.week=dt,Kn._week=wn,Kn.firstDayOfYear=ut,Kn.firstDayOfWeek=ht,Kn.weekdays=Re,Kn._weekdays=Fn,Kn.weekdaysMin=ze,Kn._weekdaysMin=In,Kn.weekdaysShort=Ne,Kn._weekdaysShort=Mn,Kn.weekdaysParse=Be,Kn.isPM=je,Kn._meridiemParse=On,Kn.meridiem=Ve,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",x),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",T);var Qn=Math.abs,Gn=Ti("ms"),Zn=Ti("s"),Jn=Ti("m"),Xn=Ti("h"),ts=Ti("d"),es=Ti("w"),is=Ti("M"),ns=Ti("y"),ss=_i("milliseconds"),rs=_i("seconds"),os=_i("minutes"),as=_i("hours"),ls=_i("days"),cs=_i("months"),ds=_i("years"),hs=Math.round,us={s:45,m:45,h:22,d:26,M:11},ps=Math.abs,fs=It.prototype;fs.abs=fi,fs.add=gi,fs.subtract=vi,fs.as=xi,fs.asMilliseconds=Gn,fs.asSeconds=Zn,fs.asMinutes=Jn,fs.asHours=Xn,fs.asDays=ts,fs.asWeeks=es,fs.asMonths=is,fs.asYears=ns,fs.valueOf=Ci,fs._bubble=yi,fs.get=$i,fs.milliseconds=ss,fs.seconds=rs,fs.minutes=os,fs.hours=as,fs.days=ls,fs.weeks=Si,fs.months=cs,fs.years=ds,fs.humanize=Fi,fs.toISOString=Mi,fs.toString=Mi,fs.toJSON=Mi,fs.locale=ve,fs.localeData=be,fs.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mi),fs.lang=Dn,I("X",0,0,"unix"),I("x",0,0,"valueOf"),z("x",Xi),z("X",en),U("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),U("x",function(t,e,i){i._d=new Date(g(t))}),t.version="2.10.6",e(Dt),t.fn=Hn,t.min=Ft,t.max=Mt,t.utc=a,t.unix=Ze,t.months=ci,t.isDate=n,t.locale=x,t.invalid=h,t.duration=Gt,t.isMoment=f,t.weekdays=hi,t.parseZone=Je,t.localeData=T,t.isDuration=Ot,t.monthsShort=di,t.weekdaysMin=pi,t.defineLocale=C,t.weekdaysShort=ui,t.normalizeUnits=_,t.relativeTimeThreshold=Ai;var ms=t;return ms}),!function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var s,r,o,a,l,c,d,h={},u=!0,p=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],b=["top","bottom","auto"],y=["left","right","auto"],k=["default","top","bottom"],w={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},x={},C=function(t){var i,s,r,o,a,l=!1;return void 0!==e.tz&&void 0!==n.timeZone&&null!==n.timeZone&&""!==n.timeZone&&(l=!0),void 0===t||null===t?i=l?e().tz(n.timeZone).startOf("d"):e().startOf("d"):l?(s=e().tz(n.timeZone).utcOffset(),r=e(t,c,n.useStrict).utcOffset(),r!==s?(o=e().tz(n.timeZone).format("Z"),a=e(t,c,n.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+o,i=e(a,c,n.useStrict).tz(n.timeZone)):i=e(t,c,n.useStrict).tz(n.timeZone)):i=e(t,c,n.useStrict),i},T=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},$=function(){return T("h")||T("m")||T("s")},_=function(){return T("y")||T("M")||T("d")},S=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(n.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(n.icons.next)))),i=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-decades").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone()))]},E=function(){var e=t("<tr>"),i=t("<tr>"),s=t("<tr>");return T("h")&&(e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(n.icons.down))))),T("m")&&(T("h")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),s.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(n.icons.down))))),
T("s")&&(T("m")&&(e.append(t("<td>").addClass("separator")),i.append(t("<td>").addClass("separator").html(":")),s.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(n.icons.up)))),i.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds"))),s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(n.icons.down))))),a||(e.append(t("<td>").addClass("separator")),i.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod}))),s.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,i,s]))},D=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),s=[E()];return T("h")&&s.push(e),T("m")&&s.push(i),T("s")&&s.push(n),s},A=function(){var e=[];return n.showTodayButton&&e.push(t("<td>").append(t("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(t("<span>").addClass(n.icons.today)))),!n.sideBySide&&_()&&$()&&e.push(t("<td>").append(t("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(t("<span>").addClass(n.icons.time)))),n.showClear&&e.push(t("<td>").append(t("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(t("<span>").addClass(n.icons.clear)))),n.showClose&&e.push(t("<td>").append(t("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(t("<span>").addClass(n.icons.close)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},F=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=t("<div>").addClass("datepicker").append(S()),s=t("<div>").addClass("timepicker").append(D()),r=t("<ul>").addClass("list-unstyled"),o=t("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(A());return n.inline&&e.removeClass("dropdown-menu"),a&&e.addClass("usetwentyfour"),T("s")&&!a&&e.addClass("wider"),n.sideBySide&&_()&&$()?(e.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&e.append(o),e.append(t("<div>").addClass("row").append(i.addClass("col-md-6")).append(s.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&e.append(o),e):("top"===n.toolbarPlacement&&r.append(o),_()&&r.append(t("<li>").addClass(n.collapse&&$()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&r.append(o),$()&&r.append(t("<li>").addClass(n.collapse&&_()?"collapse":"").append(s)),"bottom"===n.toolbarPlacement&&r.append(o),e.append(r))},M=function(){var e,s={};return e=i.is("input")||n.inline?i.data():i.find("input").data(),e.dateOptions&&e.dateOptions instanceof Object&&(s=t.extend(!0,s,e.dateOptions)),t.each(n,function(t){var i="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[i]&&(s[t]=e[i])}),s},I=function(){var e,s=(p||i).position(),r=(p||i).offset(),o=n.widgetPositioning.vertical,a=n.widgetPositioning.horizontal;if(n.widgetParent)e=n.widgetParent.append(f);else if(i.is("input"))e=i.after(f).parent();else{if(n.inline)return void(e=i.append(f));e=i,i.children().first().after(f)}if("auto"===o&&(o=r.top+1.5*f.height()>=t(window).height()+t(window).scrollTop()&&f.height()+i.outerHeight()<r.top?"top":"bottom"),"auto"===a&&(a=e.width()<r.left+f.outerWidth()/2&&r.left+f.outerWidth()>t(window).width()?"right":"left"),"top"===o?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===a?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==e.css("position")&&(e=e.parents().filter(function(){return"relative"===t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===o?"auto":s.top+i.outerHeight(),bottom:"top"===o?s.top+i.outerHeight():"auto",left:"left"===a?e===i?0:s.left:"auto",right:"left"===a?"auto":e.outerWidth()-i.outerWidth()-(e===i?0:s.left)})},O=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||i.trigger(t)},P=function(t){"y"===t&&(t="YYYY"),O({type:"dp.update",change:t,viewDate:r.clone()})},L=function(t){f&&(t&&(d=Math.max(m,Math.min(3,d+t))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[d].clsName).show())},R=function(){var e=t("<tr>"),i=r.clone().startOf("w").startOf("d");for(n.calendarWeeks===!0&&e.append(t("<th>").addClass("cw").text("#"));i.isBefore(r.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");f.find(".datepicker-days thead").append(e)},N=function(t){return n.disabledDates[t.format("YYYY-MM-DD")]===!0},z=function(t){return n.enabledDates[t.format("YYYY-MM-DD")]===!0},B=function(t){return n.disabledHours[t.format("H")]===!0},H=function(t){return n.enabledHours[t.format("H")]===!0},U=function(e,i){if(!e.isValid())return!1;if(n.disabledDates&&"d"===i&&N(e))return!1;if(n.enabledDates&&"d"===i&&!z(e))return!1;if(n.minDate&&e.isBefore(n.minDate,i))return!1;if(n.maxDate&&e.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&-1!==n.daysOfWeekDisabled.indexOf(e.day()))return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&B(e))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!H(e))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var s=!1;if(t.each(n.disabledTimeIntervals,function(){return e.isBetween(this[0],this[1])?(s=!0,!1):void 0}),s)return!1}return!0},q=function(){for(var e=[],i=r.clone().startOf("y").startOf("d");i.isSame(r,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");f.find(".datepicker-months td").empty().append(e)},W=function(){var e=f.find(".datepicker-months"),i=e.find("th"),o=e.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),e.find(".disabled").removeClass("disabled"),U(r.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(r.year()),U(r.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),o.removeClass("active"),s.isSame(r,"y")&&!u&&o.eq(s.month()).addClass("active"),o.each(function(e){U(r.clone().month(e),"M")||t(this).addClass("disabled")})},Y=function(){var t=f.find(".datepicker-years"),e=t.find("th"),i=r.clone().subtract(5,"y"),o=r.clone().add(6,"y"),a="";for(e.eq(0).find("span").attr("title",n.tooltips.prevDecade),e.eq(1).attr("title",n.tooltips.selectDecade),e.eq(2).find("span").attr("title",n.tooltips.nextDecade),t.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(i.year()+"-"+o.year()),n.maxDate&&n.maxDate.isBefore(o,"y")&&e.eq(2).addClass("disabled");!i.isAfter(o,"y");)a+='<span data-action="selectYear" class="year'+(i.isSame(s,"y")&&!u?" active":"")+(U(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");t.find("td").html(a)},j=function(){var t=f.find(".datepicker-decades"),i=t.find("th"),o=e({y:r.year()-r.year()%100-1}),a=o.clone().add(100,"y"),l=o.clone(),c="";for(i.eq(0).find("span").attr("title",n.tooltips.prevCentury),i.eq(2).find("span").attr("title",n.tooltips.nextCentury),t.find(".disabled").removeClass("disabled"),(o.isSame(e({y:1900}))||n.minDate&&n.minDate.isAfter(o,"y"))&&i.eq(0).addClass("disabled"),i.eq(1).text(o.year()+"-"+a.year()),(o.isSame(e({y:2e3}))||n.maxDate&&n.maxDate.isBefore(a,"y"))&&i.eq(2).addClass("disabled");!o.isAfter(a,"y");)c+='<span data-action="selectDecade" class="decade'+(o.isSame(s,"y")?" active":"")+(U(o,"y")?"":" disabled")+'" data-selection="'+(o.year()+6)+'">'+(o.year()+1)+" - "+(o.year()+12)+"</span>",o.add(12,"y");c+="<span></span><span></span><span></span>",t.find("td").html(c),i.eq(1).text(l.year()+1+"-"+o.year())},V=function(){var e,i,o,a,l=f.find(".datepicker-days"),c=l.find("th"),d=[];if(_()){for(c.eq(0).find("span").attr("title",n.tooltips.prevMonth),c.eq(1).attr("title",n.tooltips.selectMonth),c.eq(2).find("span").attr("title",n.tooltips.nextMonth),l.find(".disabled").removeClass("disabled"),c.eq(1).text(r.format(n.dayViewHeaderFormat)),U(r.clone().subtract(1,"M"),"M")||c.eq(0).addClass("disabled"),U(r.clone().add(1,"M"),"M")||c.eq(2).addClass("disabled"),e=r.clone().startOf("M").startOf("w").startOf("d"),a=0;42>a;a++)0===e.weekday()&&(i=t("<tr>"),n.calendarWeeks&&i.append('<td class="cw">'+e.week()+"</td>"),d.push(i)),o="",e.isBefore(r,"M")&&(o+=" old"),e.isAfter(r,"M")&&(o+=" new"),e.isSame(s,"d")&&!u&&(o+=" active"),U(e,"d")||(o+=" disabled"),e.isSame(C(),"d")&&(o+=" today"),(0===e.day()||6===e.day())&&(o+=" weekend"),i.append('<td data-action="selectDay" data-day="'+e.format("L")+'" class="day'+o+'">'+e.date()+"</td>"),e.add(1,"d");l.find("tbody").empty().append(d),W(),Y(),j()}},K=function(){var e=f.find(".timepicker-hours table"),i=r.clone().startOf("d"),n=[],s=t("<tr>");for(r.hour()>11&&!a&&i.hour(12);i.isSame(r,"d")&&(a||r.hour()<12&&i.hour()<12||r.hour()>11);)i.hour()%4===0&&(s=t("<tr>"),n.push(s)),s.append('<td data-action="selectHour" class="hour'+(U(i,"h")?"":" disabled")+'">'+i.format(a?"HH":"hh")+"</td>"),i.add(1,"h");e.empty().append(n)},Q=function(){for(var e=f.find(".timepicker-minutes table"),i=r.clone().startOf("h"),s=[],o=t("<tr>"),a=1===n.stepping?5:n.stepping;r.isSame(i,"h");)i.minute()%(4*a)===0&&(o=t("<tr>"),s.push(o)),o.append('<td data-action="selectMinute" class="minute'+(U(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(a,"m");e.empty().append(s)},G=function(){for(var e=f.find(".timepicker-seconds table"),i=r.clone().startOf("m"),n=[],s=t("<tr>");r.isSame(i,"m");)i.second()%20===0&&(s=t("<tr>"),n.push(s)),s.append('<td data-action="selectSecond" class="second'+(U(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");e.empty().append(n)},Z=function(){var t,e,i=f.find(".timepicker span[data-time-component]");a||(t=f.find(".timepicker [data-action=togglePeriod]"),e=s.clone().add(s.hours()>=12?-12:12,"h"),t.text(s.format("A")),U(e,"h")?t.removeClass("disabled"):t.addClass("disabled")),i.filter("[data-time-component=hours]").text(s.format(a?"HH":"hh")),i.filter("[data-time-component=minutes]").text(s.format("mm")),i.filter("[data-time-component=seconds]").text(s.format("ss")),K(),Q(),G()},J=function(){f&&(V(),Z())},X=function(t){var e=u?null:s;return t?(t=t.clone().locale(n.locale),1!==n.stepping&&t.minutes(Math.round(t.minutes()/n.stepping)*n.stepping%60).seconds(0),void(U(t)?(s=t,r=s.clone(),o.val(s.format(l)),i.data("date",s.format(l)),u=!1,J(),O({type:"dp.change",date:s.clone(),oldDate:e})):(n.keepInvalid||o.val(u?"":s.format(l)),O({type:"dp.error",date:t})))):(u=!0,o.val(""),i.data("date",""),O({type:"dp.change",date:!1,oldDate:e}),void J())},tt=function(){var e=!1;return f?(f.find(".collapse").each(function(){var i=t(this).data("collapse");return i&&i.transitioning?(e=!0,!1):!0}),e?h:(p&&p.hasClass("btn")&&p.toggleClass("active"),f.hide(),t(window).off("resize",I),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,O({type:"dp.hide",date:s.clone()}),o.blur(),h)):h},et=function(){X(null)},it={next:function(){var t=g[d].navFnc;r.add(g[d].navStep,t),V(),P(t)},previous:function(){var t=g[d].navFnc;r.subtract(g[d].navStep,t),V(),P(t)},pickerSwitch:function(){L(1)},selectMonth:function(e){var i=t(e.target).closest("tbody").find("span").index(t(e.target));r.month(i),d===m?(X(s.clone().year(r.year()).month(r.month())),n.inline||tt()):(L(-1),V()),P("M")},selectYear:function(e){var i=parseInt(t(e.target).text(),10)||0;r.year(i),d===m?(X(s.clone().year(r.year())),n.inline||tt()):(L(-1),V()),P("YYYY")},selectDecade:function(e){var i=parseInt(t(e.target).data("selection"),10)||0;r.year(i),d===m?(X(s.clone().year(r.year())),n.inline||tt()):(L(-1),V()),P("YYYY")},selectDay:function(e){var i=r.clone();t(e.target).is(".old")&&i.subtract(1,"M"),t(e.target).is(".new")&&i.add(1,"M"),X(i.date(parseInt(t(e.target).text(),10))),$()||n.keepOpen||n.inline||tt()},incrementHours:function(){var t=s.clone().add(1,"h");U(t,"h")&&X(t)},incrementMinutes:function(){var t=s.clone().add(n.stepping,"m");U(t,"m")&&X(t)},incrementSeconds:function(){var t=s.clone().add(1,"s");U(t,"s")&&X(t)},decrementHours:function(){var t=s.clone().subtract(1,"h");U(t,"h")&&X(t)},decrementMinutes:function(){var t=s.clone().subtract(n.stepping,"m");U(t,"m")&&X(t)},decrementSeconds:function(){var t=s.clone().subtract(1,"s");U(t,"s")&&X(t)},togglePeriod:function(){X(s.clone().add(s.hours()>=12?-12:12,"h"))},togglePicker:function(e){var i,s=t(e.target),r=s.closest("ul"),o=r.find(".in"),a=r.find(".collapse:not(.in)");if(o&&o.length){if(i=o.data("collapse"),i&&i.transitioning)return;o.collapse?(o.collapse("hide"),a.collapse("show")):(o.removeClass("in"),a.addClass("in")),s.is("span")?s.toggleClass(n.icons.time+" "+n.icons.date):s.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=parseInt(t(e.target).text(),10);a||(s.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),X(s.clone().hours(i)),it.showPicker.call(h)},selectMinute:function(e){X(s.clone().minutes(parseInt(t(e.target).text(),10))),it.showPicker.call(h)},selectSecond:function(e){X(s.clone().seconds(parseInt(t(e.target).text(),10))),it.showPicker.call(h)},clear:et,today:function(){var t=C();U(t,"d")&&X(t)},close:tt},nt=function(e){return t(e.currentTarget).is(".disabled")?!1:(it[t(e.currentTarget).data("action")].apply(h,arguments),!1)},st=function(){var e,i={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return o.prop("disabled")||!n.ignoreReadonly&&o.prop("readonly")||f?h:(void 0!==o.val()&&0!==o.val().trim().length?X(ot(o.val().trim())):n.useCurrent&&u&&(o.is("input")&&0===o.val().trim().length||n.inline)&&(e=C(),"string"==typeof n.useCurrent&&(e=i[n.useCurrent](e)),X(e)),f=F(),R(),q(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),J(),L(),t(window).on("resize",I),f.on("click","[data-action]",nt),f.on("mousedown",!1),p&&p.hasClass("btn")&&p.toggleClass("active"),f.show(),I(),n.focusOnShow&&!o.is(":focus")&&o.focus(),O({type:"dp.show"}),h)},rt=function(){return f?tt():st()},ot=function(t){return t=void 0===n.parseInputDate?e.isMoment(t)||t instanceof Date?e(t):C(t):n.parseInputDate(t),t.locale(n.locale),t},at=function(t){var e,i,s,r,o=null,a=[],l={},c=t.which,d="p";x[c]=d;for(e in x)x.hasOwnProperty(e)&&x[e]===d&&(a.push(e),parseInt(e,10)!==c&&(l[e]=!0));for(e in n.keyBinds)if(n.keyBinds.hasOwnProperty(e)&&"function"==typeof n.keyBinds[e]&&(s=e.split(" "),s.length===a.length&&w[c]===s[s.length-1])){for(r=!0,i=s.length-2;i>=0;i--)if(!(w[s[i]]in l)){r=!1;break}if(r){o=n.keyBinds[e];break}}o&&(o.call(h,f),t.stopPropagation(),t.preventDefault())},lt=function(t){x[t.which]="r",t.stopPropagation(),t.preventDefault()},ct=function(e){var i=t(e.target).val().trim(),n=i?ot(i):null;return X(n),e.stopImmediatePropagation(),!1},dt=function(){o.on({change:ct,blur:n.debug?"":tt,keydown:at,keyup:lt,focus:n.allowInputToggle?st:""}),i.is("input")?o.on({focus:st}):p&&(p.on("click",rt),p.on("mousedown",!1))},ht=function(){o.off({change:ct,blur:blur,keydown:at,keyup:lt,focus:n.allowInputToggle?tt:""}),i.is("input")?o.off({focus:st}):p&&(p.off("click",rt),p.off("mousedown",!1))},ut=function(e){var i={};return t.each(e,function(){var t=ot(this);t.isValid()&&(i[t.format("YYYY-MM-DD")]=!0)}),Object.keys(i).length?i:!1},pt=function(e){var i={};return t.each(e,function(){i[this]=!0}),Object.keys(i).length?i:!1},ft=function(){var t=n.format||"L LT";l=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){var e=s.localeData().longDateFormat(t)||t;return e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return s.localeData().longDateFormat(t)||t})}),c=n.extraFormats?n.extraFormats.slice():[],c.indexOf(t)<0&&c.indexOf(l)<0&&c.push(l),a=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,T("y")&&(m=2),T("M")&&(m=1),T("d")&&(m=0),d=Math.max(m,d),u||X(s)};if(h.destroy=function(){tt(),ht(),i.removeData("DateTimePicker"),i.removeData("date")},h.toggle=rt,h.show=st,h.hide=tt,h.disable=function(){return tt(),p&&p.hasClass("btn")&&p.addClass("disabled"),o.prop("disabled",!0),h},h.enable=function(){return p&&p.hasClass("btn")&&p.removeClass("disabled"),o.prop("disabled",!1),h},h.ignoreReadonly=function(t){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=t,h},h.options=function(e){if(0===arguments.length)return t.extend(!0,{},n);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,n,e),t.each(n,function(t,e){if(void 0===h[t])throw new TypeError("option "+t+" is not recognized!");h[t](e)}),h},h.date=function(t){if(0===arguments.length)return u?null:s.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return X(null===t?null:ot(t)),h},h.format=function(t){if(0===arguments.length)return n.format;if("string"!=typeof t&&("boolean"!=typeof t||t!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return n.format=t,l&&ft(),h},h.timeZone=function(t){return 0===arguments.length?n.timeZone:(n.timeZone=t,h)},h.dayViewHeaderFormat=function(t){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=t,h},h.extraFormats=function(t){if(0===arguments.length)return n.extraFormats;if(t!==!1&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=t,c&&ft(),h},h.disabledDates=function(e){if(0===arguments.length)return n.disabledDates?t.extend({},n.disabledDates):n.disabledDates;if(!e)return n.disabledDates=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=ut(e),n.enabledDates=!1,J(),h},h.enabledDates=function(e){if(0===arguments.length)return n.enabledDates?t.extend({},n.enabledDates):n.enabledDates;if(!e)return n.enabledDates=!1,J(),h;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=ut(e),n.disabledDates=!1,J(),h},h.daysOfWeekDisabled=function(t){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof t&&!t)return n.daysOfWeekDisabled=!1,J(),h;if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=t.reduce(function(t,e){return e=parseInt(e,10),e>6||0>e||isNaN(e)?t:(-1===t.indexOf(e)&&t.push(e),t)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var e=0;!U(s,"d");){if(s.add(1,"d"),7===e)throw"Tried 7 times to find a valid date";e++}X(s)}return J(),h},h.maxDate=function(t){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof t&&t===!1)return n.maxDate=!1,J(),h;"string"==typeof t&&("now"===t||"moment"===t)&&(t=C());var e=ot(t);if(!e.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(n.minDate&&e.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(l));return n.maxDate=e,n.useCurrent&&!n.keepInvalid&&s.isAfter(t)&&X(n.maxDate),r.isAfter(e)&&(r=e.clone().subtract(n.stepping,"m")),J(),h},h.minDate=function(t){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof t&&t===!1)return n.minDate=!1,J(),h;"string"==typeof t&&("now"===t||"moment"===t)&&(t=C());var e=ot(t);if(!e.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(n.maxDate&&e.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(l));return n.minDate=e,n.useCurrent&&!n.keepInvalid&&s.isBefore(t)&&X(n.minDate),r.isBefore(e)&&(r=e.clone().add(n.stepping,"m")),J(),h},h.defaultDate=function(t){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!t)return n.defaultDate=!1,h;"string"==typeof t&&("now"===t||"moment"===t)&&(t=C());var e=ot(t);if(!e.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!U(e))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=e,(n.defaultDate&&n.inline||""===o.val().trim())&&X(n.defaultDate),h},h.locale=function(t){if(0===arguments.length)return n.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return n.locale=t,s.locale(n.locale),r.locale(n.locale),l&&ft(),f&&(tt(),st()),h},h.stepping=function(t){return 0===arguments.length?n.stepping:(t=parseInt(t,10),(isNaN(t)||1>t)&&(t=1),n.stepping=t,h)},h.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return n.useCurrent=t,h},h.collapse=function(t){if(0===arguments.length)return n.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===t?h:(n.collapse=t,f&&(tt(),st()),h)},h.icons=function(e){if(0===arguments.length)return t.extend({},n.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(n.icons,e),f&&(tt(),st()),h},h.tooltips=function(e){if(0===arguments.length)return t.extend({},n.tooltips);if(!(e instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return t.extend(n.tooltips,e),f&&(tt(),st()),h},h.useStrict=function(t){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=t,h},h.sideBySide=function(t){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=t,f&&(tt(),st()),h},h.viewMode=function(t){if(0===arguments.length)return n.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return n.viewMode=t,d=Math.max(v.indexOf(t),m),L(),h},h.toolbarPlacement=function(t){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===k.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+k.join(", ")+") value");return n.toolbarPlacement=t,f&&(tt(),st()),h},h.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===y.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+y.join(", ")+")");n.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===b.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+b.join(", ")+")");n.widgetPositioning.vertical=e.vertical}return J(),h},h.calendarWeeks=function(t){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=t,J(),h},h.showTodayButton=function(t){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=t,f&&(tt(),st()),h},h.showClear=function(t){if(0===arguments.length)return n.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=t,f&&(tt(),st()),h},h.widgetParent=function(e){if(0===arguments.length)return n.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof t))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=e,f&&(tt(),st()),h},h.keepOpen=function(t){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=t,h},h.focusOnShow=function(t){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof t)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=t,h},h.inline=function(t){if(0===arguments.length)return n.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return n.inline=t,h},h.clear=function(){return et(),h},h.keyBinds=function(t){return n.keyBinds=t,h},h.getMoment=function(t){return C(t)},h.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return n.debug=t,h},h.allowInputToggle=function(t){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof t)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=t,h},h.showClose=function(t){if(0===arguments.length)return n.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=t,h},h.keepInvalid=function(t){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=t,h},h.datepickerInput=function(t){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=t,h},h.parseInputDate=function(t){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof t)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=t,h},h.disabledTimeIntervals=function(e){if(0===arguments.length)return n.disabledTimeIntervals?t.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!e)return n.disabledTimeIntervals=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=e,J(),h},h.disabledHours=function(e){if(0===arguments.length)return n.disabledHours?t.extend({},n.disabledHours):n.disabledHours;if(!e)return n.disabledHours=!1,J(),h;if(!(e instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=pt(e),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!U(s,"h");){if(s.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}X(s)}return J(),h},h.enabledHours=function(e){if(0===arguments.length)return n.enabledHours?t.extend({},n.enabledHours):n.enabledHours;if(!e)return n.enabledHours=!1,J(),h;if(!(e instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=pt(e),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!U(s,"h");){if(s.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}X(s)}return J(),h},h.viewDate=function(t){if(0===arguments.length)return r.clone();if(!t)return r=s.clone(),h;if(!("string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return r=ot(t),P(),h},i.is("input"))o=i;else if(o=i.find(n.datepickerInput),0===o.size())o=i.find("input");else if(!o.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(p=0===i.find(".datepickerbutton").size()?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!o.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return s=C(),r=s.clone(),t.extend(!0,n,M()),h.options(n),ft(),dt(),o.prop("disabled")&&h.disable(),o.is("input")&&0!==o.val().trim().length?X(ot(o.val().trim())):n.defaultDate&&void 0===o.attr("placeholder")&&X(n.defaultDate),n.inline&&st(),h};t.fn.datetimepicker=function(e){return this.each(function(){var n=t(this);n.data("DateTimePicker")||(e=t.extend(!0,{},t.fn.datetimepicker.defaults,e),n.data("DateTimePicker",i(n,e)))})},t.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(7,"d")):this.date(e.clone().add(this.stepping(),"m"))}},down:function(t){if(!t)return void this.show();var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(7,"d")):this.date(e.clone().subtract(this.stepping(),"m"));
},"control up":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().subtract(1,"y")):this.date(e.clone().add(1,"h"))}},"control down":function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")?this.date(e.clone().add(1,"y")):this.date(e.clone().subtract(1,"h"))}},left:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"d"))}},right:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var e=this.date()||this.getMoment();t.find(".datepicker").is(":visible")&&this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),function(t){"use strict";function e(t,i){return new e.prototype.init(t,i)}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;return function(){return e.apply(t)}});var i=0,n=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,s=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/;t.fn.redactor=function(i){var n=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof i?this.each(function(){var e,r=t.data(this,"redactor");if("-1"!=i.search(/\./)?(e=i.split("."),"undefined"!=typeof r[e[0]]&&(e=r[e[0]][e[1]])):e=r[i],"undefined"!=typeof r&&t.isFunction(e)){var o=e.apply(r,s);void 0!==o&&o!==r&&n.push(o)}else t.error('No such method "'+i+'" for Redactor')}):this.each(function(){t.data(this,"redactor",{}),t.data(this,"redactor",e(this,i))}),0===n.length?this:1===n.length?n[0]:n},t.Redactor=e,t.Redactor.VERSION="10.0.9",t.Redactor.modules=["alignment","autosave","block","buffer","build","button","caret","clean","code","core","dropdown","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","list","modal","observe","paragraphize","paste","placeholder","progress","selection","shortcuts","tabifier","tidy","toolbar","upload","utils"],t.Redactor.opts={lang:"en",direction:"ltr",plugins:!1,focus:!1,focusEnd:!1,placeholder:!1,visual:!0,tabindex:!1,minHeight:!1,maxHeight:!1,linebreaks:!1,replaceDivs:!0,paragraphize:!0,cleanStyleOnEnter:!1,enterKey:!0,cleanOnPaste:!0,cleanSpaces:!0,pastePlainText:!1,autosave:!1,autosaveName:!1,autosaveInterval:60,autosaveOnChange:!1,autosaveFields:!1,linkTooltip:!0,linkProtocol:"http",linkNofollow:!1,linkSize:50,imageEditable:!0,imageLink:!0,imagePosition:!0,imageFloatMargin:"10px",imageResizable:!0,imageUpload:null,imageUploadParam:"file",uploadImageField:!1,dragImageUpload:!0,fileUpload:null,fileUploadParam:"file",dragFileUpload:!0,s3:!1,convertLinks:!0,convertUrlLinks:!0,convertImageLinks:!0,convertVideoLinks:!0,preSpaces:4,tabAsSpaces:!1,tabKey:!0,scrollTarget:!1,toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,source:!0,buttons:["html","formatting","bold","italic","deleted","unorderedlist","orderedlist","outdent","indent","image","file","link","alignment","horizontalrule"],buttonsHide:[],buttonsHideOnMobile:[],formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6","sup","sub","small"],formattingAdd:!1,tabifier:!0,deniedTags:["script","style"],allowedTags:!1,removeComments:!1,replaceTags:[["strike","del"]],replaceStyles:[["font-weight:\\s?bold","strong"],["font-style:\\s?italic","em"],["text-decoration:\\s?underline","u"],["text-decoration:\\s?line-through","del"]],removeDataAttr:!1,removeAttr:!1,allowedAttr:!1,removeWithoutAttr:["span"],removeEmpty:["p"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,buffer:[],rebuffer:[],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",imageTypes:["image/png","image/jpeg","image/gif"],indentValue:20,verifiedTags:["a","img","b","strong","sub","sup","i","em","u","small","strike","del","cite","ul","ol","li"],inlineTags:["strong","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],alignmentTags:["P","H1","H2","H3","H4","H5","H6","DL","DT","DD","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],blockLevelElements:["PRE","UL","OL","LI"],langs:{en:{html:"HTML/Markdown",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",center:"Center",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code or Youtube/Vimeo Link",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit",upload_label:"Drop file here or "}}},e.fn=t.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(e,n){if(this.$element=t(e),this.uuid=i++,this.rtePaste=!1,this.$pasteBox=!1,this.loadOptions(n),this.loadModules(),this.formatting={},t.merge(this.opts.blockLevelElements,this.opts.alignmentTags),this.reIsBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.tidy.setupAllowed(),this.opts.deniedTags!==!1)for(var s=["html","head","link","body","meta","applet"],r=0;r<s.length;r++)this.opts.deniedTags.push(s[r]);this.lang.load(),t.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.core.setCallback("start"),this.start=!0,this.build.run()},loadOptions:function(e){this.opts=t.extend({},t.extend(!0,{},t.Redactor.opts),this.$element.data(),e)},getModuleMethods:function(t){return Object.getOwnPropertyNames(t).filter(function(e){return"function"==typeof t[e]})},loadModules:function(){for(var e=t.Redactor.modules.length,i=0;e>i;i++)this.bindModuleMethods(t.Redactor.modules[i])},bindModuleMethods:function(t){if("undefined"!=typeof this[t]){this[t]=this[t]();for(var e=this.getModuleMethods(this[t]),i=e.length,n=0;i>n;n++)this[t][e[n]]=this[t][e[n]].bind(this)}},alignment:function(){return{left:function(){this.alignment.set("")},right:function(){this.alignment.set("right")},center:function(){this.alignment.set("center")},justify:function(){this.alignment.set("justify")},set:function(t){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save(),this.alignment.blocks=this.selection.getBlocks(),this.alignment.type=t,this.alignment.isLinebreaksOrNoBlocks()?this.alignment.setText():this.alignment.setBlocks(),this.selection.restore(),this.code.sync()},setText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor").css("text-align",this.alignment.type)},setBlocks:function(){t.each(this.alignment.blocks,t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e);i&&(this.alignment.isNeedReplaceElement(i)?this.alignment.replaceElement(i):this.alignment.alignElement(i))},this))},isLinebreaksOrNoBlocks:function(){return this.opts.linebreaks&&this.alignment.blocks[0]===!1},isNeedReplaceElement:function(t){return""===this.alignment.type&&"undefined"!=typeof t.data("tagblock")},replaceElement:function(t){t.replaceWith(t.html())},alignElement:function(t){t.css("text-align",this.alignment.type),this.utils.removeEmptyAttr(t,"style")}}},autosave:function(){return{enable:function(){this.opts.autosave&&(this.autosave.html=!1,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"),this.opts.autosaveOnChange||(this.autosaveInterval=setInterval(this.autosave.load,1e3*this.opts.autosaveInterval)))},onChange:function(){this.opts.autosaveOnChange&&this.autosave.load()},load:function(){if(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source&&!this.utils.isEmpty(this.autosave.source)){var e={};e.name=this.autosave.name,e[this.autosave.name]=this.autosave.source,e=this.autosave.getHiddenFields(e);var i=t.ajax({url:this.opts.autosave,type:"post",data:e});i.done(this.autosave.success)}},getHiddenFields:function(e){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?e:(t.each(this.opts.autosaveFields,t.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),e[i]=n},this)),e)},success:function(e){var i;try{i=t.parseJSON(e)}catch(n){i=e}var s="undefined"==typeof i.error?"autosave":"autosaveError";this.core.setCallback(s,this.autosave.name,i),this.autosave.html=this.autosave.source},disable:function(){clearInterval(this.autosaveInterval)}}},block:function(){return{formatting:function(t){this.block.clearStyle=!1;var e,i;"undefined"!=typeof this.formatting[t].data?e="data":"undefined"!=typeof this.formatting[t].attr?e="attr":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),"undefined"!=typeof this.formatting[t].clear&&(this.block.clearStyle=!0),e&&(i=this.formatting[t][e]),this.block.format(this.formatting[t].tag,e,i)},format:function(e,i,n){"quote"==e&&(e="blockquote");var s=["p","pre","blockquote","h1","h2","h3","h4","h5","h6","sup","sub","small"];-1!=t.inArray(e,s)&&(this.block.isRemoveInline="pre"==e||-1!=e.search(/h[1-6]/i),this.utils.browser("msie")||this.$editor.focus(),this.block.blocks=this.selection.getBlocks(),this.block.blocksSize=this.block.blocks.length,this.block.type=i,this.block.value=n,this.buffer.set(),this.selection.save(),this.block.set(e),this.selection.restore(),this.code.sync())},set:function(t){this.selection.get(),this.block.containerTag=this.range.commonAncestorContainer.tagName,this.range.collapsed?this.block.setCollapsed(t):this.block.setMultiple(t)},setCollapsed:function(e){var i=this.block.blocks[0];if(i!==!1){if("LI"==i.tagName){if("blockquote"!=e)return;return void this.block.formatListToBlockquote()}var n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(n&&!this.opts.linebreaks)document.execCommand("formatblock",!1,"<"+e+">"),i=this.selection.getBlock(),this.block.toggle(t(i));else if(i.tagName.toLowerCase()!=e)if(this.opts.linebreaks&&"p"==e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,e);this.block.toggle(s),"p"!=e&&"blockquote"!=e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==e||this.block.headTag)&&s.find("p").contents().unwrap(),this.block.formatTableWrapping(s)}else if("blockquote"==e&&i.tagName.toLowerCase()==e)if(this.opts.linebreaks)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var r=this.utils.replaceToTag(i,"p");this.block.toggle(r)}else i.tagName.toLowerCase()==e&&this.block.toggle(t(i));"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&t(i).removeAttr("class").removeAttr("style")}},setMultiple:function(e){var i=this.block.blocks[0],n="TD"==this.block.containerTag||"TH"==this.block.containerTag;if(i!==!1&&1===this.block.blocksSize)if(i.tagName.toLowerCase()==e&&"blockquote"==e)if(this.opts.linebreaks)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else{var s=this.utils.replaceToTag(i,"p");this.block.toggle(s)}else if("LI"==i.tagName){if("blockquote"!=e)return;this.block.formatListToBlockquote()}else if("BLOCKQUOTE"==this.block.containerTag)this.block.formatBlockquote(e);else if(this.opts.linebreaks&&(n||this.range.commonAncestorContainer!=i))this.block.formatWrap(e);else if(this.opts.linebreaks&&"p"==e)t(i).prepend("<br>").append("<br>"),this.utils.replaceWithContents(i);else if("TD"===i.tagName)this.block.formatWrap(e);else{var r=this.utils.replaceToTag(i,e);this.block.toggle(r),this.block.isRemoveInline&&this.utils.removeInlineTags(r),("p"==e||this.block.headTag)&&r.find("p").contents().unwrap()}else if(this.opts.linebreaks||"p"!=e){if("blockquote"==e){for(var o=0,a=0;a<this.block.blocksSize;a++)"BLOCKQUOTE"==this.block.blocks[a].tagName&&o++;if(o==this.block.blocksSize)return void t.each(this.block.blocks,t.proxy(function(e,i){var n=!1;this.opts.linebreaks?(t(i).prepend("<br>").append("<br>"),n=this.utils.replaceWithContents(i)):n=this.utils.replaceToTag(i,"p"),n&&"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&n.removeAttr("class").removeAttr("style")},this))}this.block.formatWrap(e)}else{var l=0,c=!1;"class"==this.block.type&&(c="toggle",l=t(this.block.blocks).filter("."+this.block.value).length,this.block.blocksSize==l?c="toggle":this.block.blocksSize>l?c="set":0===l&&(c="set"));var d=["ul","ol","li","td","th","dl","dt","dd"];t.each(this.block.blocks,t.proxy(function(i,n){if(-1==t.inArray(n.tagName.toLowerCase(),d)){var s=this.utils.replaceToTag(n,e);c?"toggle"==c?this.block.toggle(s):"remove"==c?this.block.remove(s):"set"==c&&this.block.setForce(s):this.block.toggle(s),"p"!=e&&"blockquote"!=e&&s.find("img").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(s),("p"==e||this.block.headTag)&&s.find("p").contents().unwrap(),"undefined"==typeof this.block.type&&"undefined"==typeof this.block.value&&s.removeAttr("class").removeAttr("style")}},this))}},setForce:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.addClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void t.attr(this.block.value.name,this.block.value.value):void 0},toggle:function(t){return this.block.clearStyle&&t.removeAttr("class").removeAttr("style"),"class"==this.block.type?void t.toggleClass(this.block.value):"attr"==this.block.type||"data"==this.block.type?void(t.attr(this.block.value.name)==this.block.value.value?t.removeAttr(this.block.value.name):t.attr(this.block.value.name,this.block.value.value)):void t.removeAttr("style class")},remove:function(t){t.removeClass(this.block.value)},formatListToBlockquote:function(){var e=t(this.block.blocks[0]).closest("ul, ol");t(e).find("ul, ol").contents().unwrap(),t(e).find("li").append(t("<br>")).contents().unwrap();var i=this.utils.replaceToTag(e,"blockquote");this.block.toggle(i)},formatBlockquote:function(e){document.execCommand("outdent"),document.execCommand("formatblock",!1,e),this.clean.clearUnverified(),this.$editor.find("p:empty").remove();var i=this.selection.getBlock();"p"!=e&&t(i).find("img").remove(),this.opts.linebreaks||this.block.toggle(t(i)),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(i)},formatWrap:function(e){if("UL"==this.block.containerTag||"OL"==this.block.containerTag){if("blockquote"!=e)return;this.block.formatListToBlockquote()}var i=this.selection.wrap(e);if(i!==!1){var n=t(i);this.block.formatTableWrapping(n);var s=n.find(this.opts.blockLevelElements.join(",")+", td, table, thead, tbody, tfoot, th, tr");(this.opts.linebreaks&&"p"==e||"pre"==e||"blockquote"==e)&&s.append("<br />"),s.contents().unwrap(),"p"!=e&&"blockquote"!=e&&n.find("img").remove(),t.each(this.block.blocks,t.proxy(this.utils.removeEmpty,this)),n.append(this.selection.getMarker(2)),this.opts.linebreaks||this.block.toggle(n),this.$editor.find("ul, ol, tr, blockquote, p").each(t.proxy(this.utils.removeEmpty,this)),n.find("blockquote:empty").remove(),this.block.isRemoveInline&&this.utils.removeInlineTags(n),this.opts.linebreaks&&"p"==e&&this.utils.replaceWithContents(n)}},formatTableWrapping:function(t){0!==t.closest("table").length&&(0===t.closest("tr").length&&t.wrap("<tr>"),0===t.closest("td").length&&0===t.closest("th").length&&t.wrap("<td>"))},removeData:function(e,i){var n=this.selection.getBlocks();t(n).removeAttr("data-"+e),this.code.sync()},setData:function(e,i){var n=this.selection.getBlocks();t(n).attr("data-"+e,i),this.code.sync()},toggleData:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr("data-"+e)?t(this).removeAttr("data-"+e):t(this).attr("data-"+e,i)})},removeAttr:function(e,i){var n=this.selection.getBlocks();t(n).removeAttr(e),this.code.sync()},setAttr:function(e,i){var n=this.selection.getBlocks();t(n).attr(e,i),this.code.sync()},toggleAttr:function(e,i){var n=this.selection.getBlocks();t.each(n,function(){t(this).attr(name)?t(this).removeAttr(name):t(this).attr(name,i)})},removeClass:function(e){var i=this.selection.getBlocks();t(i).removeClass(e),this.utils.removeEmptyAttr(i,"class"),this.code.sync()},setClass:function(e){var i=this.selection.getBlocks();t(i).addClass(e),this.code.sync()},toggleClass:function(e){var i=this.selection.getBlocks();t(i).toggleClass(e),this.code.sync()}}},buffer:function(){return{set:function(t){"undefined"==typeof t||"undo"==t?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){this.selection.save(),this.opts.buffer.push(this.$editor.html()),this.selection.restore()},setRedo:function(){this.selection.save(),this.opts.rebuffer.push(this.$editor.html()),this.selection.restore()},getUndo:function(){this.$editor.html(this.opts.buffer.pop())},getRedo:function(){this.$editor.html(this.opts.rebuffer.pop())},add:function(){this.opts.buffer.push(this.$editor.html())},undo:function(){0!==this.opts.buffer.length&&(this.buffer.set("redo"),this.buffer.getUndo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))},redo:function(){0!==this.opts.rebuffer.length&&(this.buffer.set("undo"),this.buffer.getRedo(),this.selection.restore(),setTimeout(t.proxy(this.observe.load,this),50))}}},build:function(){return{run:function(){this.build.createContainerBox(),this.build.loadContent(),this.build.loadEditor(),this.build.enableEditor(),this.build.setCodeAndCall()},isTextarea:function(){return"TEXTAREA"===this.$element[0].tagName},createContainerBox:function(){this.$box=t('<div class="redactor-box" />')},createTextarea:function(){this.$textarea=t("<textarea />").attr("name",this.build.getTextareaName())},getTextareaName:function(){return"undefined"==typeof name?"content-"+this.uuid:this.$element.attr("id")},loadContent:function(){var e=this.build.isTextarea()?"val":"html";this.content=t.trim(this.$element[e]())},enableEditor:function(){this.$editor.attr({contenteditable:!0,dir:this.opts.direction})},loadEditor:function(){var t=this.build.isTextarea()?"fromTextarea":"fromElement";this.build[t]()},fromTextarea:function(){this.$editor=t("<div />"),this.$textarea=this.$element,this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-editor"),this.$element.hide()},fromElement:function(){this.$editor=this.$element,this.build.createTextarea(),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$textarea),this.$editor.addClass("redactor-editor"),this.$textarea.hide()},setCodeAndCall:function(){this.code.set(this.content),this.build.setOptions(),this.build.callEditor(),this.opts.visual||setTimeout(t.proxy(this.code.showCode,this),200)},callEditor:function(){this.build.disableMozillaEditing(),this.build.setEvents(),this.build.setHelpers(),this.opts.toolbar&&(this.opts.toolbar=this.toolbar.init(),this.toolbar.build()),this.modal.loadTemplates(),this.build.plugins(),setTimeout(t.proxy(this.observe.load,this),4),this.core.setCallback("init")},setOptions:function(){t(this.$textarea).attr("dir",this.opts.direction),this.opts.linebreaks&&this.$editor.addClass("redactor-linebreaks"),this.opts.tabindex&&this.$editor.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&this.$editor.css("minHeight",this.opts.minHeight),this.opts.maxHeight&&this.$editor.css("maxHeight",this.opts.maxHeight)},setEventDropUpload:function(t){if(t.preventDefault(),this.opts.dragImageUpload&&this.opts.dragFileUpload){var e=t.dataTransfer.files;this.upload.directUpload(e[0],t)}},setEventDrop:function(t){this.code.sync(),setTimeout(this.clean.clearUnverified,1),this.core.setCallback("drop",t)},setEvents:function(){this.$editor.on("drop.redactor",t.proxy(function(t){return t=t.originalEvent||t,void 0!==window.FormData&&t.dataTransfer?0===t.dataTransfer.files.length?this.build.setEventDrop(t):(this.build.setEventDropUpload(t),setTimeout(this.clean.clearUnverified,1),void this.core.setCallback("drop",t)):!0},this)),this.$editor.on("click.redactor",t.proxy(function(t){var e=this.core.getEvent(),i="click"==e||"arrow"==e?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.setCallback("click",t)},this)),this.$editor.on("paste.redactor",t.proxy(this.paste.init,this)),this.$editor.on("keydown.redactor",t.proxy(this.keydown.init,this)),this.$editor.on("keyup.redactor",t.proxy(this.keyup.init,this)),t.isFunction(this.opts.codeKeydownCallback)&&this.$textarea.on("keydown.redactor-textarea",t.proxy(this.opts.codeKeydownCallback,this)),t.isFunction(this.opts.codeKeyupCallback)&&this.$textarea.on("keyup.redactor-textarea",t.proxy(this.opts.codeKeyupCallback,this)),t.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",t.proxy(this.opts.focusCallback,this));var e;t(document).on("mousedown",function(t){e=t.target}),this.$editor.on("blur.redactor",t.proxy(function(i){this.rtePaste||this.build.isBlured(e)&&(this.utils.disableSelectAll(),t.isFunction(this.opts.blurCallback)&&this.core.setCallback("blur",i))},this))},isBlured:function(e){var i=t(e);return!i.hasClass("redactor-toolbar, redactor-dropdown")&&!i.is("#redactor-modal")&&0===i.parents(".redactor-toolbar, .redactor-dropdown, #redactor-modal").length},setHelpers:function(){this.autosave.enable(),this.placeholder.enable(),this.opts.focus&&setTimeout(this.focus.setStart,100),this.opts.focusEnd&&setTimeout(this.focus.setEnd,100)},plugins:function(){this.opts.plugins&&RedactorPlugins&&t.each(this.opts.plugins,t.proxy(function(e,i){if("undefined"!=typeof RedactorPlugins[i]){if(-1!==t.inArray(i,t.Redactor.modules))return void t.error('Plugin name "'+i+"\" matches the name of the Redactor's module.");if(t.isFunction(RedactorPlugins[i])){this[i]=RedactorPlugins[i]();for(var n=this.getModuleMethods(this[i]),s=n.length,r=0;s>r;r++)this[i][n[r]]=this[i][n[r]].bind(this);t.isFunction(this[i].init)&&this[i].init()}}},this))},disableMozillaEditing:function(){if(this.utils.browser("mozilla"))try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)}catch(t){}}}},button:function(){return{build:function(e,i){var n=t('<a href="#" class="re-icon re-'+e+'" rel="'+e+'" />').attr("tabindex","-1");if((i.func||i.command||i.dropdown)&&this.button.setEvent(n,e,i),i.dropdown){var s=t('<div class="redactor-dropdown redactor-dropdown-'+ +this.uuid+" redactor-dropdown-box-"+e+'" style="display: none;">');n.data("dropdown",s),this.dropdown.build(e,s,i.dropdown)}return this.utils.isDesktop()&&this.button.createTooltip(n,e,i.title),n},setEvent:function(e,i,n){e.on("touchstart click",t.proxy(function(t){if(e.hasClass("redactor-button-disabled"))return!1;var s="func",r=n.func;n.command?(s="command",r=n.command):n.dropdown&&(s="dropdown",r=!1),this.button.onClick(t,i,s,r)},this))},createTooltip:function(e,i,n){var s=t("<span>").addClass("redactor-toolbar-tooltip redactor-toolbar-tooltip-"+i).hide().html(n);s.appendTo("body"),e.on("mouseover",function(){if(!t(this).hasClass("redactor-button-disabled")){var i=e.offset();s.show(),s.css({top:i.top+e.innerHeight()+"px",left:i.left+e.innerWidth()/2-s.innerWidth()/2+"px"})}}),e.on("mouseout",function(){s.hide()})},onClick:function(t,e,i,n){this.button.caretOffset=this.caret.getOffset(),t.preventDefault(),this.utils.browser("msie")&&(t.returnValue=!1),"command"==i?this.inline.format(n):"dropdown"==i?this.dropdown.show(t,e):this.button.onClickCallback(t,n,e)},onClickCallback:function(e,i,n){var s;if(t.isFunction(i))i.call(this,n);else if("-1"!=i.search(/\./)){if(s=i.split("."),"undefined"==typeof this[s[0]])return;this[s[0]][s[1]](n)}else this[i](n);this.observe.buttons(e,n)},get:function(t){return this.$toolbar.find("a.re-"+t)},setActive:function(t){this.button.get(t).addClass("redactor-act")},setInactive:function(t){this.button.get(t).removeClass("redactor-act")},setInactiveAll:function(t){"undefined"==typeof t?this.$toolbar.find("a.re-icon").removeClass("redactor-act"):this.$toolbar.find("a.re-icon").not(".re-"+t).removeClass("redactor-act")},setActiveInVisual:function(){this.$toolbar.find("a.re-icon").not("a.re-html").removeClass("redactor-button-disabled")},setInactiveInCode:function(){this.$toolbar.find("a.re-icon").not("a.re-html").addClass("redactor-button-disabled")},changeIcon:function(t,e){this.button.get(t).addClass("re-"+e)},removeIcon:function(t,e){this.button.get(t).removeClass("re-"+e)},setAwesome:function(t,e){var i=this.button.get(t);i.removeClass("redactor-btn-image").addClass("fa-redactor-btn"),i.html('<i class="fa '+e+'"></i>')},addCallback:function(e,i){var n="dropdown"==i?"dropdown":"func",s=e.attr("rel");e.on("touchstart click",t.proxy(function(t){return e.hasClass("redactor-button-disabled")?!1:void this.button.onClick(t,s,n,i)},this))},addDropdown:function(e,i){var n=e.attr("rel");this.button.addCallback(e,"dropdown");var s=t('<div class="redactor-dropdown redactor-dropdown-'+ +this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return e.data("dropdown",s),i&&this.dropdown.build(n,s,i),s},add:function(e,i){if(this.opts.toolbar){var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.append(t("<li>").append(n)),n}},addFirst:function(e,i){if(this.opts.toolbar){var n=this.button.build(e,{title:i});return n.addClass("redactor-btn-image"),this.$toolbar.prepend(t("<li>").append(n)),n}},addAfter:function(e,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var r=this.button.get(e);return 0!==r.length?r.parent().after(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},addBefore:function(e,i,n){if(this.opts.toolbar){var s=this.button.build(i,{title:n});s.addClass("redactor-btn-image");var r=this.button.get(e);return 0!==r.length?r.parent().before(t("<li>").append(s)):this.$toolbar.append(t("<li>").append(s)),s}},remove:function(t){this.button.get(t).remove()}}},caret:function(){return{setStart:function(e){if(this.utils.isBlock(e))this.caret.set(e,0,e,0);else{var i=this.utils.createSpaceElement();t(e).prepend(i),this.caret.setEnd(i)}},setEnd:function(t){this.caret.set(t,1,t,1)},set:function(e,i,n,s){if(e=e[0]||e,n=n[0]||n,this.utils.isBlockTag(e.tagName)&&""===e.innerHTML&&(e.innerHTML=this.opts.invisibleSpace),"BR"==e.tagName&&this.opts.linebreaks===!1){var r=t(this.opts.emptyHtml)[0];t(e).replaceWith(r),e=r,n=e}this.selection.get();try{this.range.setStart(e,i),this.range.setEnd(n,s)}catch(o){}this.selection.addRange()},setAfter:function(e){try{var i=t(e)[0].tagName;if("BR"==i||this.utils.isBlock(e))"BR"!=i&&this.utils.browser("msie")?this.caret.setStart(t(e).next()):this.caret.setAfterOrBefore(e,"after");else{var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}}catch(s){var n=this.utils.createSpaceElement();t(e).after(n),this.caret.setEnd(n)}},setBefore:function(e){this.utils.isBlock(e)?this.caret.setEnd(t(e).prev()):this.caret.setAfterOrBefore(e,"before")},setAfterOrBefore:function(t,e){if(this.utils.browser("msie")||this.$editor.focus(),t=t[0]||t,this.selection.get(),"after"==e)try{this.range.setStartAfter(t),this.range.setEndAfter(t)}catch(i){}else try{this.range.setStartBefore(t),this.range.setEndBefore(t)}catch(i){}this.range.collapse(!1),this.selection.addRange()},getOffsetOfElement:function(e){e=e[0]||e,this.selection.get();var i=this.range.cloneRange();return i.selectNodeContents(e),i.setEnd(this.range.endContainer,this.range.endOffset),t.trim(i.toString()).length},getOffset:function(){var t=0,e=window.getSelection();if(e.rangeCount>0){var i=window.getSelection().getRangeAt(0),n=i.cloneRange();n.selectNodeContents(this.$editor[0]),n.setEnd(i.endContainer,i.endOffset),t=n.toString().length}return t},setOffset:function(t,e){"undefined"==typeof e&&(e=t),this.focus.isFocused()||this.focus.setStart();for(var i,n=(this.selection.get(),0),s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);i=s.nextNode();)if(n+=i.nodeValue.length,n>t&&(this.range.setStart(i,i.nodeValue.length+t-n),t=1/0),n>=e){this.range.setEnd(i,i.nodeValue.length+e-n);break}this.range.collapse(!1),this.selection.addRange()},setToPoint:function(t,e){this.caret.setOffset(t,e)},getCoords:function(){return this.caret.getOffset()}}},clean:function(){return{onSet:function(e){e=this.clean.savePreCode(e),e=e.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" style="display: none;" $1>$2</pre>'),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<a href="(.*?[^>]?)(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.saveFormTags(e);var i=t("<div>");i.html(e);var n=i.find("font[style]");return 0!==n.length&&(n.replaceWith(function(){var e=t(this),i=t("<span>").attr("style",e.attr("style"));return i.append(e.contents())}),e=i.html()),i.remove(),e=e.replace(/<font(.*?[^<])>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.setVerified(e),e=this.clean.convertInline(e)},onSync:function(e){if(e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&#x200b;/gi,""),this.opts.cleanSpaces&&(e=e.replace(/&nbsp;/gi," ")),-1!=e.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";e=e.replace(/<pre class="redactor-script-tag" style="display: none;"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>"),e=this.clean.restoreFormTags(e);var i={"":"&trade;","":"&copy;","":"&hellip;","":"&mdash;","":"&dash;"};return t.each(i,function(t,i){e=e.replace(new RegExp(t,"g"),i)}),e=e.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),e=e.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),e=e.replace(new RegExp('<div(.*?[^>]) data-tagblock="redactor"(.*?[^>])>',"gi"),"<div$1$2>"),
e=e.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),e=e.replace(new RegExp('<span(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<span$1$3>"),e=e.replace(new RegExp('<img(.*?[^>])srel="(.*?[^>])"(.*?[^>])>',"gi"),"<img$1$3>"),e=e.replace(new RegExp('<img(.*?[^>])sstyle="" (.*?[^>])>',"gi"),"<img$1 $2>"),e=e.replace(new RegExp("<img(.*?[^>])sstyle (.*?[^>])>","gi"),"<img$1 $2>"),e=e.replace(new RegExp('<span class="redactor-invisible-space">(.*?)</span>',"gi"),"$1"),e=e.replace(/ data-save-url="(.*?[^>])"/gi,""),e=e.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),e=e.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),e=e.replace(/<font(.*?[^<])>/gi,""),e=e.replace(/<\/font>/gi,""),e=this.tidy.load(e),this.opts.linkNofollow&&(e=e.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),e=e.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">')),e=e.replace(/\sdata-redactor-(tag|class|style)="(.*?[^>])"/gi,""),e=e.replace(new RegExp('<(.*?) data-verified="redactor"(.*?[^>])>',"gi"),"<$1$2>"),e=e.replace(new RegExp('<(.*?) data-verified="redactor">',"gi"),"<$1>")},onPaste:function(e,i){if(e=t.trim(e),e=e.replace(/\$/g,"&#36;"),e=e.replace(/<span class="s1">/gi,"<span>"),e=e.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),e=e.replace(/<span class="Apple-tab-span"[^>]*>\t<\/span>/gi,"	"),e=e.replace(/<span[^>]*>(\s|&nbsp;)<\/span>/gi," "),this.opts.pastePlainText)return this.clean.getPlainText(e);if(!this.utils.isSelectAll()&&"undefined"==typeof i){if(this.utils.isCurrentOrParent(["FIGCAPTION","A"]))return this.clean.getPlainText(e,!1);if(this.utils.isCurrentOrParent("PRE"))return e=e.replace(//g,'"'),e=e.replace(//g,'"'),e=e.replace(//g,"'"),e=e.replace(//g,"'"),this.clean.getPreCode(e);if(this.utils.isCurrentOrParent(["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"])){if(e=this.clean.getOnlyImages(e),!this.utils.browser("msie")){var n=this.selection.getBlock();n&&"P"==n.tagName&&(e=e.replace(/<img(.*?)>/gi,"<p><img$1></p>"))}return e}if(this.utils.isCurrentOrParent(["TD"]))return e=this.clean.onPasteTidy(e,"td"),this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),e=this.clean.replaceDivsToBr(e);if(this.utils.isCurrentOrParent(["LI"]))return this.clean.onPasteTidy(e,"li")}return e=this.clean.isSingleLine(e,i),this.clean.singleLine||(this.opts.linebreaks&&(e=this.clean.replaceParagraphsToBr(e)),this.opts.replaceDivs&&(e=this.clean.replaceDivs(e)),e=this.clean.saveFormTags(e)),e=this.clean.onPasteWord(e),e=this.clean.onPasteExtra(e),e=this.clean.onPasteTidy(e,"all"),!this.clean.singleLine&&this.opts.paragraphize&&(e=this.paragraphize.load(e)),e=this.clean.removeDirtyStyles(e),e=this.clean.onPasteRemoveSpans(e),e=this.clean.onPasteRemoveEmpty(e),e=this.clean.convertInline(e)},onPasteWord:function(t){return t=t.replace(/<!--[\s\S]*?-->/gi,""),t=t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(t)&&(t=this.clean.onPasteIeFixLinks(t),t=t.replace(/<img(.*?)v:shapes=(.*?)>/gi,""),t=t.replace(/src="file\:\/\/(.*?)"/,'src=""'),t=t.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),t=t.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),t=t.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),t=t.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),t=t.replace(//g,""),t=t.replace(/<p class="Mso(.*?)"/gi,"<p"),t=t.replace(/ class=\"(mso[^\"]*)\"/gi,""),t=t.replace(/ class=(mso\w+)/gi,""),t=t.replace(/<o:p(.*?)>([\w\W]*?)<\/o:p>/gi,"$2"),t=t.replace(/\n/g," "),t=t.replace(/<p>\n?<li>/gi,"<li>")),this.opts.cleanSpaces&&(t=t.replace(/(\s|&nbsp;)+/g," ")),t},onPasteExtra:function(t){return t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>/gi,'<span style="font-weight: bold;"><span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-style: italic[^>]*>/gi,'<span style="font-style: italic;">'),t=t.replace(/<span[^>]*font-weight: bold[^>]*>/gi,'<span style="font-weight: bold;">'),t=t.replace(/<span[^>]*text-decoration: underline[^>]*>/gi,'<span style="text-decoration: underline;">'),t=t.replace(/<img>/gi,""),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),t=t.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),t=t.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),t=t.replace(/<\/p>\s<p/gi,"</p><p"),t=t.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),t=t.replace(/<p>([\w\W]*?)<\/p>/gi,"<li>$1</li>"),this.utils.browser("mozilla")&&(t=t.replace(/<br\s?\/?>$/gi,"")),t},onPasteTidy:function(t,e){var i=["span","a","pre","blockquote","small","em","strong","code","kbd","mark","address","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","p","br","video","audio","iframe","embed","param","object","img","table","td","th","tr","tbody","tfoot","thead","h1","h2","h3","h4","h5","h6","sup","sub"],n=!1,s=[["a","*"],["img",["src","alt"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]];"all"==e?(n=["p","span","h1","h2","h3","h4","h5","h6"],s=[["table","class"],["td",["colspan","rowspan"]],["a","*"],["img",["src","alt","data-redactor-inserted-image"]],["span",["class","rel","data-verified"]],["iframe","*"],["video","*"],["audio","*"],["embed","*"],["object","*"],["param","*"],["source","*"]]):"td"==e?i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","ol","ul","li","dl","dt","dd","br","iframe","video","audio","embed","param","object","img","h1","h2","h3","h4","h5","h6"]:"li"==e&&(i=["ul","ol","li","span","a","small","em","strong","code","kbd","mark","cite","var","samp","dfn","sup","sub","b","i","u","del","br","iframe","video","audio","embed","param","object","img"]);var r={deniedTags:!1,allowedTags:i,removeComments:!0,removePhp:!0,removeAttr:!1,allowedAttr:s,removeEmpty:n};return this.opts.deniedTags&&(r.deniedTags=this.opts.deniedTags),this.opts.allowedTags&&(r.allowedTags=this.opts.allowedTags),this.tidy.load(t,r)},onPasteRemoveEmpty:function(t){return t=t.replace(/<(p|h[1-6])>(|\s|\n|\t|<br\s?\/?>)<\/(p|h[1-6])>/gi,""),this.opts.linebreaks||(t=t.replace(/<br>$/i,"")),t},onPasteRemoveSpans:function(t){return t=t.replace(/<span>(.*?)<\/span>/gi,"$1"),t=t.replace(/<span[^>]*>\s|&nbsp;<\/span>/gi," ")},onPasteIeFixLinks:function(e){if(!this.utils.browser("msie"))return e;var i=t.trim(e);return 0===i.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(e=e.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2")),e},isSingleLine:function(t,e){if(this.clean.singleLine=!1,!this.utils.isSelectAll()&&"undefined"==typeof e){var i=this.opts.blockLevelElements.join("|").replace("P|","").replace("DIV|",""),n=t.match(new RegExp("</("+i+")>","gi")),s=t.match(/<\/(p|div)>/gi);if(!n&&(null===s||s&&s.length<=1)){var r=t.match(/<br\s?\/?>/gi),o=t.match(/<img(.*?[^>])>/gi);r||o||(this.clean.singleLine=!0,t=t.replace(/<\/?(p|div)(.*?)>/gi,""))}}return t},stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})},savePreCode:function(t){return t=this.clean.savePreFormatting(t),t=this.clean.saveCodeFormatting(t)},savePreFormatting:function(e){var i=e.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i);n[2]=n[2].replace(/<br\s?\/?>/g,"\n"),n[2]=n[2].replace(/&nbsp;/g," "),this.opts.preSpaces&&(n[2]=n[2].replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<pre"+n[1]+">"+n[2]+"</pre>")},this)),e},saveCodeFormatting:function(e){var i=e.match(/<code(.*?[^>])>(.*?)<\/code>/gi);return null!==i&&t.each(i,t.proxy(function(t,i){var n=i.match(/<code(.*?[^>])>(.*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),e=e.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),e},getTextFromHtml:function(e){e=e.replace(/<br\s?\/?>|<\/H[1-6]>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n");var i=document.createElement("div");return i.innerHTML=e,e=i.textContent||i.innerText,t.trim(e)},getPlainText:function(t,e){return t=this.clean.getTextFromHtml(t),t=t.replace(/\n/g,"<br />"),this.opts.paragraphize&&"undefined"==typeof e&&!this.utils.browser("mozilla")&&(t=this.paragraphize.load(t)),t},getPreCode:function(t){return t=t.replace(/<img(.*?) style="(.*?)"(.*?[^>])>/gi,"<img$1$3>"),t=t.replace(/<img(.*?)>/gi,"&lt;img$1&gt;"),t=this.clean.getTextFromHtml(t),this.opts.preSpaces&&(t=t.replace(/\t/g,Array(this.opts.preSpaces+1).join(" "))),t=this.clean.encodeEntities(t)},getOnlyImages:function(t){return t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<([Ss]*?)>/gi,""),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},getOnlyLinksAndImages:function(t){return t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<img(.*?)>/gi,"[img$1]"),t=t.replace(/<(.*?)>/gi,""),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[img(.*?)\]/gi,"<img$1>")},encodeEntities:function(t){return t=String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},removeDirtyStyles:function(e){if(this.utils.browser("msie"))return e;var i=document.createElement("div");return i.innerHTML=e,this.clean.clearUnverifiedRemove(t(i)),e=i.innerHTML,t(i).remove(),e},clearUnverified:function(){if(!this.utils.browser("msie")){this.clean.clearUnverifiedRemove(this.$editor);var t=this.$editor.find("h1, h2, h3, h4, h5, h6");t.find("span").removeAttr("style"),t.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),this.code.sync()}},clearUnverifiedRemove:function(e){e.find(this.opts.verifiedTags.join(", ")).removeAttr("style"),e.find("span").not('[data-verified="redactor"]').removeAttr("style"),e.find('span[data-verified="redactor"], img[data-verified="redactor"]').each(function(e,i){var n=t(i);n.attr("style",n.attr("rel"))})},setVerified:function(t){if(this.utils.browser("msie"))return t;t=t.replace(new RegExp("<img(.*?[^>])>","gi"),'<img$1 data-verified="redactor">'),t=t.replace(new RegExp("<span(.*?[^>])>","gi"),'<span$1 data-verified="redactor">');var e=t.match(new RegExp('<(span|img)(.*?)style="(.*?)"(.*?[^>])>',"gi"));if(e)for(var i=e.length,n=0;i>n;n++)try{var s=e[n].replace(/style="(.*?)"/i,'style="$1" rel="$1"');t=t.replace(e[n],s)}catch(r){}return t},convertInline:function(e){var i=t("<div />").html(e),n=this.opts.inlineTags;return n.push("span"),i.find(n.join(",")).each(function(){var e=t(this),i=this.tagName.toLowerCase();e.attr("data-redactor-tag",i),"span"==i&&(e.attr("style")?e.attr("data-redactor-style",e.attr("style")):e.attr("class")&&e.attr("data-redactor-class",e.attr("class")))}),e=i.html(),i.remove(),e},normalizeLists:function(){this.$editor.find("li").each(function(e,i){var n=t(i).next();0===n.length||"UL"!=n[0].tagName&&"OL"!=n[0].tagName||t(i).append(n)})},removeSpaces:function(t){return t=t.replace(/\n/g,""),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g," "),t=t.replace(/[\s\n]*$/g," "),t=t.replace(/>\s{2,}</g,"> <"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/[\u200B-\u200D\uFEFF]/g,"")},replaceDivs:function(t){return this.opts.linebreaks?(t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br />"),t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2<br />")):t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>"),t=t.replace(/<div(.*?[^>])>/gi,""),t=t.replace(/<\/div>/gi,"")},replaceDivsToBr:function(t){return t=t.replace(/<div\s(.*?)>/gi,"<p>"),t=t.replace(/<div><br\s?\/?><\/div>/gi,"<br /><br />"),t=t.replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br /><br />")},replaceParagraphsToBr:function(t){return t=t.replace(/<p\s(.*?)>/gi,"<p>"),t=t.replace(/<p><br\s?\/?><\/p>/gi,"<br />"),t=t.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br /><br />"),t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>")},saveFormTags:function(t){return t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(t){return t.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")}}},code:function(){return{set:function(e){e=t.trim(e.toString()),e=this.clean.onSet(e),this.$editor.html(e),this.code.sync(),""!==e&&this.placeholder.remove(),setTimeout(t.proxy(this.buffer.add,this),15),this.start===!1&&this.observe.load()},get:function(){var t=this.$textarea.val();return t=this.tabifier.get(t)},sync:function(){setTimeout(t.proxy(this.code.startSync,this),10)},startSync:function(){var t=this.$editor.html();this.code.syncCode&&this.code.syncCode==t||(this.code.syncCode=t,t=this.core.setCallback("syncBefore",t),t=this.clean.onSync(t),this.$textarea.val(t),this.core.setCallback("sync",t),this.start===!1&&this.core.setCallback("change",t),this.start=!1,this.autosave.onChange())},toggle:function(){this.opts.visual?this.code.showCode():this.code.showVisual()},showCode:function(){this.code.offset=this.caret.getOffset();var e=t(window).scrollTop(),i=this.$editor.innerHeight();this.$editor.hide();var n=this.$textarea.val();this.modified=this.clean.removeSpaces(n),n=this.tabifier.get(n),this.$textarea.val(n).height(i).show().focus(),this.$textarea.on("keydown.redactor-textarea-indenting",this.code.textareaIndenting),t(window).scrollTop(e),this.$textarea[0].setSelectionRange&&this.$textarea[0].setSelectionRange(0,0),this.$textarea[0].scrollTop=0,this.opts.visual=!1,this.button.setInactiveInCode(),this.button.setActive("html"),this.core.setCallback("source",n)},showVisual:function(){if(!this.opts.visual){var t=this.$textarea.hide().val();this.modified!==this.clean.removeSpaces(t)&&this.code.set(t),this.$editor.show(),this.utils.isEmpty(t)||this.placeholder.remove(),this.caret.setOffset(this.code.offset),this.$textarea.off("keydown.redactor-textarea-indenting"),this.button.setActiveInVisual(),this.button.setInactive("html"),this.observe.load(),this.opts.visual=!0,this.core.setCallback("visual",t)}},textareaIndenting:function(t){if(9!==t.keyCode)return!0;var e=this.$textarea,i=e.get(0).selectionStart;return e.val(e.val().substring(0,i)+"	"+e.val().substring(e.get(0).selectionEnd)),e.get(0).selectionStart=e.get(0).selectionEnd=i+1,!1}}},core:function(){return{getObject:function(){return t.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getElement:function(){return this.$element},getTextarea:function(){return this.$textarea},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},addEvent:function(t){this.core.event=t},getEvent:function(){return this.core.event},setCallback:function(e,i,n){var s=this.opts[e+"Callback"];return t.isFunction(s)?"undefined"==typeof n?s.call(this,i):s.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.core.setCallback("destroy"),this.$element.off(".redactor").removeData("redactor"),this.$editor.off(".redactor"),t(document).off("click.redactor-image-delete."+this.uuid),t(document).off("click.redactor-image-resize-hide."+this.uuid),t(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),t("body").off("scroll.redactor."+this.uuid),t(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid),this.$editor.removeClass("redactor-editor redactor-linebreaks redactor-placeholder"),this.$editor.removeAttr("contenteditable");var e=this.code.get();this.$toolbar.find("a").each(function(){var e=t(this);e.data("dropdown")&&(e.data("dropdown").remove(),e.data("dropdown",{}))}),this.build.isTextarea()?(this.$box.after(this.$element),this.$box.remove(),this.$element.val(e).show()):(this.$box.after(this.$editor),this.$box.remove(),this.$element.html(e).show()),this.$pasteBox&&this.$pasteBox.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),t(".redactor-toolbar-tooltip").remove(),clearInterval(this.autosaveInterval)}}},dropdown:function(){return{build:function(e,i,n){"formatting"==e&&this.opts.formattingAdd&&t.each(this.opts.formattingAdd,t.proxy(function(t,e){var i=e.tag;"undefined"!=typeof e["class"]&&(i=i+"-"+e["class"]),e.type=this.utils.isBlockTag(e.tag)?"block":"inline";var s="inline"==e.type?"inline.formatting":"block.formatting";this.opts.linebreaks&&"block"==e.type&&"p"==e.tag||(this.formatting[i]={tag:e.tag,style:e.style,"class":e["class"],attr:e.attr,data:e.data,clear:e.clear},n[i]={func:s,title:e.title})},this)),t.each(n,t.proxy(function(n,s){var r=t('<a href="#" class="redactor-dropdown-'+n+'">'+s.title+"</a>");"formatting"==e&&r.addClass("redactor-formatting-"+n),r.on("click",t.proxy(function(t){t.preventDefault();var e="func",i=s.func;s.command?(e="command",i=s.command):s.dropdown&&(e="dropdown",i=s.dropdown),this.button.onClick(t,n,e,i),this.dropdown.hideAll()},this)),i.append(r)},this))},show:function(e,i){if(!this.opts.visual)return e.preventDefault(),!1;var n=this.button.get(i),s=n.data("dropdown").appendTo(document.body);if(this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),n.hasClass("dropact"))this.dropdown.hideAll();else{this.dropdown.hideAll(),this.core.setCallback("dropdownShow",{dropdown:s,key:i,button:n}),this.button.setActive(i),n.addClass("dropact");var r=n.offset(),o=s.width();r.left+o>t(document).width()&&(r.left=Math.max(0,r.left-o));var a=r.left+"px";if(this.$toolbar.hasClass("toolbar-fixed-box")){var l=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,c="fixed";this.opts.toolbarFixedTarget!==document&&(l=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,c="absolute"),s.css({position:c,left:a,top:l+"px"}).show()}else{var l=n.innerHeight()+r.top+"px";s.css({position:"absolute",left:a,top:l}).show()}this.core.setCallback("dropdownShown",{dropdown:s,key:i,button:n})}t(document).one("click",t.proxy(this.dropdown.hide,this)),this.$editor.one("click",t.proxy(this.dropdown.hide,this));var d=t(document.body),h=d.width();s.on("mouseover",function(){d.addClass("body-redactor-hidden"),d.css("margin-right",d.width()-h+"px")}),s.on("mouseout",function(){d.removeClass("body-redactor-hidden").css("margin-right",0)}),e.stopPropagation()},hideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor-act").removeClass("dropact"),t(document.body).removeClass("body-redactor-hidden").css("margin-right",0),t(".redactor-dropdown-"+this.uuid).hide(),this.core.setCallback("dropdownHide")},hide:function(e){var i=t(e.target);i.hasClass("dropact")||(i.removeClass("dropact"),this.dropdown.hideAll())}}},file:function(){return{show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),this.selection.save(),this.selection.get();var e=this.sel.toString();t("#redactor-filename").val(e),this.modal.show()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("fileUploadError",e);var s;if("string"==typeof e)s=e;else{var r=t("#redactor-filename").val();"undefined"!=typeof r&&""!==r||(r=e.filename),s='<a href="'+e.filelink+'" id="filelink-marker">'+r+"</a>"}if(i){this.selection.removeMarkers();var o=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,o)}else this.modal.close();if(this.selection.restore(),this.buffer.set(),this.insert.htmlWithoutClean(s),"string"!=typeof e){var a=t(this.$editor.find("a#filelink-marker"));0!==a.length?a.removeAttr("id").removeAttr("style"):a=!1,this.core.setCallback("fileUpload",a,e)}}}},focus:function(){return{setStart:function(){this.$editor.focus();var t=this.$editor.children().first();if(0!==t.length&&0!==t[0].length&&"BR"!=t[0].tagName&&3!=t[0].nodeType){if("UL"==t[0].tagName||"OL"==t[0].tagName){var e=t.find("li").first();if(!this.utils.isBlock(e)&&""===e.text())return void this.caret.setStart(e)}return this.opts.linebreaks&&!this.utils.isBlockTag(t[0].tagName)?(this.selection.get(),this.range.setStart(this.$editor[0],0),this.range.setEnd(this.$editor[0],0),void this.selection.addRange()):void this.caret.setStart(t)}},setEnd:function(){if(this.utils.browser("mozilla")||this.utils.browser("msie")){var t=this.$editor.children().last();this.$editor.focus(),this.caret.setEnd(t)}else{this.selection.get();try{this.range.selectNodeContents(this.$editor[0]),this.range.collapse(!1),this.selection.addRange()}catch(e){}}},isFocused:function(){var e=document.getSelection().focusNode;return null===e?!1:this.opts.linebreaks&&t(e.parentNode).hasClass("redactor-linebreaks")?!0:this.utils.isRedactorParent(e.parentNode)?this.$editor.is(":focus"):!1}}},image:function(){return{show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.selection.save(),this.modal.show()},showEdit:function(e){var i=e.closest("a");if(this.modal.load("imageEdit",this.lang.get("edit"),705),this.modal.createCancelButton(),this.image.buttonDelete=this.modal.createDeleteButton(this.lang.get("_delete")),this.image.buttonSave=this.modal.createActionButton(this.lang.get("save")),this.image.buttonDelete.on("click",t.proxy(function(){this.image.remove(e)},this)),this.image.buttonSave.on("click",t.proxy(function(){this.image.update(e)},this)),t("#redactor-image-title").val(e.attr("alt")),e.attr("style").indexOf("width: 100%;")>=0&&t("#redactor-image-full-screen-width").attr("checked",!0),this.opts.imageLink){var n=t("#redactor-image-link");n.attr("href",e.attr("src")),0!==i.length&&(n.val(i.attr("href")),"_blank"==i.attr("target")&&t("#redactor-image-link-blank").prop("checked",!0))}else t(".redactor-image-link-option").hide();if(this.opts.imagePosition){var s="block"==e.css("display")&&"none"==e.css("float")?"center":e.css("float");t("#redactor-image-align").val(s)}else t(".redactor-image-position-option").hide();this.modal.show()},setFloating:function(e){var i=t("#redactor-image-align").val(),n="",s="",r="";switch(i){case"left":n="left",r="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":n="right",r="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":s="block",r="auto"}e.css({"float":n,display:s,margin:r}),e.attr("rel",e.attr("style"))},update:function(e){this.image.hideResize(),this.buffer.set();var i=e.closest("a");e.attr("alt",t("#redactor-image-title").val()),t("#redactor-image-full-screen-width").is(":checked")?e.css({width:"100%",height:"auto"}):e.attr("style",e.attr("style").replace("width: 100%; height: auto;","")),this.image.setFloating(e);var n=t.trim(t("#redactor-image-link").val());if(""!==n){var s="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",r=new RegExp("^(http|ftp|https)://"+s,"i"),o=new RegExp("^"+s,"i");-1==n.search(r)&&0===n.search(o)&&this.opts.linkProtocol&&(n=this.opts.linkProtocol+"://"+n);var a=!!t("#redactor-image-link-blank").prop("checked");if(0===i.length){var l=t('<a href="'+n+'">'+this.utils.getOuterHtml(e)+"</a>");a&&l.attr("target","_blank"),e.replaceWith(l)}else i.attr("href",n),a?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(e));this.modal.close(),this.observe.images(),this.code.sync()},setEditable:function(e){this.opts.imageEditable&&e.on("dragstart",t.proxy(this.image.onDrag,this)),e.on("mousedown",t.proxy(this.image.hideResize,this)),e.on("click.redactor touchstart",t.proxy(function(i){return this.observe.image=e,0!==this.$editor.find("#redactor-image-box").length?!1:(this.image.resizer=this.image.loadEditableControls(e),t(document).on("click.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),this.$editor.on("click.redactor-image-resize-hide."+this.uuid,t.proxy(this.image.hideResize,this)),void(this.opts.imageResizable&&this.image.resizer.on("mousedown.redactor touchstart.redactor",t.proxy(function(t){this.image.setResizable(t,e)},this))))},this))},setResizable:function(t,e){t.preventDefault(),this.image.resizeHandle={x:t.pageX,y:t.pageY,el:e,ratio:e.width()/e.height(),h:e.height()},t=t.originalEvent||t,t.targetTouches&&(this.image.resizeHandle.x=t.targetTouches[0].pageX,this.image.resizeHandle.y=t.targetTouches[0].pageY),this.image.startResize()},startResize:function(){t(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",t.proxy(this.image.moveResize,this)),t(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",t.proxy(this.image.stopResize,this))},moveResize:function(t){t.preventDefault(),t=t.originalEvent||t;var e=this.image.resizeHandle.h;e+=t.targetTouches?t.targetTouches[0].pageY-this.image.resizeHandle.y:t.pageY-this.image.resizeHandle.y;var i=Math.round(e*this.image.resizeHandle.ratio);50>e||100>i||(this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(this.image.resizeHandle.el.width()/this.image.resizeHandle.ratio),this.code.sync())},stopResize:function(){this.handle=!1,t(document).off(".redactor-image-resize"),this.image.hideResize()},onDrag:function(e){return 0!==this.$editor.find("#redactor-image-box").length?(e.preventDefault(),!1):void this.$editor.on("drop.redactor-image-inside-drop",t.proxy(function(){setTimeout(t.proxy(this.image.onDrop,this),1)},this))},onDrop:function(){this.image.fixImageSourceAfterDrop(),this.observe.images(),this.$editor.off("drop.redactor-image-inside-drop"),this.clean.clearUnverified(),this.code.sync()},fixImageSourceAfterDrop:function(){this.$editor.find("img[data-save-url]").each(function(){var e=t(this);e.attr("src",e.attr("data-save-url")),e.removeAttr("data-save-url")})},hideResize:function(e){if(!e||0===t(e.target).closest("#redactor-image-box").length){if(e&&"IMG"==e.target.tagName){var i=t(e.target);i.attr("data-save-url",i.attr("src"))}var n=this.$editor.find("#redactor-image-box");0!==n.length&&(this.opts.imageEditable&&this.image.editter.remove(),t(this.image.resizer).remove(),n.find("img").css({marginTop:n[0].style.marginTop,marginBottom:n[0].style.marginBottom,marginLeft:n[0].style.marginLeft,marginRight:n[0].style.marginRight}),n.css("margin",""),n.find("img").css("opacity",""),n.replaceWith(function(){return t(this).contents()}),t(document).off("click.redactor-image-resize-hide."+this.uuid),this.$editor.off("click.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")),this.code.sync())}},loadResizableControls:function(e,i){if(this.opts.imageResizable&&!this.utils.isMobile()){var n=t('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.utils.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(e),n}return i.append(e),!1},loadEditableControls:function(e){var i=t('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",e.css("float")).attr("contenteditable",!1),"auto"!=e[0].style.margin?(i.css({marginTop:e[0].style.marginTop,marginBottom:e[0].style.marginBottom,marginLeft:e[0].style.marginLeft,marginRight:e[0].style.marginRight}),e.css("margin","")):i.css({display:"block",margin:"auto"}),e.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=t('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",t.proxy(function(){this.image.showEdit(e)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(e,i)},remove:function(e){var i=t(e),n=i.closest("a"),s=i.closest("figure"),r=i.parent();0!==t("#redactor-image-box").length&&(r=t("#redactor-image-box").parent());var o;0!==s.length?(o=s.next(),s.remove()):0!==n.length?(r=n.parent(),n.remove()):i.remove(),t("#redactor-image-box").remove(),0!==s.length?this.caret.setStart(o):this.caret.setStart(r),this.core.setCallback("imageDelete",i[0].src,i),this.modal.close(),this.code.sync()},insert:function(e,i,n){if("undefined"!=typeof e.error)return this.modal.close(),this.selection.restore(),void this.core.setCallback("imageUploadError",e);var s;"string"==typeof e?s=t(e).attr("data-redactor-inserted-image","true"):(s=t("<img>"),s.attr("src",e.filelink).attr("data-redactor-inserted-image","true"));var r=s,o=this.utils.isCurrentOrParent("P");if(o&&(r=t("<blockquote />").append(s)),i){this.selection.removeMarkers();var a=this.selection.getMarker();this.insert.nodeToCaretPositionFromPoint(n,a)}else this.modal.close();this.selection.restore(),this.buffer.set(),this.insert.html(this.utils.getOuterHtml(r),!1);var l=this.$editor.find("img[data-redactor-inserted-image=true]").removeAttr("data-redactor-inserted-image");o?l.parent().contents().unwrap().wrap("<p />"):this.opts.linebreaks&&l.before("<br>").after("<br>"),"string"!=typeof e&&this.core.setCallback("imageUpload",l,e)}}},indent:function(){return{increase:function(){this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.increaseLists():t===!1&&this.opts.linebreaks?this.indent.increaseText():this.indent.increaseBlocks(),this.selection.restore(),this.code.sync()},increaseLists:function(){document.execCommand("indent"),this.indent.fixEmptyIndent(),this.clean.normalizeLists(),this.clean.clearUnverified()},increaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){if("TD"!==e.tagName&&"TH"!==e.tagName){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))+this.opts.indentValue;i.css("margin-left",n+"px")}},this))},increaseText:function(){var e=this.selection.wrap("div");t(e).attr("data-tagblock","redactor"),t(e).css("margin-left",this.opts.indentValue+"px")},decrease:function(){this.buffer.set(),this.selection.save();var t=this.selection.getBlock();t&&"LI"==t.tagName?this.indent.decreaseLists():this.indent.decreaseBlocks(),this.selection.restore(),this.code.sync()},decreaseLists:function(){document.execCommand("outdent");var e=this.selection.getCurrent(),i=t(e).closest("li"),n=i.parent();0!==i.length&&0!==n.length&&"LI"==n[0].tagName&&n.after(i),this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote, p").each(t.proxy(this.utils.removeEmpty,this))),this.clean.clearUnverified()},decreaseBlocks:function(){t.each(this.selection.getBlocks(),t.proxy(function(t,e){var i=this.utils.getAlignmentElement(e),n=this.utils.normalize(i.css("margin-left"))-this.opts.indentValue;0>=n?this.opts.linebreaks&&"undefined"!=typeof i.data("tagblock")?i.replaceWith(i.html()+"<br />"):(i.css("margin-left",""),this.utils.removeEmptyAttr(i,"style")):i.css("margin-left",n+"px")},this))},fixEmptyIndent:function(){var e=this.selection.getBlock();if(this.range.collapsed&&e&&"LI"==e.tagName&&this.utils.isEmpty(t(e).text())){var i=t(e);i.find("span").not(".redactor-selection-marker").contents().unwrap(),i.append("<br>")}}}},inline:function(){return{formatting:function(t){var e,i;"undefined"!=typeof this.formatting[t].style?e="style":"undefined"!=typeof this.formatting[t]["class"]&&(e="class"),
e&&(i=this.formatting[t][e]),this.inline.format(this.formatting[t].tag,e,i)},format:function(t,e,i){if(!this.utils.isCurrentOrParent("PRE")&&!this.utils.isCurrentOrParentHeader()){for(var n=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],s=["strong","strong","em","em","u","del","del","sup","sub"],r=0;r<n.length;r++)t==n[r]&&(t=s[r]);this.inline.type=e||!1,this.inline.value=i||!1,this.buffer.set(),this.utils.browser("msie")||this.$editor.focus(),this.selection.get(),this.range.collapsed?this.inline.formatCollapsed(t):this.inline.formatMultiple(t)}},formatCollapsed:function(e){var i=this.selection.getCurrent(),n=t(i).closest(e+"[data-redactor-tag="+e+"]");if(0!==n.length&&"style"!=this.inline.type&&"SPAN"!=n[0].tagName)return void(this.utils.isEmpty(n.text())?(this.caret.setAfter(n[0]),n.remove(),this.code.sync()):this.utils.isEndOfElement(n)&&this.caret.setAfter(n[0]));var s=t("<"+e+">").attr("data-verified","redactor").attr("data-redactor-tag",e);s.html(this.opts.invisibleSpace),s=this.inline.setFormat(s);var s=this.insert.node(s);this.caret.setEnd(s),this.code.sync()},formatMultiple:function(e){if(this.inline.formatConvert(e),this.selection.save(),document.execCommand("strikethrough"),this.$editor.find("strike").each(t.proxy(function(i,n){var s=t(n);this.inline.formatRemoveSameChildren(s,e);var r;if(this.inline.type?(r=t("<span>").attr("data-redactor-tag",e).attr("data-verified","redactor"),r=this.inline.setFormat(r)):r=t("<"+e+">").attr("data-redactor-tag",e).attr("data-verified","redactor"),s.replaceWith(r.html(s.contents())),"span"==e){var o=r.parent();if(o&&"SPAN"==o[0].tagName&&"style"==this.inline.type)for(var a=this.inline.value.split(";"),l=0;l<a.length;l++){if(""===a[l])return;var c=a[l].split(":");o.css(c[0],""),this.utils.removeEmptyAttr(o,"style")&&o.replaceWith(o.contents())}}},this)),"span"!=e&&this.$editor.find(this.opts.inlineTags.join(", ")).each(t.proxy(function(e,i){var n=t(i),s=n.css("text-decoration");"line-through"==s&&(n.css("text-decoration",""),this.utils.removeEmptyAttr(n,"style"))},this)),"del"!=e){var i=this;this.$editor.find("inline").each(function(t,e){i.utils.replaceToTag(e,"del")})}this.selection.restore(),this.code.sync()},formatRemoveSameChildren:function(e,i){var n=this;e.children(i).each(function(){var e=t(this);if(!e.hasClass("redactor-selection-marker"))if("style"==n.inline.type)for(var i=n.inline.value.split(";"),s=0;s<i.length;s++){if(""===i[s])return;var r=i[s].split(":");e.css(r[0],""),n.utils.removeEmptyAttr(e,"style")&&e.replaceWith(e.contents())}else e.contents().unwrap()})},formatConvert:function(e){this.selection.save();var i="";"class"==this.inline.type?i="[data-redactor-class="+this.inline.value+"]":"style"==this.inline.type&&(i='[data-redactor-style="'+this.inline.value+'"]');var n=this;"del"!=e&&this.$editor.find("del").each(function(t,e){n.utils.replaceToTag(e,"inline")}),"span"!=e&&this.$editor.find(e).each(function(){var e=t(this);e.replaceWith(t("<strike />").html(e.contents()))}),this.$editor.find('[data-redactor-tag="'+e+'"]'+i).each(function(){if(""!==i||"span"!=e||this.tagName.toLowerCase()!=e){var n=t(this);n.replaceWith(t("<strike />").html(n.contents()))}}),this.selection.restore()},setFormat:function(t){switch(this.inline.type){case"class":t.hasClass(this.inline.value)?(t.removeClass(this.inline.value),t.removeAttr("data-redactor-class")):(t.addClass(this.inline.value),t.attr("data-redactor-class",this.inline.value));break;case"style":t[0].style.cssText=this.inline.value,t.attr("data-redactor-style",this.inline.value)}return t},removeStyle:function(){this.buffer.set();var e=this.selection.getCurrent(),i=this.selection.getInlines();if(this.selection.save(),e&&"SPAN"===e.tagName){var n=t(e);n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents())}t.each(i,t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||(n.removeAttr("style"),0===n[0].attributes.length&&n.replaceWith(n.contents()))},this)),this.selection.restore(),this.code.sync()},removeStyleRule:function(e){this.buffer.set();var i=this.selection.getParent(),n=this.selection.getInlines();if(this.selection.save(),i&&"SPAN"===i.tagName){var s=t(i);s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents())}t.each(n,t.proxy(function(i,n){var s=t(n);-1==t.inArray(n.tagName.toLowerCase(),this.opts.inlineTags)||s.hasClass("redactor-selection-marker")||(s.css(e,""),this.utils.removeEmptyAttr(s,"style"),0===s[0].attributes.length&&s.replaceWith(s.contents()))},this)),this.selection.restore(),this.code.sync()},removeFormat:function(){this.buffer.set();var e=this.selection.getCurrent();this.selection.save(),document.execCommand("removeFormat"),e&&"SPAN"===e.tagName&&t(e).replaceWith(t(e).contents()),t.each(this.selection.getNodes(),t.proxy(function(e,i){var n=t(i);-1==t.inArray(i.tagName.toLowerCase(),this.opts.inlineTags)||n.hasClass("redactor-selection-marker")||n.replaceWith(n.contents())},this)),this.selection.restore(),this.code.sync()},toggleClass:function(t){this.inline.format("span","class",t)},toggleStyle:function(t){this.inline.format("span","style",t)}}},insert:function(){return{set:function(e,i){this.placeholder.remove(),e=this.clean.setVerified(e),"undefined"==typeof i&&(e=this.clean.onPaste(e,!1)),this.$editor.html(e),this.selection.remove(),this.focus.setEnd(),this.clean.normalizeLists(),this.code.sync(),this.observe.load(),"undefined"==typeof i&&setTimeout(t.proxy(this.clean.clearUnverified,this),10)},text:function(e){if(this.placeholder.remove(),e=e.toString(),e=t.trim(e),e=this.clean.getPlainText(e,!1),this.$editor.focus(),this.utils.browser("msie"))this.insert.htmlIe(e);else{this.selection.get(),this.range.deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var n,s,r=document.createDocumentFragment();n=i.firstChild;)s=r.appendChild(n);if(this.range.insertNode(r),s){var o=this.range.cloneRange();o.setStartAfter(s),o.collapse(!0),this.sel.removeAllRanges(),this.sel.addRange(o)}}this.code.sync(),this.clean.clearUnverified()},htmlWithoutClean:function(t){this.insert.html(t,!1)},html:function(e,i){this.placeholder.remove(),"undefined"==typeof i&&(i=!0),this.$editor.focus(),e=this.clean.setVerified(e),i&&(e=this.clean.onPaste(e)),this.utils.browser("msie")?this.insert.htmlIe(e):(this.clean.singleLine?this.insert.execHtml(e):document.execCommand("insertHTML",!1,e),this.insert.htmlFixMozilla()),this.clean.normalizeLists(),this.opts.linebreaks||this.$editor.find("p").each(t.proxy(this.utils.removeEmpty,this)),this.code.sync(),this.observe.load(),i&&this.clean.clearUnverified()},htmlFixMozilla:function(){if(this.utils.browser("mozilla")){var e=t(this.selection.getBlock()).next();e.length>0&&"P"==e[0].tagName&&""===e.html()&&e.remove()}},htmlIe:function(e){if(this.utils.isIe11()){var i=this.utils.isCurrentOrParent("P"),n=t("<div>").append(e),s=n.contents().is("p, :header, dl, ul, ol, div, table, td, blockquote, pre, address, section, header, footer, aside, article");return void(i&&s?this.insert.ie11FixInserting(i,e):this.insert.ie11PasteFrag(e))}document.selection.createRange().pasteHTML(e)},execHtml:function(t){t=this.clean.setVerified(t),this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!0),this.caret.setAfter(n)},node:function(e,i){e=e[0]||e;var n=this.utils.getOuterHtml(e);return n=this.clean.setVerified(n),null!==n.match(/</g)&&(e=t(n)[0]),this.selection.get(),i!==!1&&this.range.deleteContents(),this.range.insertNode(e),this.range.collapse(!1),this.selection.addRange(),e},nodeToPoint:function(t,e,i){t=t[0]||t,this.selection.get();var n;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(e,i);this.range.setStart(s.offsetNode,s.offset),this.range.collapse(!0),this.range.insertNode(t)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e,i),n.insertNode(t);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(e,i);var r=n.duplicate();r.moveToPoint(e,i),n.setEndPoint("EndToEnd",r),n.select()}},nodeToCaretPositionFromPoint:function(t,e){e=e[0]||e;var i,n=t.clientX,s=t.clientY;if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(n,s),o=document.getSelection();i=o.getRangeAt(0),i.setStart(r.offsetNode,r.offset),i.collapse(!0),i.insertNode(e)}else if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n,s),i.insertNode(e);else if("undefined"!=typeof document.body.createTextRange){i=document.body.createTextRange(),i.moveToPoint(n,s);var a=i.duplicate();a.moveToPoint(n,s),i.setEndPoint("EndToEnd",a),i.select()}},ie11FixInserting:function(e,i){var n=document.createElement("span");n.className="redactor-ie-paste",this.insert.node(n);var s=t(e).html();s="<p>"+s.replace(/<span class="redactor-ie-paste"><\/span>/gi,"</p>"+i+"<p>")+"</p>",t(e).replaceWith(s)},ie11PasteFrag:function(t){this.selection.get(),this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n,s=document.createDocumentFragment();i=e.firstChild;)n=s.appendChild(i);this.range.insertNode(s),this.range.collapse(!1),this.selection.addRange()}}},keydown:function(){return{init:function(e){if(!this.rtePaste){var i=e.which,n=i>=37&&40>=i;this.keydown.ctrl=e.ctrlKey||e.metaKey,this.keydown.current=this.selection.getCurrent(),this.keydown.parent=this.selection.getParent(),this.keydown.block=this.selection.getBlock(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.shortcuts.init(e,i),this.keydown.checkEvents(n,i),this.keydown.setupBuffer(e,i),this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(e,i);var s=this.core.setCallback("keydown",e);if(s===!1)return e.preventDefault(),!1;if(this.opts.enterKey&&(this.utils.browser("msie")||this.utils.browser("mozilla"))&&(i===this.keyCode.DOWN||i===this.keyCode.RIGHT)){var r=!1,o=!1;if(this.keydown.block&&"TD"===this.keydown.block.tagName&&(o=t(this.keydown.block).closest("table")),o&&o.find("td").last()[0]===this.keydown.block&&(r=!0),this.utils.isEndOfElement()&&r){var a=t(this.opts.emptyHtml);o.after(a),this.caret.setStart(a)}}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),!this.opts.enterKey&&i===this.keyCode.ENTER)return e.preventDefault(),void(this.range.collapsed||this.range.deleteContents());if(i==this.keyCode.ENTER&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){var l=this.core.setCallback("enter",e);if(l===!1)return e.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(e)===!0)return!1;var c,d;if(this.keydown.pre)return this.keydown.insertNewLine(e);if(this.keydown.blockquote||this.keydown.figcaption)return c=this.selection.getCurrent(),d=t(c).next(),0!==d.length&&"BR"==d[0].tagName?this.keydown.insertBreakLine(e):this.utils.isEndOfElement()&&c&&"SPAN"!=c?this.keydown.insertDblBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&!this.keydown.block)return c=this.selection.getCurrent(),d=t(this.keydown.current).next(),0!==d.length&&"BR"==d[0].tagName?this.keydown.insertBreakLine(e):c!==!1&&t(c).hasClass("redactor-invisible-space")?(this.caret.setAfter(c),t(c).contents().unwrap(),this.keydown.insertDblBreakLine(e)):this.utils.isEndOfEditor()?this.keydown.insertDblBreakLine(e):0===d.length&&c===!1&&"undefined"!=typeof d.context?this.keydown.insertBreakLine(e):this.keydown.insertBreakLine(e);if(this.opts.linebreaks&&this.keydown.block)setTimeout(t.proxy(this.keydown.replaceDivToBreakLine,this),1);else if(!this.opts.linebreaks&&this.keydown.block)if("LI"!==this.keydown.block.tagName)setTimeout(t.proxy(this.keydown.replaceDivToParagraph,this),1);else{c=this.selection.getCurrent();var h=t(c).closest("li"),u=h.closest("ul,ol");if(0!==h.length&&this.utils.isEmpty(h.html())&&0===u.next().length){var a=t(this.opts.emptyHtml);return u.after(a),this.caret.setStart(a),!1}}else if(!this.opts.linebreaks&&!this.keydown.block)return this.keydown.insertParagraph(e)}if(i===this.keyCode.ENTER&&(e.ctrlKey||e.shiftKey))return this.keydown.onShiftEnter(e);if(i===this.keyCode.TAB||e.metaKey&&221===i||e.metaKey&&219===i)return this.keydown.onTab(e,i);if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.utils.browser("mozilla")&&this.keydown.current&&"TD"===this.keydown.current.tagName)return e.preventDefault(),!1;var p=this.selection.getNodes();if(p)for(var f,m=p.length,g=0;m>g;g++){var v=t(p[g]).children("img");if(0!==v.length){var b=this;t.each(v,function(e,i){var n=t(i);"none"==n.css("float")&&(b.core.setCallback("imageDelete",i.src,n),f=i)})}else"IMG"==p[g].tagName&&f!=p[g]&&(this.core.setCallback("imageDelete",p[g].src,t(p[g])),f=p[g])}}i===this.keyCode.BACKSPACE&&(this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(e)),this.code.sync()}},checkEvents:function(t,e){t||"click"!=this.core.getEvent()&&"arrow"!=this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(e)&&this.buffer.set())},checkKeyEvents:function(e){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.SPACE,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1==t.inArray(e,n)},addArrowsEvent:function(t){return t?"click"==this.core.getEvent()||"arrow"==this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(t,e){return this.keydown.ctrl&&90===e&&!t.shiftKey&&!t.altKey&&this.opts.buffer.length?(t.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===e&&t.shiftKey&&!t.altKey&&0!==this.opts.rebuffer.length?(t.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||e!=this.keyCode.BACKSPACE&&e!=this.keyCode.DELETE&&(e!=this.keyCode.ENTER||t.ctrlKey||t.shiftKey)&&e!=this.keyCode.SPACE||this.buffer.set())},setupSelectAll:function(t,e){this.keydown.ctrl&&65===e?this.utils.enableSelectAll():e==this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},onArrowDown:function(){for(var t=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],e=0;e<t.length;e++)if(t[e])return this.keydown.insertAfterLastElement(t[e]),!1},onShiftEnter:function(t){return this.buffer.set(),this.utils.isEndOfElement()?this.keydown.insertDblBreakLine(t):this.keydown.insertBreakLine(t)},onTab:function(t,e){if(!this.opts.tabKey)return!0;if(this.utils.isEmpty(this.code.get())&&this.opts.tabAsSpaces===!1)return!0;t.preventDefault();var i;return this.keydown.pre&&!t.shiftKey?(i=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join("")):document.createTextNode("	"),this.insert.node(i),this.code.sync()):this.opts.tabAsSpaces!==!1?(i=document.createTextNode(Array(this.opts.tabAsSpaces+1).join("")),this.insert.node(i),this.code.sync()):t.metaKey&&219===e?this.indent.decrease():t.metaKey&&221===e?this.indent.increase():t.shiftKey?this.indent.decrease():this.indent.increase(),!1},replaceDivToBreakLine:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if(("DIV"===e.tagName||"P"===e.tagName)&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("br");return t(e).replaceWith(n),this.caret.setBefore(n),this.code.sync(),!1}},replaceDivToParagraph:function(){var e=this.selection.getBlock(),i=e.innerHTML.replace(/<br\s?\/?>/gi,"");if("DIV"===e.tagName&&""===i&&!t(e).hasClass("redactor-editor")){var n=document.createElement("p");return n.innerHTML=this.opts.invisibleSpace,t(e).replaceWith(n),this.caret.setStart(n),this.code.sync(),!1}this.opts.cleanStyleOnEnter&&"P"==e.tagName&&t(e).removeAttr("class").removeAttr("style")},insertParagraph:function(t){t.preventDefault(),this.selection.get();var e=document.createElement("p");return e.innerHTML=this.opts.invisibleSpace,this.range.deleteContents(),this.range.insertNode(e),this.caret.setStart(e),this.code.sync(),!1},exitFromBlockquote:function(e){if(this.utils.isEndOfElement()){var i=t.trim(t(this.keydown.block).html());if(-1!=i.search(/(<br\s?\/?>){2}$/i)){if(e.preventDefault(),this.opts.linebreaks){var n=document.createElement("br");t(this.keydown.blockquote).after(n),this.caret.setBefore(n),t(this.keydown.block).html(i.replace(/<br\s?\/?>$/i,""))}else{var s=t(this.opts.emptyHtml);t(this.keydown.blockquote).after(s),this.caret.setStart(s)}return!0}}},insertAfterLastElement:function(e){if(this.utils.isEndOfElement())if(this.buffer.set(),this.opts.linebreaks){var i=t("<div>").append(t.trim(this.$editor.html())).contents(),n=i.last()[0];if("SPAN"==n.tagName&&""===n.innerHTML&&(n=i.prev()[0]),this.utils.getOuterHtml(n)!=this.utils.getOuterHtml(e))return;var s=document.createElement("br");t(e).after(s),this.caret.setAfter(s)}else{if(this.$editor.contents().last()[0]!==e)return;var r=t(this.opts.emptyHtml);t(e).after(r),this.caret.setStart(r)}},insertNewLine:function(t){t.preventDefault();var e=document.createTextNode("\n");return this.selection.get(),this.range.deleteContents(),this.range.insertNode(e),this.caret.setAfter(e),this.code.sync(),!1},insertBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t)},insertDblBreakLine:function(t){return this.keydown.insertBreakLineProcessing(t,!0)},insertBreakLineProcessing:function(e,i){e.stopPropagation(),this.selection.get();var n=document.createElement("br");if(this.utils.browser("msie")?(this.range.collapse(!1),this.range.setEnd(this.range.endContainer,this.range.endOffset)):this.range.deleteContents(),this.range.insertNode(n),i===!0){var s=t(n).next();if(0!==s.length&&"BR"===s[0].tagName&&this.utils.isEndOfEditor())return this.caret.setAfter(n),this.code.sync(),!1;var r=document.createElement("br");this.range.insertNode(r),this.caret.setAfter(r)}else this.keydown.insertBreakLineProcessingAfter(n);return this.code.sync(),!1},insertBreakLineProcessingAfter:function(e){var i=this.utils.createSpaceElement();t(e).after(i),this.selection.selectElement(i),t(i).replaceWith(function(){return t(this).contents()})},removeInvisibleSpace:function(){var e=t(this.keydown.current);0===e.text().search(/^\u200B$/g)&&e.remove()},removeEmptyListInTable:function(e){var i=t(this.keydown.current),n=t(this.keydown.parent),s=i.closest("td");if(0!==s.length&&i.closest("li")&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;e.preventDefault(),i.remove(),n.remove(),this.caret.setStart(s)}}}},keyup:function(){return{init:function(e){if(!this.rtePaste){var i=e.which;this.keyup.current=this.selection.getCurrent(),this.keyup.parent=this.selection.getParent();var n=this.utils.isRedactorParent(t(this.keyup.parent).parent()),s=this.core.setCallback("keyup",e);return s===!1?(e.preventDefault(),!1):(!this.opts.linebreaks&&3==this.keyup.current.nodeType&&this.keyup.current.length<=1&&(this.keyup.parent===!1||"BODY"==this.keyup.parent.tagName)&&this.keyup.replaceToParagraph(),!this.opts.linebreaks&&this.utils.isRedactorParent(this.keyup.current)&&"DIV"===this.keyup.current.tagName&&this.keyup.replaceToParagraph(!1),this.opts.linebreaks||!t(this.keyup.parent).hasClass("redactor-invisible-space")||n!==!1&&"BODY"!=n[0].tagName||(t(this.keyup.parent).contents().unwrap(),this.keyup.replaceToParagraph()),this.keyup.isLinkify(i)&&(this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertUrlLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),this.observe.load(),this.code.sync()),i===this.keyCode.DELETE||i===this.keyCode.BACKSPACE?(this.clean.clearUnverified(),this.observe.image?(e.preventDefault(),this.image.hideResize(),this.buffer.set(),this.image.remove(this.observe.image),this.observe.image=!1,!1):(this.$editor.find("p").each(t.proxy(this.utils.removeEmpty,this)),this.opts.linebreaks&&this.keyup.current&&"DIV"==this.keyup.current.tagName&&this.utils.isEmpty(this.keyup.current.innerHTML)&&(t(this.keyup.current).after(this.selection.getMarkerAsHtml()),this.selection.restore(),t(this.keyup.current).remove()),this.keyup.formatEmpty(e))):void 0)}},isLinkify:function(t){return this.opts.convertLinks&&(this.opts.convertUrlLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&t===this.keyCode.ENTER&&!this.utils.isCurrentOrParent("PRE")},replaceToParagraph:function(e){var i,n=t(this.keyup.current);i=e===!1?t("<p>").append(n.html()):t("<p>").append(n.clone()),n.replaceWith(i);var s=t(i).next();"undefined"!=typeof s[0]&&"BR"==s[0].tagName&&s.remove(),this.caret.setEnd(i)},formatEmpty:function(e){var i=t.trim(this.$editor.html());if(this.utils.isEmpty(i))return e.preventDefault(),this.opts.linebreaks?(this.$editor.html(this.selection.getMarkerAsHtml()),this.selection.restore()):(i="<p><br /></p>",this.$editor.html(i),this.focus.setStart()),this.code.sync(),!1}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(t){return"undefined"!=typeof this.opts.curLang[t]?this.opts.curLang[t]:""}}},line:function(){return{insert:function(){this.buffer.set();var t=this.selection.getBlocks();return t[0]!==!1&&this.line.isExceptLastOrFirst(t)?void(this.utils.browser("msie")||this.$editor.focus()):void(this.utils.browser("msie")?this.line.insertInIe():this.line.insertInOthersBrowsers())},isExceptLastOrFirst:function(e){var i=["li","td","th","blockquote","figcaption","pre","dl","dt","dd"],n=e[0].tagName.toLowerCase(),s=this.selection.getLastBlock();s="undefined"==typeof s?n:s.tagName.toLowerCase();var r=-1!=t.inArray(n,i),o=-1!=t.inArray(s,i);return r&&o||r?!0:void 0},insertInIe:function(){this.utils.saveScroll(),this.buffer.set(),this.insert.node(document.createElement("hr")),this.utils.restoreScroll(),this.code.sync()},insertInOthersBrowsers:function(){this.buffer.set();var t='<p id="redactor-insert-line"><br /></p>';this.opts.linebreaks&&(t='<br id="redactor-insert-line">'),document.execCommand("insertHTML",!1,"<hr>"+t),this.line.setFocus(),this.code.sync()},setFocus:function(){var e=this.$editor.find("#redactor-insert-line"),i=t(e).next()[0];i?(this.caret.setAfter(e),e.remove()):e.removeAttr("id")}}},link:function(){return{show:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.modal.load("link",this.lang.get("link_insert"),600),this.modal.createCancelButton(),this.link.buttonInsert=this.modal.createActionButton(this.lang.get("insert")),this.selection.get(),this.link.getData(),this.link.cleanUrl(),"_blank"==this.link.target&&t("#redactor-link-blank").prop("checked",!0),this.link.$inputUrl=t("#redactor-link-url"),this.link.$inputText=t("#redactor-link-url-text"),this.link.$inputText.val(this.link.text),this.link.$inputUrl.val(this.link.url),this.link.buttonInsert.on("click",t.proxy(this.link.insert,this)),t(".redactor-link-tooltip").remove(),this.selection.save(),this.modal.show(),this.link.$inputUrl.focus()},cleanUrl:function(){var t=self.location.href.replace(/\/$/i,"");if(this.link.url=this.link.url.replace(t,""),this.link.url=this.link.url.replace(/^\/#/,"#"),this.link.url=this.link.url.replace("mailto:",""),!this.opts.linkProtocol){var e=new RegExp("^(http|ftp|https)://"+self.location.host,"i");this.link.url=this.link.url.replace(e,"")}},getData:function(){this.link.$node=!1;var e=t(this.selection.getCurrent()).closest("a");0!==e.length&&"A"===e[0].tagName?(this.link.$node=e,this.link.url=e.attr("href"),this.link.text=e.text(),this.link.target=e.attr("target")):(this.link.text=this.sel.toString(),this.link.url="",this.link.target="")},insert:function(){var e="",i=this.link.$inputUrl.val(),n=this.link.$inputText.val();if(""===t.trim(i))return void this.link.$inputUrl.addClass("redactor-input-error").on("keyup",function(){t(this).removeClass("redactor-input-error"),t(this).off("keyup")});if(-1!=i.search("@")&&/(http|ftp|https):\/\//i.test(i)===!1)i="mailto:"+i;else if(0!==i.search("#")){t("#redactor-link-blank").prop("checked")&&(e="_blank");var s="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",r=new RegExp("^(http|ftp|https)://"+s,"i"),o=new RegExp("^"+s,"i"),a=new RegExp(".(html|php)$","i");-1==i.search(r)&&-1==i.search(a)&&0===i.search(o)&&this.opts.linkProtocol&&(i=this.opts.linkProtocol+"://"+i)}this.link.set(n,i,e),this.modal.close()},set:function(e,i,n){if(e=t.trim(e.replace(/<|>/g,"")),this.selection.restore(),""!==e||""!==i){if(""===e&&""!==i&&(e=i),this.link.$node)this.buffer.set(),this.link.$node.text(e).attr("href",i),""!==n?this.link.$node.attr("target",n):this.link.$node.removeAttr("target"),this.code.sync();else{if(this.utils.browser("mozilla")&&""===this.link.text){var s=t("<a />").attr("href",i).text(e);""!==n&&s.attr("target",n),this.insert.node(s),this.selection.selectElement(s)}else{var s;this.utils.browser("msie")?(s=t('<a href="'+i+'">').text(e),""!==n&&s.attr("target",n),s=t(this.insert.node(s)),this.selection.selectElement(s)):(document.execCommand("createLink",!1,i),s=t(this.selection.getCurrent()).closest("a"),this.utils.browser("mozilla")&&(s=t('a[_moz_dirty=""]')),""!==n&&s.attr("target",n),s.removeAttr("style").removeAttr("_moz_dirty"),""===this.link.text&&this.link.text==e||(s.text(e),this.selection.selectElement(s)))}this.code.sync(),this.core.setCallback("insertedLink",s)}setTimeout(t.proxy(function(){this.observe.links()},this),5)}},unlink:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault();var i=this.selection.getNodes();if(i){this.buffer.set();for(var n=i.length,s=0;n>s;s++){var r=t(i[s]).closest("a");r.replaceWith(r.contents())}t(".redactor-link-tooltip").remove(),this.code.sync()}},toggleClass:function(t){this.link.setClass(t,"toggleClass")},addClass:function(t){this.link.setClass(t,"addClass")},removeClass:function(t){this.link.setClass(t,"removeClass")},setClass:function(e,i){var n=this.selection.getInlinesTags(["a"]);n!==!1&&t.each(n,function(){t(this)[i](e)})}}},list:function(){return{toggle:function(e){this.placeholder.remove(),this.utils.browser("msie")||this.$editor.focus(),this.buffer.set(),this.selection.save();var i=this.selection.getParent(),n=t(i).closest("ol, ul");this.utils.isRedactorParent(n)||0===n.length||(n=!1);var s,r,o=!1;if(n&&n.length){o=!0;var a=n[0].tagName;s="orderedlist"===e&&"UL"===a,r="unorderedlist"===e&&"OL"===a}s?this.utils.replaceToTag(n,"ol"):r?this.utils.replaceToTag(n,"ul"):o?this.list.remove(e):this.list.insert(e),this.selection.restore(),this.code.sync()},insert:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent(),s=t(n).closest("td, th");this.utils.browser("msie")&&this.opts.linebreaks?this.list.insertInIe(e):document.execCommand("insert"+e);var r=t(this.selection.getParent()).closest("ol, ul");if(0!==s.length){var o=s.prev(),a=s.html();s.html(""),!o||1!==o.length||"TD"!==o[0].tagName&&"TH"!==o[0].tagName?t(i).prepend(s):t(o).after(s),s.html(a)}if(this.utils.isEmpty(r.find("li").text())){var l=r.children("li");l.find("br").remove(),l.append(this.selection.getMarkerAsHtml())}if(r.length){var c=r.parent();this.utils.isRedactorParent(c)&&"LI"!=c[0].tagName&&this.utils.isBlock(c[0])&&c.replaceWith(c.contents())}this.utils.browser("msie")||this.$editor.focus(),this.clean.clearUnverified()},insertInIe:function(e){var i=this.selection.wrap("div"),n=t(i).html(),s=t("orderedlist"==e?"<ol>":"<ul>"),r=t("<li>");if(""===t.trim(n))r.append(this.selection.getMarkerAsHtml()),s.append(r),this.$editor.find("#selection-marker-1").replaceWith(s);else{var o=n.split(/<br\s?\/?>/gi);if(o)for(var a=0;a<o.length;a++)""!==t.trim(o[a])&&s.append(t("<li>").html(o[a]));else r.append(n),s.append(r);t(i).replaceWith(s)}},remove:function(e){document.execCommand("insert"+e);var i=t(this.selection.getCurrent());this.indent.fixEmptyIndent(),this.opts.linebreaks||0!==i.closest("li, th, td").length||(document.execCommand("formatblock",!1,"p"),this.$editor.find("ul, ol, blockquote").each(t.proxy(this.utils.removeEmpty,this)));var n=t(this.selection.getCurrent()).closest("table"),s=n.prev();this.opts.linebreaks||0===n.length||0===s.length||"BR"!=s[0].tagName||s.remove(),this.clean.clearUnverified()}}},modal:function(){return{callbacks:{},loadTemplates:function(){this.opts.modal={imageEdit:String()+'<section id="redactor-modal-image-edit"><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /><label class="redactor-image-link-option">'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" class="redactor-image-link-option" /><label class="redactor-image-link-option"><input type="checkbox" id="redactor-image-link-blank"> '+this.lang.get("link_new_tab")+'</label><label class="redactor-image-position-option">'+this.lang.get("image_position")+'</label><select class="redactor-image-position-option" id="redactor-image-align"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+'</option></select><label>Full Screen Width</label><input type="checkbox" id="redactor-image-full-screen-width" /></section>',image:String()+'<section id="redactor-modal-image-insert"><div id="redactor-modal-image-droparea"></div></section>',file:String()+'<section id="redactor-modal-file-insert"><div id="redactor-modal-file-upload-box"><label>'+this.lang.get("filename")+'</label><input type="text" id="redactor-filename" /><br><br><div id="redactor-modal-file-upload"></div></div></section>',link:String()+'<section id="redactor-modal-link-insert"><label>URL</label><input type="url" id="redactor-link-url" /><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" /><label><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link_new_tab")+"</label></section>"},t.extend(this.opts,this.opts.modal)},addCallback:function(t,e){this.modal.callbacks[t]=e},createTabber:function(e){this.modal.$tabber=t("<div>").attr("id","redactor-modal-tabber"),e.prepend(this.modal.$tabber)},addTab:function(e,i,n){var s=t('<a href="#" rel="tab'+e+'">').text(i);n&&s.addClass("active");var r=this;s.on("click",function(e){e.preventDefault(),t(".redactor-tab").hide(),t(".redactor-"+t(this).attr("rel")).show(),r.modal.$tabber.find("a").removeClass("active"),t(this).addClass("active")}),this.modal.$tabber.append(s)},addTemplate:function(t,e){this.opts.modal[t]=e},getTemplate:function(t){return this.opts.modal[t]},getModal:function(){return this.$modalBody.find("section")},load:function(t,e,i){this.modal.templateName=t,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(e),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[t]&&this.modal.callbacks[t].call(this)},show:function(){this.utils.isMobile()&&!this.utils.browser("msie")&&document.activeElement.blur(),t(document.body).removeClass("body-redactor-hidden"),this.modal.bodyOveflow=t(document.body).css("overflow"),t(document.body).css("overflow","hidden"),this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.modal.setButtonsWidth(),this.utils.saveScroll(),this.utils.isMobile()||(setTimeout(t.proxy(this.modal.showOnDesktop,this),0),t(window).on("resize.redactor-modal",t.proxy(this.modal.resize,this))),this.core.setCallback("modalOpened",this.modal.templateName,this.$modal),t(document).off("focusin.modal"),this.$modal.find("input[type=text],input[type=url],input[type=email]").on("keydown.redactor-modal",t.proxy(this.modal.setEnter,this))},showOnDesktop:function(){var e=this.$modal.outerHeight(),i=t(window).height(),n=t(window).width();return this.modal.width>n?void this.$modal.css({width:"96%",marginTop:i/2-e/2+"px"}):void(e>i?this.$modal.css({width:this.modal.width+"px",marginTop:"20px"}):this.$modal.css({width:this.modal.width+"px",marginTop:i/2-e/2+"px"
}))},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.utils.isMobile()?this.modal.showOnMobile():this.modal.showOnDesktop()},setTitle:function(t){this.$modalHeader.html(t)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName))},setDraggable:function(){"undefined"!=typeof t.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(t){13==t.which&&(t.preventDefault(),this.$modal.find("button.redactor-modal-action-btn").click())},createCancelButton:function(){var e=t("<button>").addClass("redactor-modal-btn redactor-modal-close-btn").html(this.lang.get("cancel"));e.on("click",t.proxy(this.modal.close,this)),this.$modalFooter.append(e)},createDeleteButton:function(t){return this.modal.createButton(t,"delete")},createActionButton:function(t){return this.modal.createButton(t,"action")},createButton:function(e,i){var n=t("<button>").addClass("redactor-modal-btn").addClass("redactor-modal-"+i+"-btn").html(e);return this.$modalFooter.append(n),n},setButtonsWidth:function(){var t=this.$modalFooter.find("button"),e=t.length;0!==e&&t.css("width",100/e+"%")},build:function(){this.modal.buildOverlay(),this.$modalBox=t('<div id="redactor-modal-box" />').hide(),this.$modal=t('<div id="redactor-modal" />'),this.$modalHeader=t("<header />"),this.$modalClose=t('<span id="redactor-modal-close" />').html("&times;"),this.$modalBody=t('<div id="redactor-modal-body" />'),this.$modalFooter=t("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=t('<div id="redactor-modal-overlay">').hide(),t("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("click.redactor-modal",t.proxy(this.modal.close,this)),t(document).on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$editor.on("keyup.redactor-modal",t.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",t.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("click.redactor-modal"),t(document).off("keyup.redactor-modal"),this.$editor.off("keyup.redactor-modal"),this.$modalBox.off("click.redactor-modal"),t(window).off("resize.redactor-modal")},closeHandler:function(t){t.which==this.keyCode.ESC&&this.modal.close(!1)},close:function(e){if(e){if(!t(e.target).hasClass("redactor-modal-close-btn")&&e.target!=this.$modalClose[0]&&e.target!=this.$modalBox[0])return;e.preventDefault()}this.$modalBox&&(this.modal.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",t.proxy(function(){this.$modalBox.remove(),setTimeout(t.proxy(this.utils.restoreScroll,this),0),void 0!==e&&this.selection.restore(),t(document.body).css("overflow",this.modal.bodyOveflow),this.core.setCallback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){this.observe.images(),this.observe.links()},buttons:function(e,i){var n=this.selection.getCurrent(),s=this.selection.getParent();if(e!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),e===!1&&"html"!==i)return void(-1!=t.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i));t.each(this.opts.activeButtonsStates,t.proxy(function(e,i){var r=t(s).closest(e),o=t(n).closest(e);(0===r.length||this.utils.isRedactorParent(r))&&this.utils.isRedactorParent(o)&&(0===r.length&&0===o.closest(e).length||this.button.setActive(i))},this));var r=t(s).closest(this.opts.alignmentTags.toString().toLowerCase());if(this.utils.isRedactorParent(s)&&r.length){var o=""===r.css("text-align")?"left":r.css("text-align");this.button.setActive("align"+o)}},addButton:function(t,e){this.opts.activeButtons.push(e),this.opts.activeButtonsStates[t]=e},images:function(){this.$editor.find("img").each(t.proxy(function(e,i){var n=t(i);n.closest("a").on("click",function(t){t.preventDefault()}),this.utils.browser("msie")&&n.attr("unselectable","on"),this.image.setEditable(n)},this)),t(document).on("click.redactor-image-delete."+this.uuid,t.proxy(function(t){this.observe.image=!1,"IMG"==t.target.tagName&&this.utils.isRedactorParent(t.target)&&(this.observe.image=this.observe.image&&this.observe.image==t.target?!1:t.target)},this))},links:function(){this.opts.linkTooltip&&(this.$editor.find("a").on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.showTooltip,this)),this.$editor.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)),t(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,t.proxy(this.observe.closeTooltip,this)))},getTooltipPosition:function(t){return t.offset()},showTooltip:function(e){var i=t(e.target),n=i.closest("a"),s=0!==i.length?i[0].tagName:!1;if("A"===n[0].tagName){if("IMG"===s)return;"A"!==s&&(i=n)}if("A"===s){var r=this.observe.getTooltipPosition(i),o=t('<span class="redactor-link-tooltip"></span>'),a=i.attr("href");void 0===a&&(a=""),a.length>24&&(a=a.substring(0,24)+"...");var l=t('<a href="'+i.attr("href")+'" target="_blank" />').html(a).addClass("redactor-link-tooltip-action"),c=t('<a href="#" />').html(this.lang.get("edit")).on("click",t.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),d=t('<a href="#" />').html(this.lang.get("unlink")).on("click",t.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");o.append(l).append(" | ").append(c).append(" | ").append(d),o.css({top:r.top+parseInt(i.css("line-height"),10)+"px",left:r.left+"px"}),t(".redactor-link-tooltip").remove(),t("body").append(o)}},closeTooltip:function(e){e=e.originalEvent||e;var i=e.target,n=t(i).closest("a");0!==n.length&&"A"===n[0].tagName&&"A"!==i.tagName||"A"===i.tagName&&this.utils.isRedactorParent(i)||t(i).hasClass("redactor-link-tooltip-action")||t(".redactor-link-tooltip").remove()}}},paragraphize:function(){return{load:function(e){return this.opts.linebreaks?e:""===e||"<p></p>"===e?this.opts.emptyHtml:(this.paragraphize.blocks=["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],e+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,e=e.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),e=this.paragraphize.getSafes(e),e=this.paragraphize.getSafesComments(e),e=this.paragraphize.replaceBreaksToNewLines(e),e=this.paragraphize.replaceBreaksToParagraphs(e),e=this.paragraphize.clear(e),e=this.paragraphize.restoreSafes(e),e=e.replace(new RegExp("<br\\s?/?>\n?<("+this.paragraphize.blocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),t.trim(e))},getSafes:function(e){var i=t("<div />").append(e);return i.find("blockquote p").replaceWith(function(){return t(this).append("<br />").contents()}),e=i.html(),i.find(this.paragraphize.blocks.join(", ")).each(t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e=e.replace(i.outerHTML,"\n{replace"+this.paragraphize.z+"}")},this)),e},getSafesComments:function(e){var i=e.match(/<!--([\w\W]*?)-->/gi);return i?(t.each(i,t.proxy(function(t,i){this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i,e=e.replace(i,"\n{replace"+this.paragraphize.z+"}")},this)),e):e},restoreSafes:function(e){return t.each(this.paragraphize.safes,function(t,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,e=e.replace("{replace"+t+"}",i)}),e},replaceBreaksToParagraphs:function(t){var e=t.split(new RegExp("\n","g"),-1);if(t="",e)for(var i=e.length,n=0;i>n;n++){if(!e.hasOwnProperty(n))return;-1==e[n].search("{replace")?(e[n]=e[n].replace(/<p>\n\t?<\/p>/gi,""),e[n]=e[n].replace(/<p><\/p>/gi,""),""!==e[n]&&(t+="<p>"+e[n].replace(/^\n+|\n+$/g,"")+"</p>")):t+=e[n]}return t},replaceBreaksToNewLines:function(t){return t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(/<br\s?\/?>\n?<br\s?\/?>/gi,"\n<br /><br />"),t=t.replace(new RegExp("\r\n","g"),"\n"),t=t.replace(new RegExp("\r","g"),"\n"),t=t.replace(new RegExp("/\n\n+/"),"g","\n\n")},clear:function(t){return t=t.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),t=t.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),t=t.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),t=t.replace(new RegExp("<p><p ","gi"),"<p "),t=t.replace(new RegExp("<p><p>","gi"),"<p>"),t=t.replace(new RegExp("</p></p>","gi"),"</p>"),t=t.replace(new RegExp("<p>\\s?</p>","gi"),""),t=t.replace(new RegExp("\n</p>","gi"),"</p>"),t=t.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),t=t.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(e){return this.opts.cleanOnPaste?(this.rtePaste=!0,this.buffer.set(),this.selection.save(),this.utils.saveScroll(),this.paste.createPasteBox(),t(window).on("scroll.redactor-freeze",t.proxy(function(){t(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(t.proxy(function(){var e=this.$pasteBox.html();this.$pasteBox.remove(),this.selection.restore(),this.utils.restoreScroll(),this.paste.insert(e),t(window).off("scroll.redactor-freeze")},this),1)):void setTimeout(t.proxy(this.code.sync,this),1)},createPasteBox:function(){this.$pasteBox=t("<div>").html("").attr("contenteditable","true").css({position:"fixed",width:0,top:0,left:"-9999px"}),this.utils.browser("msie")?this.$box.append(this.$pasteBox):t("body").append(this.$pasteBox),this.$pasteBox.focus()},insert:function(e){e=this.core.setCallback("pasteBefore",e),e=this.utils.isSelectAll()?this.clean.onPaste(e,!1):this.clean.onPaste(e),e=this.core.setCallback("paste",e),this.utils.isSelectAll()?this.insert.set(e,!1):this.insert.html(e,!1),this.utils.disableSelectAll(),this.rtePaste=!1,setTimeout(t.proxy(this.clean.clearUnverified,this),10),setTimeout(t.proxy(function(){var e=this.$editor.find("span");t.each(e,function(e,i){var n=i.innerHTML.replace(/[\u200B-\u200D\uFEFF]/,"");""===n&&0===i.attributes.length&&t(i).remove()})},this),10)}}},placeholder:function(){return{enable:function(){this.placeholder.is()&&(this.$editor.attr("placeholder",this.$element.attr("placeholder")),this.placeholder.toggle(),this.$editor.on("keyup.redactor-placeholder",t.proxy(this.placeholder.toggle,this)))},toggle:function(){var t="removeClass";this.utils.isEmpty(this.$editor.html(),!1)&&(t="addClass"),this.$editor[t]("redactor-placeholder")},remove:function(){this.$editor.removeClass("redactor-placeholder")},is:function(){return this.opts.placeholder?this.$element.attr("placeholder",this.opts.placeholder):!("undefined"==typeof this.$element.attr("placeholder")||""===this.$element.attr("placeholder"))}}},progress:function(){return{show:function(){t(document.body).append(t('<div id="redactor-progress"><span></span></div>')),t("#redactor-progress").fadeIn()},hide:function(){t("#redactor-progress").fadeOut(1500,function(){t(this).remove()})}}},selection:function(){return{get:function(){this.sel=document.getSelection(),document.getSelection&&this.sel.getRangeAt&&this.sel.rangeCount?this.range=this.sel.getRangeAt(0):this.range=document.createRange()},addRange:function(){try{this.sel.removeAllRanges()}catch(t){}this.sel.addRange(this.range)},getCurrent:function(){var t=!1;return this.selection.get(),this.sel&&this.sel.rangeCount>0&&(t=this.sel.getRangeAt(0).startContainer),this.utils.isRedactorParent(t)},getParent:function(e){return e=e||this.selection.getCurrent(),e?this.utils.isRedactorParent(t(e).parent()[0]):!1},getBlock:function(e){for(e=e||this.selection.getCurrent();e;){if(this.utils.isBlockTag(e.tagName))return t(e).hasClass("redactor-editor")?!1:e;e=e.parentNode}return!1},getInlines:function(e,i){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var n=[];e="undefined"==typeof e||e===!1?this.selection.getNodes():e;var s=this.opts.inlineTags;if(s.push("span"),"undefined"!=typeof i)for(var r=0;r<i.length;r++)s.push(i[r]);return t.each(e,t.proxy(function(e,i){-1!=t.inArray(i.tagName.toLowerCase(),s)&&n.push(i)},this)),0===n.length?!1:n},getInlinesTags:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return!1;var i=[],n=this.selection.getNodes();return t.each(n,t.proxy(function(n,s){-1!=t.inArray(s.tagName.toLowerCase(),e)&&i.push(s)},this)),0===i.length?!1:i},getBlocks:function(e){if(this.selection.get(),this.range&&this.range.collapsed)return[this.selection.getBlock()];var i=[];return e="undefined"==typeof e?this.selection.getNodes():e,t.each(e,t.proxy(function(t,e){this.utils.isBlock(e)&&(this.selection.lastBlock=e,i.push(e))},this)),0===i.length?[this.selection.getBlock()]:i},getLastBlock:function(){return this.selection.lastBlock},getNodes:function(){this.selection.get();var e=this.selection.getNodesMarker(1),i=this.selection.getNodesMarker(2),n=this.range.cloneRange();if(this.range.collapsed===!1){var s=n.startContainer,r=n.startOffset;this.selection.setNodesMarker(n,i,!1),n.setStart(s,r),this.selection.setNodesMarker(n,e,!0)}else this.selection.setNodesMarker(n,e,!0),i=e;var o=[],a=0,l=this;this.$editor.find("*").each(function(){if(this==e){var n=t(this).parent();0!==n.length&&"BODY"!=n[0].tagName&&l.utils.isRedactorParent(n[0])&&o.push(n[0]),o.push(this),a=1}else a>0&&(o.push(this),a+=1);return this==i?!1:void 0});for(var c=[],d=o.length,h=0;d>h;h++)"nodes-marker-1"!=o[h].id&&"nodes-marker-2"!=o[h].id&&c.push(o[h]);return this.selection.removeNodesMarkers(),c},getNodesMarker:function(e){return t('<span id="nodes-marker-'+e+'" class="redactor-nodes-marker" data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},setNodesMarker:function(t,e,i){try{t.collapse(i),t.insertNode(e)}catch(n){}},removeNodesMarkers:function(){t(document).find("span.redactor-nodes-marker").remove(),this.$editor.find("span.redactor-nodes-marker").remove()},fromPoint:function(t,e){this.caret.setOffset(t,e)},wrap:function(t){if(this.selection.get(),this.range.collapsed)return!1;var e=document.createElement(t);return e.appendChild(this.range.extractContents()),this.range.insertNode(e),e},selectElement:function(t){this.caret.set(t,0,t,1)},selectAll:function(){this.selection.get(),this.range.selectNodeContents(this.$editor[0]),this.selection.addRange()},remove:function(){this.selection.get(),this.sel.removeAllRanges()},save:function(){this.selection.createMarkers()},createMarkers:function(){this.selection.get();var t=this.selection.getMarker(1);if(this.selection.setMarker(this.range,t,!0),this.range.collapsed===!1){var e=this.selection.getMarker(2);this.selection.setMarker(this.range,e,!1)}this.savedSel=this.$editor.html()},getMarker:function(e){return"undefined"==typeof e&&(e=1),t('<span id="selection-marker-'+e+'" class="redactor-selection-marker"  data-verified="redactor">'+this.opts.invisibleSpace+"</span>")[0]},getMarkerAsHtml:function(t){return this.utils.getOuterHtml(this.selection.getMarker(t))},setMarker:function(t,e,i){t=t.cloneRange();try{t.collapse(i),t.insertNode(e)}catch(n){this.focus.setStart()}},restore:function(){var t=this.$editor.find("span#selection-marker-1"),e=this.$editor.find("span#selection-marker-2");0!==t.length&&0!==e.length?this.caret.set(t,0,e,0):0!==t.length?this.caret.set(t,0,t,0):this.$editor.focus(),this.selection.removeMarkers(),this.savedSel=!1},removeMarkers:function(){this.$editor.find("span.redactor-selection-marker").each(function(e,i){var n=t(i).text().replace(/[\u200B-\u200D\uFEFF]/g,"");""===n?t(i).remove():t(i).replaceWith(function(){return t(this).contents()})})},getText:function(){return this.selection.get(),this.sel.toString()},getHtml:function(){var t="";if(this.selection.get(),this.sel.rangeCount){for(var e=document.createElement("div"),i=this.sel.rangeCount,n=0;i>n;++n)e.appendChild(this.sel.getRangeAt(n).cloneContents());t=e.innerHTML}return this.clean.onSync(t)},replaceWithHtml:function(t){if(t=this.selection.getMarkerAsHtml(1)+t+this.selection.getMarkerAsHtml(2),this.selection.get(),window.getSelection&&window.getSelection().getRangeAt){this.range.deleteContents();var e=document.createElement("div");e.innerHTML=t;for(var i,n=document.createDocumentFragment();i=e.firstChild;)n.appendChild(i);this.range.insertNode(n)}else document.selection&&document.selection.createRange&&this.range.pasteHTML(t);this.selection.restore(),this.code.sync()}}},shortcuts:function(){return{init:function(e,i){return this.opts.shortcuts?void t.each(this.opts.shortcuts,t.proxy(function(i,n){for(var s=i.split(","),r=s.length,o=0;r>o;o++)"string"==typeof s[o]&&this.shortcuts.handler(e,t.trim(s[o]),t.proxy(function(){var t;"-1"!=n.func.search(/\./)?(t=n.func.split("."),"undefined"!=typeof this[t[0]]&&this[t[0]][t[1]].apply(this,n.params)):this[n.func].apply(this,n.params)},this))},this)):(!e.ctrlKey&&!e.metaKey||66!==i&&73!==i||e.preventDefault(),!1)},handler:function(e,i,n){var s={8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"};i=i.toLowerCase().split(" ");var o=s[e.keyCode],a=String.fromCharCode(e.which).toLowerCase(),l="",c={};t.each(["alt","ctrl","meta","shift"],function(t,i){e[i+"Key"]&&o!==i&&(l+=i+"+")}),o&&(c[l+o]=!0),a&&(c[l+a]=!0,c[l+r[a]]=!0,"shift+"===l&&(c[r[a]]=!0));for(var d=0,h=i.length;h>d;d++)if(c[i[d]])return e.preventDefault(),n.apply(this,arguments)}}},tabifier:function(){return{get:function(t){if(!this.opts.tabifier)return t;var e=["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],i=["li","dt","dt","h[1-6]","option","script"],n=["p","blockquote","div","dl","fieldset","form","frameset","map","ol","pre","select","td","th","tr","ul"];this.tabifier.lineBefore=new RegExp("^<(/?"+e.join("|/?")+"|"+i.join("|")+")[ >]"),this.tabifier.lineAfter=new RegExp("^<(br|/?"+e.join("|/?")+"|/"+i.join("|/")+")[ >]"),this.tabifier.newLevel=new RegExp("^</?("+n.join("|")+")[ >]");var s=0,r=t.length,o=0,a=null,l=null,c="",d="",h="";for(this.tabifier.cleanlevel=0;r>s;s++){if(o=s,-1==t.substr(s).indexOf("<"))return d+=t.substr(s),this.tabifier.finish(d);for(;r>o&&"<"!=t.charAt(o);)o++;for(s!=o&&(h=t.substr(s,o-s),h.match(/^\s{2,}$/g)||("\n"==d.charAt(d.length-1)?d+=this.tabifier.getTabs():"\n"==h.charAt(0)&&(d+="\n"+this.tabifier.getTabs(),h=h.replace(/^\s+/,"")),d+=h),h.match(/\n/)&&(d+="\n"+this.tabifier.getTabs())),a=o;r>o&&">"!=t.charAt(o);)o++;c=t.substr(a,o-a),s=o;var u;if("!--"==c.substr(1,3)){if(!c.match(/--$/)){for(;"-->"!=t.substr(o,3);)o++;o+=2,c=t.substr(a,o-a),s=o}"\n"!=d.charAt(d.length-1)&&(d+="\n"),d+=this.tabifier.getTabs(),d+=c+">\n"}else"!"==c[1]?d=this.tabifier.placeTag(c+">",d):"?"==c[1]?d+=c+">\n":(u=c.match(/^<(script|style|pre)/i))?(u[1]=u[1].toLowerCase(),c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d),l=String(t.substr(s+1)).toLowerCase().indexOf("</"+u[1]),l&&(h=t.substr(s+1,l),s+=l,d+=h)):(c=this.tabifier.cleanTag(c),d=this.tabifier.placeTag(c,d))}return this.tabifier.finish(d)},getTabs:function(){for(var t="",e=0;e<this.tabifier.cleanlevel;e++)t+="	";return t},finish:function(t){return t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/,""),t=t.replace(/[\s\n]*$/,""),t=t.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.tabifier.cleanlevel=0,t},cleanTag:function(t){var e="";t=t.replace(/\n/g," "),t=t.replace(/\s{2,}/g," "),t=t.replace(/^\s+|\s+$/g," ");var i="";t.match(/\/$/)&&(i="/",t=t.replace(/\/+$/,""));for(var n;n=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)n[2]?e+=n[1].toLowerCase()+"="+n[2]:n[1]&&(e+=n[1].toLowerCase()),e+=" ",t=t.substr(n[0].length);return e.replace(/\s*$/,"")+i+">"},placeTag:function(t,e){var i=t.match(this.tabifier.newLevel);return(t.match(this.tabifier.lineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"==t.charAt(1)&&this.tabifier.cleanlevel--,"\n"==e.charAt(e.length-1)&&(e+=this.tabifier.getTabs()),i&&"/"!=t.charAt(1)&&this.tabifier.cleanlevel++,e+=t,(t.match(this.tabifier.lineAfter)||t.match(this.tabifier.newLevel))&&(e=e.replace(/ *$/,"")),e}}},tidy:function(){return{setupAllowed:function(){if(this.opts.allowedTags&&(this.opts.deniedTags=!1),this.opts.allowedAttr&&(this.opts.removeAttr=!1),!this.opts.linebreaks){var t=["p","section"];this.opts.allowedTags&&this.tidy.addToAllowed(t),this.opts.deniedTags&&this.tidy.removeFromDenied(t)}},addToAllowed:function(e){for(var i=e.length,n=0;i>n;n++)-1==t.inArray(e[n],this.opts.allowedTags)&&this.opts.allowedTags.push(e[n])},removeFromDenied:function(e){for(var i=e.length,n=0;i>n;n++){var s=t.inArray(e[n],this.opts.deniedTags);-1!=s&&this.opts.deniedTags.splice(s,1)}},load:function(e,i){return this.tidy.settings={deniedTags:this.opts.deniedTags,allowedTags:this.opts.allowedTags,removeComments:this.opts.removeComments,replaceTags:this.opts.replaceTags,replaceStyles:this.opts.replaceStyles,removeDataAttr:this.opts.removeDataAttr,removeAttr:this.opts.removeAttr,allowedAttr:this.opts.allowedAttr,removeWithoutAttr:this.opts.removeWithoutAttr,removeEmpty:this.opts.removeEmpty},t.extend(this.tidy.settings,i),e=this.tidy.removeComments(e),this.tidy.$div=t("<div />").append(e),this.tidy.replaceTags(),this.tidy.replaceStyles(),this.tidy.removeTags(),this.tidy.removeAttr(),this.tidy.removeEmpty(),this.tidy.removeParagraphsInLists(),this.tidy.removeDataAttr(),this.tidy.removeWithoutAttr(),e=this.tidy.$div.html(),this.tidy.$div.remove(),e},removeComments:function(t){return this.tidy.settings.removeComments?t.replace(/<!--[\s\S]*?-->/gi,""):t},replaceTags:function(e){if(!this.tidy.settings.replaceTags)return e;for(var i=this.tidy.settings.replaceTags.length,n=[],s=[],r=0;i>r;r++)s.push(this.tidy.settings.replaceTags[r][1]),n.push(this.tidy.settings.replaceTags[r][0]);return this.tidy.$div.find(n.join(",")).each(t.proxy(function(e,i){var n=s[e];t(i).replaceWith(function(){for(var e=t("<"+n+" />").append(t(this).contents()),i=0;i<this.attributes.length;i++)e.attr(this.attributes[i].name,this.attributes[i].value);return e})},this)),e},replaceStyles:function(){if(this.tidy.settings.replaceStyles){var e=this.tidy.settings.replaceStyles.length;this.tidy.$div.find("span").each(t.proxy(function(i,n){for(var s=t(n),r=s.attr("style"),o=0;e>o;o++)if(r&&r.match(new RegExp("^"+this.tidy.settings.replaceStyles[o][0],"i"))){var a=this.tidy.settings.replaceStyles[o][1];s.replaceWith(function(){var e=document.createElement(a);return t(e).append(t(this).contents())})}},this))}},removeTags:function(){!this.tidy.settings.deniedTags&&this.tidy.settings.allowedTags&&this.tidy.$div.find("*").not(this.tidy.settings.allowedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()}),this.tidy.settings.deniedTags&&this.tidy.$div.find(this.tidy.settings.deniedTags.join(",")).each(function(e,i){""===i.innerHTML?t(i).remove():t(i).contents().unwrap()})},removeAttr:function(){var e;if(!this.tidy.settings.removeAttr&&this.tidy.settings.allowedAttr){var i=[],n=[];e=this.tidy.settings.allowedAttr.length;for(var s=0;e>s;s++)i.push(this.tidy.settings.allowedAttr[s][0]),n.push(this.tidy.settings.allowedAttr[s][1]);this.tidy.$div.find("*").each(t.proxy(function(e,s){var r=t(s),o=t.inArray(r[0].tagName.toLowerCase(),i),a=this.tidy.removeAttrGetRemoves(o,n,r);a&&t.each(a,function(t,e){r.removeAttr(e)})},this))}if(this.tidy.settings.removeAttr){e=this.tidy.settings.removeAttr.length;for(var s=0;e>s;s++){var r=this.tidy.settings.removeAttr[s][1];t.isArray(r)&&(r=r.join(" ")),this.tidy.$div.find(this.tidy.settings.removeAttr[s][0]).removeAttr(r)}}},removeAttrGetRemoves:function(e,i,n){var s=[];return-1==e?t.each(n[0].attributes,function(t,e){s.push(e.name)}):"*"==i[e]?s=[]:t.each(n[0].attributes,function(n,r){t.isArray(i[e])?-1==t.inArray(r.name,i[e])&&s.push(r.name):i[e]!=r.name&&s.push(r.name)}),s},removeAttrs:function(e,i){return i=new RegExp(i,"g"),e.each(function(){for(var e=t(this),n=this.attributes.length-1,s=n;s>=0;s--){var r=this.attributes[s];r&&r.specified&&r.name.search(i)>=0&&e.removeAttr(r.name)}})},removeEmpty:function(){this.tidy.settings.removeEmpty&&this.tidy.$div.find(this.tidy.settings.removeEmpty.join(",")).each(function(){var e=t(this),i=e.text();i=i.replace(/[\u200B-\u200D\uFEFF]/g,""),i=i.replace(/&nbsp;/gi,""),i=i.replace(/\s/g,""),""===i&&0===e.children().length&&e.remove()})},removeParagraphsInLists:function(){this.tidy.$div.find("li p").contents().unwrap()},removeDataAttr:function(){if(this.tidy.settings.removeDataAttr){var e=this.tidy.settings.removeDataAttr;t.isArray(this.tidy.settings.removeDataAttr)&&(e=this.tidy.settings.removeDataAttr.join(",")),this.tidy.removeAttrs(this.tidy.$div.find(e),"^(data-)")}},removeWithoutAttr:function(){this.tidy.settings.removeWithoutAttr&&this.tidy.$div.find(this.tidy.settings.removeWithoutAttr.join(",")).each(function(){0===this.attributes.length&&t(this).contents().unwrap()})}}},toolbar:function(){return{init:function(){return{html:{title:this.lang.get("html"),func:"code.toggle"},formatting:{title:this.lang.get("formatting"),dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("header1"),func:"block.format"},h2:{title:this.lang.get("header2"),func:"block.format"},h3:{title:this.lang.get("header3"),func:"block.format"},h4:{title:this.lang.get("header4"),func:"block.format"},h5:{title:this.lang.get("header5"),func:"block.format"},sup:{title:"Superscript",func:"inline.format"},sub:{title:"Subscript",func:"inline.format"},small:{title:"Small text",func:"inline.format"}}},bold:{title:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline"),func:"inline.format"},unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease"},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase"},image:{title:this.lang.get("image"),func:"image.show"},file:{title:this.lang.get("file"),func:"file.show"},link:{title:this.lang.get("link"),dropdown:{link:{title:this.lang.get("link_insert"),func:"link.show"},unlink:{title:this.lang.get("unlink"),func:"link.unlink"}}},alignment:{title:this.lang.get("alignment"),dropdown:{left:{title:this.lang.get("align_left"),func:"alignment.left"},center:{title:this.lang.get("align_center"),func:"alignment.center"},right:{title:this.lang.get("align_right"),func:"alignment.right"},justify:{title:this.lang.get("align_justify"),func:"alignment.justify"}}},horizontalrule:{title:this.lang.get("horizontalrule"),func:"line.insert"}}},build:function(){this.toolbar.hideButtons(),this.toolbar.hideButtonsOnMobile(),this.toolbar.isButtonSourceNeeded(),0!==this.opts.buttons.length&&(this.$toolbar=this.toolbar.createContainer(),this.toolbar.setOverflow(),this.toolbar.append(),this.toolbar.setFormattingTags(),this.toolbar.loadButtons(),this.toolbar.setFixed(),this.opts.activeButtons&&this.$editor.on("mouseup.redactor keyup.redactor focus.redactor",t.proxy(this.observe.buttons,this)))},createContainer:function(){return t("<ul>").addClass("redactor-toolbar").attr("id","redactor-toolbar-"+this.uuid)},setFormattingTags:function(){t.each(this.opts.toolbar.formatting.dropdown,t.proxy(function(e,i){-1==t.inArray(e,this.opts.formatting)&&delete this.opts.toolbar.formatting.dropdown[e]},this))},loadButtons:function(){t.each(this.opts.buttons,t.proxy(function(e,i){if(this.opts.toolbar[i]){if("file"===i){if(this.opts.fileUpload===!1)return;if(!this.opts.fileUpload&&this.opts.s3===!1)return}if("image"===i){if(this.opts.imageUpload===!1)return;if(!this.opts.imageUpload&&this.opts.s3===!1)return}var n=this.opts.toolbar[i];this.$toolbar.append(t("<li>").append(this.button.build(i,n)))}},this))},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),t(this.opts.toolbarExternal).html(this.$toolbar)):this.$box.prepend(this.$toolbar)},setFixed:function(){this.utils.isDesktop()&&(this.opts.toolbarExternal||this.opts.toolbarFixed&&(this.toolbar.observeScroll(),t(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,t.proxy(this.toolbar.observeScroll,this))))},setOverflow:function(){this.utils.isMobile()&&this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},isButtonSourceNeeded:function(){if(!this.opts.source){var t=this.opts.buttons.indexOf("html");-1!==t&&this.opts.buttons.splice(t,1)}},hideButtons:function(){0!==this.opts.buttonsHide.length&&t.each(this.opts.buttonsHide,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},hideButtonsOnMobile:function(){this.utils.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&t.each(this.opts.buttonsHideOnMobile,t.proxy(function(t,e){var i=this.opts.buttons.indexOf(e);this.opts.buttons.splice(i,1)},this))},observeScroll:function(){var e=t(this.opts.toolbarFixedTarget).scrollTop(),i=1;this.opts.toolbarFixedTarget===document&&(i=this.$box.offset().top),e>i?this.toolbar.observeScrollEnable(e,i):this.toolbar.observeScrollDisable()},observeScrollEnable:function(t,e){var i=this.opts.toolbarFixedTopOffset+t-e+50,n=0,s=e+this.$box.height()-32,r=this.$box.innerWidth();this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:"absolute",width:r,top:i+"px",left:n}),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",s>t?"visible":"hidden")},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box")},setDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(e=this.$toolbar.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:i,top:e+"px"})})},unsetDropdownsFixed:function(){var e=this.$toolbar.innerHeight()+this.$toolbar.offset().top;t(".redactor-dropdown-"+this.uuid).each(function(){t(this).css({position:"absolute",top:e+"px"})})}}},upload:function(){return{init:function(e,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=t(e),this.upload.$droparea=t('<div id="redactor-droparea" />'),this.upload.$placeholdler=t('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload_label")),this.upload.$input=t('<input type="file" name="file" />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",t.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",t.proxy(this.upload.onDragLeave,this)),
this.upload.$input.on("change.redactor.upload",t.proxy(function(t){t=t.originalEvent||t,this.upload.traverseFile(this.upload.$input[0].files[0],t)},this)),this.upload.$droparea.on("drop.redactor.upload",t.proxy(function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(t)},this))},directUpload:function(t,e){this.upload.direct=!0,this.upload.traverseFile(t,e)},onDrop:function(t){t=t.originalEvent||t;var e=t.dataTransfer.files;this.upload.traverseFile(e[0],t)},traverseFile:function(t,e){if(this.opts.s3)return this.upload.setConfig(t),void this.upload.s3uploadFile(t);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(t);var n="image"==this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,t)}this.progress.show(),this.core.setCallback("uploadStart",e,i),this.upload.sendData(i,e)},setConfig:function(t){this.upload.getType(t),this.upload.direct&&(this.upload.url="image"==this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"==this.upload.type?this.image.insert:this.file.insert)},getType:function(t){this.upload.type="image",-1==this.opts.imageTypes.indexOf(t.type)&&(this.upload.type="file")},getHiddenFields:function(e,i){return e===!1||"object"!=typeof e?i:(t.each(e,t.proxy(function(e,n){null!==n&&0===n.toString().indexOf("#")&&(n=t(n).val()),i.append(e,n)},this)),i)},sendData:function(e,i){"image"==this.upload.type?(e=this.upload.getHiddenFields(this.opts.uploadImageFields,e),e=this.upload.getHiddenFields(this.upload.imageFields,e)):(e=this.upload.getHiddenFields(this.opts.uploadFileFields,e),e=this.upload.getHiddenFields(this.upload.fileFields,e));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.onreadystatechange=t.proxy(function(){if(4==n.readyState){var e=n.responseText;e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var s;try{s="string"==typeof e?t.parseJSON(e):e}catch(r){s={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(s,this.upload.direct,i)}},this),n.send(e)},onDrag:function(t){t.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(t,e){this.upload.imageFields[t]=e},removeImageFields:function(t){delete this.upload.imageFields[t]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(t,e){this.upload.fileFields[t]=e},removeFileFields:function(t){delete this.upload.fileFields[t]},s3uploadFile:function(e){this.upload.s3executeOnSignedUrl(e,t.proxy(function(t){this.upload.s3uploadToS3(e,t)},this))},s3executeOnSignedUrl:function(t,e){var i=new XMLHttpRequest,n="?";"-1"!=this.opts.s3.search(/\?/)&&(n="&"),i.open("GET",this.opts.s3+n+"name="+t.name+"&type="+t.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var s=this;i.onreadystatechange=function(t){4==this.readyState&&200==this.status?(s.progress.show(),e(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},i.send()},s3createCORSRequest:function(t,e){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(t,e,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(t,e)):i=null,i},s3uploadToS3:function(e,i){var n=this.upload.s3createCORSRequest("PUT",i);n&&(n.onload=t.proxy(function(){if(200==n.status){this.progress.hide();var t=i.split("?");if(!t[0])return!1;this.upload.direct||this.upload.$droparea.removeClass("drag-drop");var e={filelink:t[0]};if("file"==this.upload.type){var s=t[0].split("/");e.filename=s[s.length-1]}this.upload.callback(e,this.upload.direct,!1)}},this),n.onerror=function(){},n.upload.onprogress=function(t){},n.setRequestHeader("Content-Type",e.type),n.setRequestHeader("x-amz-acl","public-read"),n.send(e))}}},utils:function(){return{isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isString:function(t){return"[object String]"==Object.prototype.toString.call(t)},isEmpty:function(e,i){return e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),e=e.replace(/&nbsp;/gi,""),e=e.replace(/<\/?br\s?\/?>/g,""),e=e.replace(/\s/g,""),e=e.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),e=e.replace(/<iframe(.*?[^>])>$/i,"iframe"),e=e.replace(/<source(.*?[^>])>$/i,"source"),i!==!1&&(e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),e=e.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"")),e=t.trim(e),""===e},normalize:function(t){return"undefined"==typeof t?0:parseInt(t.replace("px",""),10)},hexToRgb:function(t){if("undefined"!=typeof t){if(-1==t.search(/^#/))return t;var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")"}},getOuterHtml:function(e){return t("<div>").append(t(e).eq(0).clone()).html()},getAlignmentElement:function(e){return-1!==t.inArray(e.tagName,this.opts.alignmentTags)?t(e):t(e).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0])},removeEmptyAttr:function(e,i){var n=t(e);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},removeEmpty:function(e,i){var n=t(i);if(n.find(".redactor-invisible-space").removeAttr("style").removeAttr("class"),0===n.find("hr, br, img, iframe, source").length){var s=t.trim(n.text());this.utils.isEmpty(s,!1)&&n.remove()}},saveScroll:function(){this.saveEditorScroll=this.$editor.scrollTop(),this.saveBodyScroll=t(window).scrollTop(),this.opts.scrollTarget&&(this.saveTargetScroll=t(this.opts.scrollTarget).scrollTop())},restoreScroll:function(){"undefined"==typeof this.saveScroll&&"undefined"==typeof this.saveBodyScroll||(t(window).scrollTop(this.saveBodyScroll),this.$editor.scrollTop(this.saveEditorScroll),this.opts.scrollTarget&&t(this.opts.scrollTarget).scrollTop(this.saveTargetScroll))},createSpaceElement:function(){var t=document.createElement("span");return t.className="redactor-invisible-space",t.innerHTML=this.opts.invisibleSpace,t},removeInlineTags:function(e){var i=this.opts.inlineTags;i.push("span"),"PRE"==e.tagName&&i.push("a"),t(e).find(i.join(",")).not("span.redactor-selection-marker").contents().unwrap()},replaceWithContents:function(e,i){var n=this;return t(e).replaceWith(function(){return i===!0&&n.utils.removeInlineTags(this),t(this).contents()}),t(e)},replaceToTag:function(e,i,n){var s,r=this;return t(e).replaceWith(function(){s=t("<"+i+" />").append(t(this).contents());for(var e=0;e<this.attributes.length;e++)s.attr(this.attributes[e].name,this.attributes[e].value);return n===!0&&r.utils.removeInlineTags(s),s}),s},isStartOfElement:function(){var t=this.selection.getBlock();if(!t)return!1;var e=this.caret.getOffsetOfElement(t);return 0===e},isEndOfElement:function(e){if("undefined"==typeof e){var e=this.selection.getBlock();if(!e)return!1}var i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).text()).replace(/\n\r\n/g,"");return i==n.length},isEndOfEditor:function(){var e=this.$editor[0],i=this.caret.getOffsetOfElement(e),n=t.trim(t(e).html().replace(/(<([^>]+)>)/gi,""));return i==n.length},isBlock:function(t){return t=t[0]||t,t&&this.utils.isBlockTag(t.tagName)},isBlockTag:function(t){return"undefined"==typeof t?!1:this.reIsBlock.test(t)},isTag:function(e,i){var n=t(e).closest(i);return 1==n.length?n[0]:!1},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},isRedactorParent:function(e){return e?0===t(e).parents(".redactor-editor").length||t(e).hasClass("redactor-editor")?!1:e:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(e){var i=this.selection.getParent(),n=this.selection.getCurrent();if(t.isArray(e)){var s=0;return t.each(e,t.proxy(function(t,e){this.utils.isCurrentOrParentOne(n,i,e)&&s++},this)),0!==s}return this.utils.isCurrentOrParentOne(n,i,e)},isCurrentOrParentOne:function(t,e,i){return i=i.toUpperCase(),e&&e.tagName===i?e:t&&t.tagName===i?t:!1},isOldIe:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<9)},isLessIe10:function(){return!!(this.utils.browser("msie")&&parseInt(this.utils.browser("version"),10)<10)},isIe11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},browser:function(t){var e=navigator.userAgent.toLowerCase(),i=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return"safari"==t?"undefined"!=typeof i[3]?"safari"==i[3]:!1:"version"==t?i[2]:"webkit"==t?"chrome"==i[1]||"opr"==i[1]||"webkit"==i[1]:"rv"==i[1]?"msie"==t:"opr"==i[1]?"webkit"==t:t==i[1]}}}},t(window).on("load.tools.redactor",function(){t('[data-tools="redactor"]').redactor()}),e.prototype.init.prototype=e.prototype,t.Redactor.fn.formatLinkify=function(e,i,r,o,a,l){for(var c="((?:http[s]?:\\/\\/(?:www\\.)?|www\\.){1}(?:[0-9A-Za-z\\-%_]+\\.)+[a-zA-Z]{2,}(?::[0-9]+)?(?:(?:/[0-9A-Za-z\\-#\\.%+_]*)+)?(?:\\?(?:[0-9A-Za-z\\-\\.%_]+(?:=[0-9A-Za-z\\-\\.%_\\+]*)?)?(?:&(?:[0-9A-Za-z\\-\\.%_]+(?:=[0-9A-Za-z\\-\\.%_\\+]*)?)?)*)?(?:#[0-9A-Za-z\\-\\.%_\\+=\\?&;]*)?)",d=new RegExp(c,"gi"),h=/(https?|ftp):\/\//i,u=new RegExp("(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\\.(?:jpg|gif|png))(?:\\?([^#]*))?(?:#(.*))?","gi"),p=(this.$editor?this.$editor[0]:this).childNodes,f=p.length;f--;){var m=p[f];if(3===m.nodeType&&"PRE"!==m.parentNode){var g=m.nodeValue;if(a&&g){var v='<iframe width="500" height="281" src="',b='" frameborder="0" allowfullscreen></iframe>';g.match(n)?(g=g.replace(n,v+"//www.youtube.com/embed/$1"+b),t(m).after(g).remove()):g.match(s)&&(g=g.replace(s,v+"//player.vimeo.com/video/$2"+b),t(m).after(g).remove())}if(o&&g&&g.match(u)){var y=g.match(u);return g=g.replace(u,'<img src="'+y+'" />'),void t(m).after(g).remove()}-1!=g.search(/\$/g)&&(g=g.replace(/\$/g,"&#36;"));var y=g.match(d);if(r&&g&&y){for(var k=y.length,w=0;k>w;w++){null!==y[w].match(/\.$/)&&(y[w]=y[w].replace(/\.$/,""));var x=y[w],C=x,T="";null!==x.match(/\s$/)&&(T=" ");var $=e+"://";null!==x.match(h)&&($=""),C.length>l&&(C=C.substring(0,l)+"..."),C=C.replace(/&#36;/g,"$").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var _=[],S=g.match("<a(.*?)</a>");if(null!==S){var k=S.length;for(f=0;k>f;f++)_[f]=S[f],g=g.replace(S[f],"{abuffer"+f+"}")}g=g.replace(x,'<a href="'+$+t.trim(x)+'">'+t.trim(C)+"</a>"+T),t.each(_,function(t,e){g=g.replace("{abuffer"+t+"}",e)})}t(m).after(g).remove()}}else 1!==m.nodeType||/^(pre|a|button|textarea)$/i.test(m.tagName)||t.Redactor.fn.formatLinkify.call(m,e,i,r,o,a,l)}}}(jQuery),!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.filemanager=function(){return{getTemplate:function(){return String()+'<section id="redactor-modal-filemanager"><div class="input-group"><input id="filemanager-filter" type="textbox" placeholder="Search" class="form-control"><span class="input-group-btn"><span class="btn btn-default"><span class="fa fa-search"></span></span></span></div><div id="filemanager-container" class="raw-block-400 quarx-row raw-margin-top-24" style="overflow: scroll;">Loading your file collection...</div></section>'},init:function(){var t=this.button.add("filemanager","Insert File");this.button.setAwesome("filemanager","fa-archive"),this.button.addCallback(t,this.filemanager.show)},show:function(){this.modal.addTemplate("filemanager",this.filemanager.getTemplate()),this.modal.load("filemanager","File Insert",600),this.modal.show(),this.filemanager.load()},load:function(){$.ajax({dataType:"json",cache:!1,headers:{Quarx:_apiKey,Authorization:"Bearer "+_apiToken},url:this.opts.fileManagerJson,error:function(t){},success:$.proxy(function(t){$("#filemanager-container").html(""),$.each(t.data,$.proxy(function(t,e){var i=$('<div class="list-row raw-left raw100"><div class="raw100 raw-left"><p><span class="fa fa-download"></span> <a class="file-link" href="#" data-url="/public-download/'+e.file_identifier+'">'+e.file_name+"</a></p></div>");$("#filemanager-container").append(i),$(i).click($.proxy(this.filemanager.insert,this))},this)),$("#filemanager-filter").bind("keyup",function(){$("#filemanager-container").find(".file-link").each(function(){$(this).html().indexOf($("#filemanager-filter").val())<0?$(this).parent().parent().parent().hide():$(this).parent().parent().parent().show()})})},this)})},insert:function(t){t.preventDefault(),this.insert.html('<a href="'+$(t.target).attr("data-url")+'">'+$(t.target).html()+"</a>",!1),this.modal.close()}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.fontcolor=function(){return{init:function(){for(var t=["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],e=["fontcolor","backcolor"],i=0;2>i;i++){var n=e[i],s=this.button.add(n,this.lang.get(n)),r=this.button.addDropdown(s);r.width(242),this.fontcolor.buildPicker(r,n,t)}},buildPicker:function(t,e,i){for(var n="backcolor"==e?"background-color":"color",s=i.length,r=this,o=function(t){t.preventDefault(),r.fontcolor.set($(this).data("rule"),$(this).attr("rel"))},a=0;s>a;a++){var l=i[a],c=$('<a rel="'+l+'" data-rule="'+n+'" href="#" style="float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 22px; height: 22px;"></a>');c.css("background-color",l),c.on("click",o),t.append(c)}var d=$('<a href="#" style="display: block; clear: both; padding: 5px; font-size: 12px; line-height: 1;"></a>').html(this.lang.get("none"));d.on("click",$.proxy(function(t){t.preventDefault(),this.fontcolor.remove(n)},this)),t.append(d)},set:function(t,e){this.inline.format("span","style",t+": "+e+";")},remove:function(t){this.inline.removeStyleRule(t)}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.fontfamily=function(){return{init:function(){var t=["Arial","Helvetica","Georgia","Times New Roman","Monospace"],e=this,i={};$.each(t,function(t,n){i["s"+t]={title:n,func:function(){e.fontfamily.set(n)}}}),i.remove={title:"Remove Font Family",func:e.fontfamily.reset};var n=this.button.add("fontfamily","Change Font Family");this.button.addDropdown(n,i)},set:function(t){this.inline.format("span","style","font-family:"+t+";")},reset:function(){this.inline.removeStyleRule("font-family")}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.fontsize=function(){return{init:function(){var t=[10,11,12,14,16,18,20,24,28,30],e=this,i={};$.each(t,function(t,n){i["s"+t]={title:n+"px",func:function(){e.fontsize.set(n)}}}),i.remove={title:"Remove Font Size",func:e.fontsize.reset};var n=this.button.add("fontsize","Change Font Size");this.button.addDropdown(n,i)},set:function(t){this.inline.format("span","style","font-size: "+t+"px;")},reset:function(){this.inline.removeStyleRule("font-size")}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.imagemanager=function(){return{init:function(){this.opts.imageManagerJson&&this.modal.addCallback("image",this.imagemanager.load)},load:function(){var t=this.modal.getModal();this.modal.createTabber(t),$("#redactor-modal-image-droparea").hide();var e=$('<div id="redactor-image-manager-box" style="overflow: auto; height: 300px;" class="redactor-tab redactor-tab2">').hide();t.append(e),$("#redactor-image-manager-box").html('<p class="text-center raw-margin-top-48">Loading your image collection...</p>').show(),$.ajax({dataType:"json",cache:!1,headers:{Quarx:_apiKey,Authorization:"Bearer "+_apiToken},url:this.opts.imageManagerJson,success:$.proxy(function(t){$("#redactor-image-manager-box").html(""),$.each(t.data,$.proxy(function(t,e){var i="";"undefined"!=typeof e.title_tag&&(i=e.title_tag);var n=$('<div class="raw25 pull-left thumbnail-box"><div class="img" style="background-image: url(\''+e.js_url+'\')" data-img-name="'+e.js_url+'" src="'+e.js_url+'" rel="'+e.js_url+'" title="'+i+'"></div></div>');$("#redactor-image-manager-box").append(n),$(n).click($.proxy(this.imagemanager.insert,this))},this)),$("#imagemanager-filter").bind("keyup",function(){$("#redactor-image-manager-box").find("img").each(function(){$(this).attr("data-img-name").indexOf($("#imagemanager-filter").val())<0?$(this).hide():$(this).show()})})},this)})},insert:function(t){this.image.insert('<img src="'+$(t.target).attr("rel")+'" alt="'+$(t.target).attr("title")+'" title="'+$(t.target).attr("title")+'">')}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.stockimagemanager=function(){return{getTemplate:function(){return String()+'<section id="redactor-modal-stockimagemanager"><div class="input-group stockimagemanager-search-box"><input id="stockimagemanager-filter" type="textbox" placeholder="Search" class="form-control"><span class="input-group-btn"><button class="btn btn-default" type="button" id="stockimagemanager-search"><span class="fa fa-search"></span></button></span></div><div id="stockimagemanager-container" class="raw-block-300 quarx-row raw-margin-top-24 raw-margin-bottom-24" style="overflow: scroll;"></div><div id="stockimagemanager-links" class="raw-block-20 quarx-row"><button id="stockImgPrevBtn" class="btn btn-default pull-left">Prev</button><button id="stockImgNextBtn" class="pull-right btn btn-default">Next</button></div><div><a href="https://pixabay.com/"><img class="raw100 raw-margin-top-24" src="https://pixabay.com/static/img/public/leaderboard_a.png" alt="Pixabay"> </a></div></section>'},init:function(){var t=this.button.add("stockimagemanager","Insert Stock Image");this.button.setAwesome("stockimagemanager","fa-camera-retro"),this.button.addCallback(t,this.stockimagemanager.show)},show:function(){this.modal.addTemplate("stockimagemanager",this.stockimagemanager.getTemplate()),this.modal.load("stockimagemanager","Insert Stock Images",600),this.modal.show(),this.stockimagemanager.load()},search:function(t,e){"undefined"==typeof e&&(e=1),"undefined"!=typeof t&&"null"!=t&&null!=t?_searchTerm="&q="+encodeURIComponent(t):_searchTerm="",$("#stockimagemanager-container").html("loading..."),$.ajax({dataType:"json",cache:!1,url:this.opts.stockImageManagerJson+"?key="+_pixabayKey+_searchTerm+"&order=popular&page="+e,error:function(t){},success:$.proxy(function(t){Math.floor(t.totalHits/20)==e?$("#stockImgNextBtn").hide():$("#stockImgNextBtn").show(),1==e?$("#stockImgPrevBtn").hide():$("#stockImgPrevBtn").show(),$("#stockImgNextBtn").attr("data-page",parseInt(e)+1),$("#stockImgPrevBtn").attr("data-page",parseInt(e)-1),$("#stockimagemanager-container").html(""),$.each(t.hits,$.proxy(function(t,e){var i=$('<div class="raw25 pull-left thumbnail-box"><img class="img-responsive" data-img-name="'+e.previewURL+'" data-url="'+e.webformatURL+'" src="'+e.previewURL+'" rel="'+e.previewURL+'" style="cursor: pointer;" /></div>');$("#stockimagemanager-container").append(i),$(i).click($.proxy(this.stockimagemanager.insert,this))},this))},this)})},load:function(){if(""==_pixabayKey)$("#stockImgPrevBtn, #stockImgNextBtn, .stockimagemanager-search-box").hide(),$("#stockimagemanager-container").html('<p class="text-center">In order to have an easy supply of stock images visit <a target="_blank" href="https://pixabay.com/api/docs/">Pixabay</a> to get an API key for your application.</p><p class="text-center">Then add the following to your .env file:<br> PIXABAY=yourApiKey</p>');else{var t=this.stockimagemanager;t.search("null"),$("#stockimagemanager-search").bind("click",function(){var e=$("#stockimagemanager-filter").val();""==e&&(e="null"),t.search(e)}),$("#stockImgPrevBtn, #stockImgNextBtn").bind("click",function(){var e=$("#stockimagemanager-filter").val();""==e&&(e="null"),t.search(e,$(this).attr("data-page"))})}},insert:function(t){var e=this;$.ajax({type:"POST",dataType:"json",cache:!1,headers:{ApiKey:"tOJRcQXeCesSMprwbtU5"},data:{_token:_token,location:$(t.target).attr("data-url")},url:_url+"/quarx/api/images/store",error:function(t){},success:$.proxy(function(i){t.preventDefault(),e.insert.html('<img src="'+i.data.js_url+'" />',!1),e.modal.close()},this)})}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.specialchar=function(){return{init:function(){var t={};t.ndash={title:"&ndash;",func:this.specialchar.callbackFunc},t.mdash={title:"&mdash;",func:this.specialchar.callbackFunc},t.iexcl={title:"&iexcl;",func:this.specialchar.callbackFunc},t.iquest={title:"&iquest;",func:this.specialchar.callbackFunc},t.laquo={title:"&laquo;",func:this.specialchar.callbackFunc},t.raquo={title:"&raquo;",func:this.specialchar.callbackFunc},t.cent={title:"&cent;",func:this.specialchar.callbackFunc},t.copy={title:"&copy;",func:this.specialchar.callbackFunc},t.divide={title:"&divide;",func:this.specialchar.callbackFunc},t.gt={title:"&gt;",func:this.specialchar.callbackFunc},t.lt={title:"&lt;",func:this.specialchar.callbackFunc},t.micro={title:"&micro;",func:this.specialchar.callbackFunc},t.middot={title:"&middot;",func:this.specialchar.callbackFunc},t.para={title:"&para;",func:this.specialchar.callbackFunc},t.plusmn={title:"&plusmn;",func:this.specialchar.callbackFunc},t.euro={title:"&euro;",func:this.specialchar.callbackFunc},t.pound={title:"&pound;",func:this.specialchar.callbackFunc},t.reg={title:"&reg;",func:this.specialchar.callbackFunc},t.sect={title:"&sect;",func:this.specialchar.callbackFunc},t.trade={title:"&trade;",func:this.specialchar.callbackFunc},t.yen={title:"&yen;",func:this.specialchar.callbackFunc},t.deg={title:"&deg;",func:this.specialchar.callbackFunc},t.aacute={title:"&aacute;",func:this.specialchar.callbackFunc},t.Aacute={title:"&Aacute;",func:this.specialchar.callbackFunc},t.agrave={title:"&agrave;",func:this.specialchar.callbackFunc},t.acirc={title:"&acirc;",func:this.specialchar.callbackFunc},t.aring={title:"&aring;",func:this.specialchar.callbackFunc},t.atilde={title:"&atilde;",func:this.specialchar.callbackFunc},t.auml={title:"&auml;",func:this.specialchar.callbackFunc},t.aelig={title:"&aelig;",func:this.specialchar.callbackFunc},t.ccedil={title:"&ccedil;",func:this.specialchar.callbackFunc},t.eacute={title:"&eacute;",func:this.specialchar.callbackFunc},t.egrave={title:"&egrave;",func:this.specialchar.callbackFunc},t.ecirc={title:"&ecirc;",func:this.specialchar.callbackFunc},t.euml={title:"&euml;",func:this.specialchar.callbackFunc},t.iacute={title:"&iacute;",func:this.specialchar.callbackFunc},t.igrave={title:"&igrave;",func:this.specialchar.callbackFunc},t.icirc={title:"&icirc;",func:this.specialchar.callbackFunc},t.iuml={title:"&iuml;",func:this.specialchar.callbackFunc},t.ntilde={title:"&ntilde;",func:this.specialchar.callbackFunc},t.oacute={title:"&oacute;",func:this.specialchar.callbackFunc},t.ograve={title:"&ograve;",func:this.specialchar.callbackFunc},t.ocirc={title:"&ocirc;",func:this.specialchar.callbackFunc},t.oslash={title:"&oslash;",func:this.specialchar.callbackFunc},t.otilde={title:"&otilde;",func:this.specialchar.callbackFunc},t.ouml={title:"&ouml;",func:this.specialchar.callbackFunc},t.uacute={title:"&uacute;",func:this.specialchar.callbackFunc},t.ugrave={title:"&ugrave;",func:this.specialchar.callbackFunc},t.ucirc={title:"&ucirc;",func:this.specialchar.callbackFunc},t.uuml={title:"&uuml;",func:this.specialchar.callbackFunc};var e=this.button.add("specialchar","Special Characters");this.button.setAwesome("specialchar","fa-keyboard-o"),this.button.addDropdown(e,t)},callbackFunc:function(t){this.insert.html("&"+t+";",!1),this.modal.close()}}},!RedactorPlugins)var RedactorPlugins={};if(RedactorPlugins.table=function(){return{getTemplate:function(){return String()+'<section id="redactor-modal-table-insert"><label>'+this.lang.get("rows")+'</label><input type="text" size="5" value="2" id="redactor-table-rows" /><label>'+this.lang.get("columns")+'</label><input type="text" size="5" value="3" id="redactor-table-columns" /></section>'},init:function(){var t={};t.insert_table={title:this.lang.get("insert_table"),func:this.table.show},t.insert_row_above={title:this.lang.get("insert_row_above"),func:this.table.addRowAbove},t.insert_row_below={title:this.lang.get("insert_row_below"),func:this.table.addRowBelow},t.insert_column_left={title:this.lang.get("insert_column_left"),func:this.table.addColumnLeft},t.insert_column_right={title:this.lang.get("insert_column_right"),func:this.table.addColumnRight},t.add_head={title:this.lang.get("add_head"),func:this.table.addHead},t.delete_head={title:this.lang.get("delete_head"),func:this.table.deleteHead},t.delete_column={title:this.lang.get("delete_column"),func:this.table.deleteColumn},t.delete_row={title:this.lang.get("delete_row"),func:this.table.deleteRow},t.delete_table={title:this.lang.get("delete_table"),func:this.table.deleteTable},this.observe.addButton("td","table"),this.observe.addButton("th","table");var e=this.button.addBefore("link","table",this.lang.get("table"));this.button.addDropdown(e,t)},show:function(){this.modal.addTemplate("table",this.table.getTemplate()),this.modal.load("table",this.lang.get("insert_table"),300),this.modal.createCancelButton();var t=this.modal.createActionButton(this.lang.get("insert"));t.on("click",this.table.insert),this.selection.save(),this.modal.show(),$("#redactor-table-rows").focus()},insert:function(){var t,e,i,n,s=$("#redactor-table-rows").val(),r=$("#redactor-table-columns").val(),o=$("<div>"),a=Math.floor(99999*Math.random()),l=$('<table id="table'+a+'"><tbody></tbody></table>');for(t=0;s>t;t++){for(e=$("<tr>"),i=0;r>i;i++)n=$("<td>"+this.opts.invisibleSpace+"</td>"),0===t&&0===i&&n.append(this.selection.getMarker()),$(e).append(n);l.append(e)}o.append(l);var c=o.html();if(this.modal.close(),this.selection.restore(),!this.table.getTable()){this.buffer.set();var d=this.selection.getBlock()||this.selection.getCurrent();d&&"BODY"!=d.tagName?("LI"==d.tagName&&(d=$(d).closest("ul, ol")),$(d).after(c)):this.insert.html(c),this.selection.restore();var h=this.$editor.find("#table"+a);if(!this.opts.linebreaks&&(this.utils.browser("mozilla")||this.utils.browser("msie"))){var u=h.next();0===u.length&&h.after(this.opts.emptyHtml)}this.observe.buttons(),h.find("span.redactor-selection-marker").remove(),h.removeAttr("id"),this.code.sync(),this.core.setCallback("insertedTable",h)}},getTable:function(){var t=$(this.selection.getParent()).closest("table");return this.utils.isRedactorParent(t)?0===t.size()?!1:t:!1},restoreAfterDelete:function(t){this.selection.restore(),t.find("span.redactor-selection-marker").remove(),this.code.sync()},deleteTable:function(){var t=this.table.getTable();if(t){this.buffer.set();var e=t.next();this.opts.linebreaks||0===e.length?this.caret.setAfter(t):this.caret.setStart(e),t.remove(),this.code.sync()}},deleteRow:function(){var t=this.table.getTable();if(t){var e=$(this.selection.getCurrent());this.buffer.set();var i=e.closest("tr"),n=i.prev().length?i.prev():i.next();if(n.length){var s=n.children("td, th").first();s.length&&s.prepend(this.selection.getMarker())}i.remove(),this.table.restoreAfterDelete(t)}},deleteColumn:function(){var t=this.table.getTable();if(t){this.buffer.set();var e=$(this.selection.getCurrent()),i=e.closest("td, th"),n=i[0].cellIndex;t.find("tr").each($.proxy(function(t,e){var i=$(e),s=0>n-1?n+1:n-1;0===t&&i.find("td, th").eq(s).prepend(this.selection.getMarker()),i.find("td, th").eq(n).remove()},this)),this.table.restoreAfterDelete(t)}},addHead:function(){var t=this.table.getTable();if(t){if(this.buffer.set(),0!==t.find("thead").size())return void this.table.deleteHead();var e=t.find("tr").first().clone();e.find("td").html(this.opts.invisibleSpace),$thead=$("<thead></thead>").append(e),t.prepend($thead),this.code.sync()}},deleteHead:function(){var t=this.table.getTable();if(t){var e=t.find("thead");0!==e.size()&&(this.buffer.set(),e.remove(),this.code.sync())}},addRowAbove:function(){this.table.addRow("before")},addRowBelow:function(){this.table.addRow("after")},addColumnLeft:function(){this.table.addColumn("before")},addColumnRight:function(){this.table.addColumn("after")},addRow:function(t){var e=this.table.getTable();if(e){this.buffer.set();var i=$(this.selection.getCurrent()),n=i.closest("tr"),s=n.clone();s.find("th").replaceWith(function(){var t=$("<td>");return t[0].attributes=this.attributes,t.append($(this).contents())}),s.find("td").html(this.opts.invisibleSpace),"after"==t?n.after(s):n.before(s),this.code.sync()}},addColumn:function(t){var e=this.table.getTable();if(e){var i=0,n=$(this.selection.getCurrent());this.buffer.set();var s=n.closest("tr"),r=n.closest("td, th");s.find("td, th").each($.proxy(function(t,e){$(e)[0]===r[0]&&(i=t)},this)),e.find("tr").each($.proxy(function(e,n){var s=$(n).find("td, th").eq(i),r=s.clone();r.html(this.opts.invisibleSpace),"after"==t?s.after(r):s.before(r)},this)),this.code.sync()}}}},!RedactorPlugins)var RedactorPlugins={};RedactorPlugins.video=function(){return{reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,getTemplate:function(){return String()+'<section id="redactor-modal-video-insert"><label>'+this.lang.get("video_html_code")+'</label><textarea id="redactor-insert-video-area" style="height: 160px;"></textarea></section>'},init:function(){var t=this.button.addAfter("image","video",this.lang.get("video"));this.button.addCallback(t,this.video.show)},show:function(){this.modal.addTemplate("video",this.video.getTemplate()),this.modal.load("video",this.lang.get("video"),700),this.modal.createCancelButton();var t=this.modal.createActionButton(this.lang.get("insert"));t.on("click",this.video.insert),this.selection.save(),this.modal.show(),$("#redactor-insert-video-area").focus()},insert:function(){var t=$("#redactor-insert-video-area").val();t=this.clean.stripTags(t);var e='<iframe style="width: 500px; height: 281px;" src="',i='" frameborder="0" allowfullscreen></iframe>';t.match(this.video.reUrlYoutube)?t=t.replace(this.video.reUrlYoutube,e+"//www.youtube.com/embed/$1"+i):t.match(this.video.reUrlVimeo)&&(t=t.replace(this.video.reUrlVimeo,e+"//player.vimeo.com/video/$2"+i)),this.selection.restore(),this.modal.close();var n=this.selection.getBlock()||this.selection.getCurrent();n?$(n).after(t):this.insert.html(t),this.code.sync()}}},$("#External").is(":checked")?($("#External_url").parent().show(),$("#Page_id").parent().hide()):($("#External_url").parent().hide(),$("#Page_id").parent().show()),$(window).ready(function(){$("#External").bind("click",function(){$(this).is(":checked")?($("#External_url").parent().show(),$("#Page_id").parent().hide()):($("#External_url").parent().hide(),$("#Page_id").parent().show())})}),$(function(){$("#saveFilesBtn").click(function(t){t.preventDefault(),Dropzone.forElement(".dropzone").processQueue()})}),$(function(){$("#saveImagesBtn").click(function(t){t.preventDefault(),Dropzone.forElement(".dropzone").processQueue()})}),Dropzone.options.fileDropzone={paramName:"location",addRemoveLinks:!0,autoProcessQueue:!1,init:function(){this.on("success",function(t,e){t.serverData=e.data,
$(["name","original","mime","size"]).each(function(){$("#fileDetailsForm").prepend('<input id="file_'+t.serverData.name+'" name="location['+t.serverData.name+"]["+this+']" value="'+t.serverData[this]+'" type="hidden" />')}),this.options.autoProcessQueue=!0}),this.on("queuecomplete",function(){$("#fileDetailsForm").submit()}),this.on("removedfile",function(t){t.serverData&&($.get(_url+"/quarx/files/remove/"+t.serverData.name),$("#file_"+t.serverData.name).remove())})},accept:function(t,e){e()}};